!function(){function t(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,n=c(t);if(e){var a=c(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return o(this,i)}}function o(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=r(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,l=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){l=!0,c=t},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw c}}}}function r(t,e){if(t){if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,i){return e&&d(t.prototype,e),i&&d(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{WUsH:function(i,o,c){"use strict";c.r(o),c.d(o,"HttpLoaderFactory",function(){return ta}),c.d(o,"TransactionModule",function(){return na});var r,l,d=c("10VE"),b=c("SVse"),h=c("s7LF"),p=c("TSSN"),f=c("OoJn"),g=c("sWsm"),m=c("PDtH"),v=c("emFE"),y=c("k5Gf"),I=c("4SUy"),S=c("IheW"),U=c("uHT2"),C=c("dQqK"),V=c("HJFG"),k=c("8DlW"),T=c("L6UN"),x=c("v/ic"),w=c("SM1S"),M=c("1H6I"),D=c("2Vo4"),A=c("AytR"),O=c("8Y7J"),P=((r=function(){function t(e,i){s(this,t),this.http=e,this.env=i,this.baseUrl=A.a.apiUrl,this.messageSource=new D.a(0),this.currentMessage=this.messageSource.asObservable()}return u(t,[{key:"changeMessage",value:function(t){this.messageSource.next(t)}},{key:"getOCs",value:function(){return this.http.get("".concat(this.env.apiUrl,"Ocs/GetListTree"))}},{key:"getAllKpi",value:function(){return this.http.get("".concat(this.env.apiUrl,"Meeting/GetAllKPI"))}},{key:"getChart",value:function(t){return this.http.get("".concat(this.env.apiUrl,"Meeting/GetChart/").concat(t))}},{key:"getChartWithTime",value:function(t,e){return this.http.get("".concat(this.env.apiUrl,"Meeting/GetChartWithDateTime/").concat(t,"/").concat(e))}},{key:"addPolicy",value:function(t){return this.http.post("".concat(this.env.apiUrl,"Ocpolicy/MappingPolicyOc"),t)}},{key:"updatePolicy",value:function(t){return this.http.post("".concat(this.env.apiUrl,"Ocpolicy/RemovePolicyOC"),t)}},{key:"deletePolicy",value:function(t){return this.http.delete("".concat(this.env.apiUrl,"Ocpolicy/DeletePolicy/").concat(t))}},{key:"getAllPolicy",value:function(){return this.http.get("".concat(this.env.apiUrl,"Ocpolicy/GetAllPolicy"))}}]),t}()).\u0275fac=function(t){return new(t||r)(O.cc(S.b),O.cc(M.a))},r.\u0275prov=O.Lb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),j=c("qb46"),L=c("MO+k"),G=c("s0DI"),F=c("z6cu"),R=c("JIr8"),E=((l=function(){function t(e,i,n){s(this,t),this.http=e,this.env=i,this.messageSource=new D.a(null),this.messageUploadSource=new D.a(null),this.currentMessage=this.messageSource.asObservable(),this.currentUploadMessage=this.messageUploadSource.asObservable(),this.entity="Todolist2",this.base=A.a.apiUrl}return u(t,[{key:"changeMessage",value:function(t){this.messageSource.next(t)}},{key:"changeUploadMessage",value:function(t){this.messageUploadSource.next(t)}},{key:"l0",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/L0?currentTime=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"submitUpdatePDCA",value:function(t){return this.http.post("".concat(this.env.apiUrl).concat(this.entity,"/SubmitUpdatePDCA"),t)}},{key:"submitAction",value:function(t){return this.http.post("".concat(this.env.apiUrl).concat(this.entity,"/submitAction"),t)}},{key:"submitKPINew",value:function(t){return this.http.post("".concat(this.env.apiUrl).concat(this.entity,"/SubmitKPINew?kpiId=").concat(t),{})}},{key:"addOrUpdateStatus",value:function(t){return this.http.post("".concat(this.env.apiUrl).concat(this.entity,"/AddOrUpdateStatus"),t)}},{key:"getStatus",value:function(){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/getStatus"),{}).pipe(Object(R.a)(this.handleError))}},{key:"getActionsForL0",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetActionsForL0?kpiNewId=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"getPDCAForL0",value:function(t,e){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetPDCAForL0?kpiNewId=").concat(t,"&currentTime=").concat(e),{}).pipe(Object(R.a)(this.handleError))}},{key:"getKPIForUpdatePDC",value:function(t,e){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetKPIForUpdatePDC?kpiNewId=").concat(t,"&currentTime=").concat(e),{}).pipe(Object(R.a)(this.handleError))}},{key:"getTargetForUpdatePDCA",value:function(t,e){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetTargetForUpdatePDCA?kpiNewId=").concat(t,"&currentTime=").concat(e),{}).pipe(Object(R.a)(this.handleError))}},{key:"getActionsForUpdatePDCA",value:function(t,e){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetActionsForUpdatePDCA?kpiNewId=").concat(t,"&currentTime=").concat(e),{}).pipe(Object(R.a)(this.handleError))}},{key:"download",value:function(t,e){return this.http.get("".concat(this.env.apiUrl,"UploadFile/download?kpiId=").concat(t,"&uploadTime=").concat(e),{responseType:"blob"}).pipe(Object(R.a)(this.handleError))}},{key:"getAttackFiles",value:function(t,e){return this.http.get("".concat(this.env.apiUrl,"UploadFile/GetAttackFiles?kpiId=").concat(t,"&uploadTime=").concat(e)).pipe(Object(R.a)(this.handleError))}},{key:"getDownloadFiles",value:function(t,e){return this.http.get("".concat(this.env.apiUrl,"UploadFile/GetDownloadFiles?kpiId=").concat(t,"&uploadTime=").concat(e)).pipe(Object(R.a)(this.handleError))}},{key:"getDownloadFilesMeeting",value:function(t,e){return this.http.get("".concat(this.env.apiUrl,"UploadFile/GetDownloadFilesMeeting?kpiId=").concat(t,"&uploadTime=").concat(e)).pipe(Object(R.a)(this.handleError))}},{key:"handleError",value:function(t){var e,i,n,o;if(null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.message)return Object(F.a)((null===(i=null==t?void 0:t.error)||void 0===i?void 0:i.message)||"Server error");if(null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.errors){var c,r="",l=a(null===(o=null==t?void 0:t.error)||void 0===o?void 0:o.errors);try{for(l.s();!(c=l.n()).done;)r+=c.value+"<br/>"}catch(s){l.e(s)}finally{l.f()}return Object(F.a)(r||"Server error")}return Object(F.a)("Server error")}}]),t}()).\u0275fac=function(t){return new(t||l)(O.cc(S.b),O.cc(M.a),O.cc(G.a))},l.\u0275prov=O.Lb({token:l,factory:l.\u0275fac,providedIn:"root"}),l),B=c("Naoh"),N=c("G0yt"),_=c("iInd"),K=c("4DqM"),H=c("7YrF"),J=c("e7Im"),z=["grid"],Q=["detailModal"],Y=["fileModal"],q=["gridDataTable"],W=["content"];function X(t,e){1&t&&(O.Ic(0),O.jc(1,"translate")),2&t&&O.Kc(" ",O.kc(1,1,"Level")," ")}function Z(t,e){1&t&&(O.Ic(0),O.jc(1,"translate")),2&t&&O.Kc(" ",O.kc(1,1,"KPI Name")," ")}function tt(t,e){1&t&&(O.Ic(0),O.jc(1,"translate")),2&t&&O.Kc(" ",O.kc(1,1,"Center")," ")}function et(t,e){1&t&&(O.Ic(0),O.jc(1,"translate")),2&t&&O.Kc(" ",O.kc(1,1,"Dept")," ")}function it(t,e){1&t&&(O.Ic(0),O.jc(1,"translate")),2&t&&O.Kc(" ",O.kc(1,1,"PIC")," ")}function nt(t,e){if(1&t){var i=O.Wb();O.Vb(0,"div",30),O.Vb(1,"button",31),O.fc("click",function(){O.Ac(i);var t=e.$implicit,n=O.ic(),o=O.xc(53);return n.openModal(t,o)}),O.Qb(2,"i",32),O.Ub(),O.Ub()}}function ot(t,e){1&t&&O.Ic(0," N/A ")}function ct(t,e){if(1&t&&(O.Vb(0,"th",50),O.Ic(1),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.Kc(" ",i," ")}}function at(t,e){if(1&t&&(O.Tb(0),O.Ic(1),O.Sb()),2&t){var i=O.ic().$implicit;O.Cb(1),O.Kc(" ",i," % ")}}function rt(t,e){if(1&t&&O.Ic(0),2&t){var i=O.ic().$implicit;O.Kc(" ",i," ")}}function lt(t,e){if(1&t&&(O.Vb(0,"td",50),O.Gc(1,at,2,1,"ng-container",51),O.Gc(2,rt,1,1,"ng-template",null,52,O.Hc),O.Ub()),2&t){var i=O.xc(3),n=O.ic(2);O.Cb(1),O.oc("ngIf",1===n.typeId)("ngIfElse",i)}}function st(t,e){if(1&t&&(O.Tb(0),O.Vb(1,"td",50),O.Ic(2),O.Ub(),O.Sb()),2&t){var i=O.ic(2);O.Cb(2),O.Kc("",i.YTD," %")}}function dt(t,e){if(1&t&&(O.Vb(0,"td",50),O.Ic(1),O.Ub()),2&t){var i=O.ic(2);O.Cb(1),O.Jc(i.YTD)}}function ut(t,e){if(1&t&&(O.Tb(0),O.Ic(1),O.Sb()),2&t){var i=O.ic().$implicit;O.Cb(1),O.Kc(" ",i," % ")}}function bt(t,e){if(1&t&&O.Ic(0),2&t){var i=O.ic().$implicit;O.Kc(" ",i," ")}}function ht(t,e){if(1&t&&(O.Vb(0,"td",50),O.Gc(1,ut,2,1,"ng-container",51),O.Gc(2,bt,1,1,"ng-template",null,52,O.Hc),O.Ub()),2&t){var i=O.xc(3),n=O.ic(2);O.Cb(1),O.oc("ngIf",1===n.typeId)("ngIfElse",i)}}function pt(t,e){if(1&t&&(O.Tb(0),O.Vb(1,"td",50),O.Ic(2),O.Ub(),O.Sb()),2&t){var i=O.ic(2);O.Cb(2),O.Kc("",i.targetYTD," %")}}function ft(t,e){if(1&t&&(O.Vb(0,"td",50),O.Ic(1),O.Ub()),2&t){var i=O.ic(2);O.Cb(1),O.Jc(i.targetYTD)}}function gt(t,e){1&t&&(O.Vb(0,"ejs-tooltip",73),O.jc(1,"translate"),O.Vb(2,"span",74),O.Ic(3),O.jc(4,"translate"),O.Ub(),O.Ub()),2&t&&(O.oc("content",O.kc(1,2,"meetingMonth")),O.Cb(3),O.Kc(" ",O.kc(4,4,"meetingMonth")," "))}function mt(t,e){1&t&&(O.Vb(0,"ejs-tooltip",73),O.jc(1,"translate"),O.Vb(2,"span",74),O.Ic(3),O.jc(4,"translate"),O.Ub(),O.Ub()),2&t&&(O.oc("content",O.kc(1,2,"meetingP")),O.Cb(3),O.Kc(" ",O.kc(4,4,"meetingP")," "))}function vt(t,e){1&t&&(O.Vb(0,"ejs-tooltip",73),O.jc(1,"translate"),O.Vb(2,"span",74),O.Ic(3),O.jc(4,"translate"),O.Ub(),O.Ub()),2&t&&(O.oc("content",O.kc(1,2,"meetingTarget")),O.Cb(3),O.Kc(" ",O.kc(4,4,"meetingTarget")," "))}function yt(t,e){1&t&&(O.Vb(0,"ejs-tooltip",73),O.jc(1,"translate"),O.Vb(2,"span",74),O.Ic(3),O.jc(4,"translate"),O.Ub(),O.Ub()),2&t&&(O.oc("content",O.kc(1,2,"meetingDeadline")),O.Cb(3),O.Kc(" ",O.kc(4,4,"meetingDeadline")," "))}function It(t,e){1&t&&(O.Vb(0,"ejs-tooltip",73),O.jc(1,"translate"),O.Vb(2,"span",74),O.Ic(3),O.jc(4,"translate"),O.Ub(),O.Ub()),2&t&&(O.oc("content",O.kc(1,2,"meetingD")),O.Cb(3),O.Kc(" ",O.kc(4,4,"meetingD")," "))}function St(t,e){1&t&&(O.Vb(0,"ejs-tooltip",73),O.jc(1,"translate"),O.Vb(2,"span",74),O.Ic(3),O.jc(4,"translate"),O.Ub(),O.Ub()),2&t&&(O.oc("content",O.kc(1,2,"meetingAtri")),O.Cb(3),O.Kc(" ",O.kc(4,4,"meetingAtri")," "))}function Ut(t,e){1&t&&(O.Vb(0,"ejs-tooltip",73),O.jc(1,"translate"),O.Vb(2,"span",74),O.Ic(3),O.jc(4,"translate"),O.Ub(),O.Ub()),2&t&&(O.oc("content",O.kc(1,2,"meetingStatus")),O.Cb(3),O.Kc(" ",O.kc(4,4,"meetingStatus")," "))}function Ct(t,e){1&t&&(O.Vb(0,"ejs-tooltip",73),O.jc(1,"translate"),O.Vb(2,"span",74),O.Ic(3),O.jc(4,"translate"),O.Ub(),O.Ub()),2&t&&(O.oc("content",O.kc(1,2,"meetingC")),O.Cb(3),O.Kc(" ",O.kc(4,4,"meetingC")," "))}function Vt(t,e){1&t&&(O.Vb(0,"ejs-tooltip",73),O.jc(1,"translate"),O.Vb(2,"span",74),O.Ic(3),O.jc(4,"translate"),O.Ub(),O.Ub()),2&t&&(O.oc("content",O.kc(1,2,"meetingA")),O.Cb(3),O.Kc(" ",O.kc(4,4,"meetingA")," "))}function kt(t,e){1&t&&(O.Vb(0,"ejs-tooltip",73),O.jc(1,"translate"),O.Vb(2,"span",74),O.Ic(3),O.jc(4,"translate"),O.Ub(),O.Ub()),2&t&&(O.oc("content",O.kc(1,2,"meetingTarget")),O.Cb(3),O.Kc(" ",O.kc(4,4,"meetingTarget")," "))}function Tt(t,e){1&t&&(O.Vb(0,"ejs-tooltip",73),O.jc(1,"translate"),O.Vb(2,"span",74),O.Ic(3),O.jc(4,"translate"),O.Ub(),O.Ub()),2&t&&(O.oc("content",O.kc(1,2,"meetingDeadline")),O.Cb(3),O.Kc(" ",O.kc(4,4,"meetingDeadline")," "))}function xt(t,e){1&t&&(O.Vb(0,"ejs-tooltip",73),O.jc(1,"translate"),O.Vb(2,"span",74),O.Ic(3),O.jc(4,"translate"),O.Ub(),O.Ub()),2&t&&(O.oc("content",O.kc(1,2,"meetingAt")),O.Cb(3),O.Kc(" ",O.kc(4,4,"meetingAt")," "))}function wt(t,e){if(1&t&&(O.Vb(0,"th",82),O.Ic(1),O.Ub()),2&t){var i=O.ic(2).$implicit;O.Db("rowspan",i.currentMonthData.length),O.Cb(1),O.Jc(i.month)}}function Mt(t,e){if(1&t&&(O.Tb(0),O.Vb(1,"p",84),O.Ic(2),O.Ub(),O.Sb()),2&t){var i=O.ic().$implicit;O.Cb(2),O.Jc(i.content)}}function Dt(t,e){if(1&t&&(O.Vb(0,"p",84),O.Ic(1),O.Ub(),O.Qb(2,"hr")),2&t){var i=O.ic().$implicit;O.Cb(1),O.Jc(i.content)}}function At(t,e){if(1&t&&(O.Vb(0,"span"),O.Gc(1,Mt,3,1,"ng-container",51),O.Gc(2,Dt,3,1,"ng-template",null,52,O.Hc),O.Ub()),2&t){var i=e.index,n=O.xc(3),o=O.ic(3).$implicit;O.Cb(1),O.oc("ngIf",o.nextMonthData.lastIndex===i)("ngIfElse",n)}}function Ot(t,e){if(1&t&&(O.Vb(0,"td",83),O.Gc(1,At,4,2,"span",75),O.Ub()),2&t){var i=O.ic(2).$implicit;O.Db("rowspan",i.currentMonthData.length),O.Cb(1),O.oc("ngForOf",i.nextMonthData)}}function Pt(t,e){if(1&t&&(O.Tb(0),O.Vb(1,"p",86),O.Ic(2),O.Ub(),O.Sb()),2&t){var i=O.ic().$implicit;O.Cb(2),O.Jc(i.target)}}function jt(t,e){if(1&t&&(O.Vb(0,"p",86),O.Ic(1),O.Ub(),O.Qb(2,"hr")),2&t){var i=O.ic().$implicit;O.Cb(1),O.Jc(i.target)}}function Lt(t,e){if(1&t&&(O.Vb(0,"span"),O.Gc(1,Pt,3,1,"ng-container",51),O.Gc(2,jt,3,1,"ng-template",null,52,O.Hc),O.Ub()),2&t){var i=e.index,n=O.xc(3),o=O.ic(3).$implicit;O.Cb(1),O.oc("ngIf",o.nextMonthData.lastIndex===i)("ngIfElse",n)}}function Gt(t,e){if(1&t&&(O.Vb(0,"td",85),O.Gc(1,Lt,4,2,"span",75),O.Ub()),2&t){var i=O.ic(2).$implicit;O.Db("rowspan",i.currentMonthData.length),O.Cb(1),O.oc("ngForOf",i.nextMonthData)}}function Ft(t,e){if(1&t&&(O.Tb(0),O.Vb(1,"p",86),O.Ic(2),O.Ub(),O.Sb()),2&t){var i=O.ic().$implicit;O.Cb(2),O.Jc(i.deadline)}}function Rt(t,e){if(1&t&&(O.Vb(0,"p",86),O.Ic(1),O.Ub(),O.Qb(2,"hr")),2&t){var i=O.ic().$implicit;O.Cb(1),O.Jc(i.deadline)}}function Et(t,e){if(1&t&&(O.Vb(0,"span"),O.Gc(1,Ft,3,1,"ng-container",51),O.Gc(2,Rt,3,1,"ng-template",null,52,O.Hc),O.Ub()),2&t){var i=e.index,n=O.xc(3),o=O.ic(3).$implicit;O.Cb(1),O.oc("ngIf",o.nextMonthData.lastIndex===i)("ngIfElse",n)}}function Bt(t,e){if(1&t&&(O.Vb(0,"td",87),O.Gc(1,Et,4,2,"span",75),O.Ub()),2&t){var i=O.ic(2).$implicit;O.Db("rowspan",i.currentMonthData.length),O.Cb(1),O.oc("ngForOf",i.nextMonthData)}}function Nt(t,e){if(1&t){var i=O.Wb();O.Vb(0,"td",82),O.Vb(1,"div",88),O.Vb(2,"button",31),O.fc("click",function(){O.Ac(i);var t=O.ic(2).$implicit,e=O.ic(2),n=O.xc(55);return e.download(t.date,n)}),O.Qb(3,"i",89),O.Ub(),O.Ub(),O.Ub()}if(2&t){var n=O.ic(2).$implicit;O.Db("rowspan",n.currentMonthData.length)}}function _t(t,e){if(1&t&&(O.Vb(0,"tr"),O.Gc(1,wt,2,2,"th",76),O.Vb(2,"td",77),O.Ic(3),O.Ub(),O.Vb(4,"td",78),O.Ic(5),O.Ub(),O.Vb(6,"td",78),O.Ic(7),O.Ub(),O.Vb(8,"td",77),O.Ic(9),O.Ub(),O.Vb(10,"td",78),O.Ic(11),O.Ub(),O.Vb(12,"td",78),O.Ic(13),O.jc(14,"translate"),O.Ub(),O.Vb(15,"td",77),O.Ic(16),O.Ub(),O.Gc(17,Ot,2,2,"td",79),O.Gc(18,Gt,2,2,"td",80),O.Gc(19,Bt,2,2,"td",81),O.Gc(20,Nt,4,1,"td",76),O.Ub()),2&t){var i=e.$implicit,n=e.index;O.Cb(1),O.oc("ngIf",0==n),O.Cb(2),O.Jc(i.content),O.Cb(2),O.Jc(i.target),O.Cb(2),O.Jc(i.deadline),O.Cb(2),O.Kc(" ",i.doContent," "),O.Cb(2),O.Kc(" ",i.achievement," "),O.Cb(2),O.Kc(" ",O.kc(14,12,i.statusName)," "),O.Cb(3),O.Kc(" ",i.resultContent," "),O.Cb(1),O.oc("ngIf",0==n),O.Cb(1),O.oc("ngIf",0==n),O.Cb(1),O.oc("ngIf",0==n),O.Cb(1),O.oc("ngIf",0==n)}}function Kt(t,e){1&t&&O.Gc(0,_t,21,14,"tr",75),2&t&&O.oc("ngForOf",e.$implicit.currentMonthData)}function Ht(t,e){if(1&t){var i=O.Wb();O.Qb(0,"a",null,33),O.Vb(2,"div",34),O.Vb(3,"h4",35),O.Qb(4,"i",36),O.Ic(5," Monthly Review Meeting "),O.Ub(),O.Vb(6,"button",37),O.fc("click",function(){return e.$implicit.dismiss("Cross click")}),O.Vb(7,"span",38),O.Ic(8,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(9,"div",39),O.Vb(10,"div",5),O.Vb(11,"div",40),O.Vb(12,"div",0),O.Vb(13,"div",41),O.Ic(14),O.Ub(),O.Vb(15,"div",42),O.Ic(16),O.Ub(),O.Ub(),O.Qb(17,"hr"),O.Vb(18,"div",0),O.Vb(19,"div",41),O.Ic(20),O.Ub(),O.Vb(21,"div",42),O.Ic(22),O.Ub(),O.Ub(),O.Ub(),O.Qb(23,"div",40),O.Ub(),O.Vb(24,"div",0),O.Vb(25,"div",1),O.Vb(26,"div",43),O.Qb(27,"canvas",44),O.Ub(),O.Ub(),O.Ub(),O.Vb(28,"div",0),O.Vb(29,"div",1),O.Vb(30,"div",45),O.Vb(31,"div",46),O.Vb(32,"table",47),O.Vb(33,"tbody"),O.Vb(34,"tr"),O.Vb(35,"th",48),O.Ic(36),O.jc(37,"translate"),O.Ub(),O.Gc(38,ct,2,1,"th",49),O.Vb(39,"th",50),O.Ic(40,"YTD"),O.Ub(),O.Ub(),O.Vb(41,"tr"),O.Vb(42,"th",48),O.Ic(43),O.jc(44,"translate"),O.Ub(),O.Gc(45,lt,4,2,"td",49),O.Gc(46,st,3,1,"ng-container",51),O.Gc(47,dt,2,1,"ng-template",null,52,O.Hc),O.Ub(),O.Vb(49,"tr"),O.Vb(50,"th",48),O.Ic(51),O.jc(52,"translate"),O.Ub(),O.Gc(53,ht,4,2,"td",49),O.Gc(54,pt,3,1,"ng-container",51),O.Gc(55,ft,2,1,"ng-template",null,52,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(57,"div",0),O.Vb(58,"div",1),O.Vb(59,"ejs-grid",53,54),O.fc("queryCellInfo",function(t){return O.Ac(i),O.ic().queryCellInfoEvent(t)})("headerCellInfo",function(t){return O.Ac(i),O.ic().headerCellInfo(t)}),O.Vb(61,"e-columns"),O.Vb(62,"e-column",55),O.Gc(63,gt,5,6,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(65,"e-column",56),O.Gc(66,mt,5,6,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(68,"e-column",57),O.Gc(69,vt,5,6,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(71,"e-column",58),O.Gc(72,yt,5,6,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(74,"e-column",59),O.Gc(75,It,5,6,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(77,"e-column",60),O.Gc(78,St,5,6,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(80,"e-column",61),O.Gc(81,Ut,5,6,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(83,"e-column",62),O.Gc(84,Ct,5,6,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(86,"e-column",63),O.Gc(87,Vt,5,6,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(89,"e-column",64),O.Gc(90,kt,5,6,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(92,"e-column",65),O.Gc(93,Tt,5,6,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(95,"e-column",66),O.Gc(96,xt,5,6,"ng-template",null,20,O.Hc),O.Ub(),O.Ub(),O.Gc(98,Kt,1,1,"ng-template",null,67,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(100,"div",68),O.Vb(101,"button",69),O.fc("click",function(){return e.$implicit.close("Close click")}),O.Ic(102,"Close"),O.Ub(),O.Vb(103,"span",70),O.Ic(104,"| |"),O.Ub(),O.Vb(105,"a",71),O.fc("click",function(){O.Ac(i);var t=O.xc(1);return O.ic().scroll(t)}),O.Qb(106,"i",72),O.Ub(),O.Ub()}if(2&t){var n=O.xc(48),o=O.ic();O.Cb(14),O.Kc("Policy: ",o.policyTitle,""),O.Cb(2),O.Kc("Level: ",o.levelTitle,""),O.Cb(4),O.Kc("KPI: ",o.kpiTitle,""),O.Cb(2),O.Kc("PIC: ",o.picTitle,""),O.Cb(14),O.Jc(O.kc(37,20,"meetingMonth")),O.Cb(2),O.oc("ngForOf",o.labels),O.Cb(5),O.Kc("",O.kc(44,22,"meetingTarget")," "),O.Cb(2),O.oc("ngForOf",o.targets),O.Cb(1),O.oc("ngIf",1===o.typeId)("ngIfElse",n),O.Cb(5),O.Kc("",O.kc(52,24,"meetingPer")," "),O.Cb(2),O.oc("ngForOf",o.perfomance),O.Cb(1),O.oc("ngIf",1===o.typeId)("ngIfElse",n),O.Cb(5),O.oc("dataSource",o.dataTable)("allowResizing",!0)("showColumnMenu",!0)("allowExcelExport",!0)("editSettings",o.editSettings)("pageSettings",o.pageSettings)}}function Jt(t,e){if(1&t&&(O.Vb(0,"li",93),O.Vb(1,"a",94),O.Ic(2),O.Ub(),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.oc("id",i.path)("href",i.path,O.Cc),O.Cb(1),O.Jc(i.name)}}function zt(t,e){if(1&t&&(O.Tb(0),O.Vb(1,"ul",91),O.Gc(2,Jt,3,3,"li",92),O.Ub(),O.Sb()),2&t){var i=O.ic(2);O.Cb(2),O.oc("ngForOf",i.files)}}function Qt(t,e){1&t&&(O.Vb(0,"span"),O.Ic(1,"No data"),O.Ub())}function $t(t,e){if(1&t){var i=O.Wb();O.Qb(0,"a",null,33),O.Vb(2,"div",34),O.Vb(3,"h4",35),O.Qb(4,"i",36),O.Ic(5," Download File "),O.Ub(),O.Vb(6,"button",37),O.fc("click",function(){return e.$implicit.dismiss("Cross click")}),O.Vb(7,"span",38),O.Ic(8,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(9,"div",39),O.Vb(10,"div",90),O.Gc(11,zt,3,1,"ng-container",51),O.Gc(12,Qt,2,0,"ng-template",null,52,O.Hc),O.Ub(),O.Ub(),O.Vb(14,"div",68),O.Vb(15,"button",69),O.fc("click",function(){return e.$implicit.close("Close click")}),O.Ic(16,"Close"),O.Ub(),O.Vb(17,"span",70),O.Ic(18,"| |"),O.Ub(),O.Vb(19,"a",71),O.fc("click",function(){O.Ac(i);var t=O.xc(1);return O.ic().scroll(t)}),O.Qb(20,"i",72),O.Ub(),O.Ub()}if(2&t){var n=O.xc(13),o=O.ic();O.Cb(11),O.oc("ngIf",o.files.length>0)("ngIfElse",n)}}var Yt,qt,Wt=((Yt=function(i){e(c,i);var o=n(c);function c(t,e,i,n,a,r,l,d,u,b){var h;return s(this,c),(h=o.call(this)).service=t,h.accountGroupService=e,h.modalService=i,h.ocService=n,h.datePipe=a,h.ocPolicyService=r,h.meetingService=l,h.alertify=d,h.todolist2Service=u,h.route=b,h.data=[],h.password="",h.fields={text:"name",value:"id"},h.leaderFields={text:"fullName",value:"id"},h.managerFields={text:"fullName",value:"id"},h.passwordFake="aRlG8BBHDYjrood3UqjzRl3FubHFI99nEPCahGtZl9jvkexwlJ",h.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},h.locale=localStorage.getItem("lang"),h.leaders=[],h.managers=[],h.unit=null,h.period=null,h.plugins=[j],h.options={responsive:!0,maintainAspectRatio:!1,showScale:!1,plugins:{datalabels:{backgroundColor:function(t){return t.dataset.backgroundColor},borderRadius:4,color:"white",font:{weight:"bold"},formatter:function(t,e){return t}}},title:{display:!0,text:"",fontSize:14,fontColor:"black"},elements:{point:{radius:0},line:{tension:.2}},scales:{yAxes:[{stacked:!0,display:!0,position:"left",ticks:{beginAtZero:!0,padding:10,fontSize:12,stepSize:10,min:-5},scaleLabel:{display:!0,labelString:h.unit,fontSize:12,fontStyle:"normal"}}],xAxes:[{gridLines:{display:!0,tickMarkLength:8},ticks:{fontSize:12},scaleLabel:{display:!0,labelString:h.period,fontSize:12,fontStyle:"normal"}}]}},h.pointBackgroundColors=[],h.chart={},h.levelFields={text:"name",value:"id"},h.picFields={text:"name",value:"id"},h.levelId=0,h.factId=0,h.centerId=0,h.deptId=0,h.picId=0,h.files=[],h.base=A.a.apiUrl.replace("/api/",""),h.queryCellInfoEvent=function(t){var e=t.data;h.dataTable.filter(function(t,e,i){return i.indexOf(i.find(function(e){return e.actionId===t.actionId}))===e}),["month","cContent"].includes(t.column.field)&&(t.rowSpan=h.dataTable.filter(function(t){return t.month===e.month&&t.cContent===e.cContent}).length)},h}return u(c,[{key:"ngOnInit",value:function(){this.getAllOcLv3(),this.getAllKpi(),this.currentTime=new Date}},{key:"ngAfterViewInit",value:function(){}},{key:"filterFact",value:function(t){var e=this;this.factId=t.value,0===this.factId&&0===this.centerId&&0===this.deptId&&0===this.levelId&&(this.policyData=this.policyDataTamp),this.factId>0&&0===this.centerId&&0===this.deptId&&0===this.levelId&&(this.policyData=this.policyDataTamp.filter(function(t){return t.factId==e.factId})),this.factId>0&&this.centerId>0&&0===this.deptId&&0===this.levelId&&(this.policyData=this.policyDataTamp.filter(function(t){return t.factId==e.factId&&t.centerId==e.centerId})),this.factId>0&&this.centerId>0&&this.deptId>0&&0===this.levelId&&(this.policyData=this.policyDataTamp.filter(function(t){return t.factId==e.factId&&t.centerId==e.centerId&&t.deptId==e.deptId})),this.factId>0&&this.centerId>0&&this.deptId>0&&this.levelId>0&&(this.policyData=this.policyDataTamp.filter(function(t){return t.factId==e.factId&&t.centerId==e.centerId&&t.deptId==e.deptId&&t.level==e.levelId}))}},{key:"filterCenter",value:function(t){var e=this;this.centerId=t.value,0===this.centerId&&0===this.factId&&0===this.deptId&&0===this.levelId&&(this.policyData=this.policyDataTamp),this.centerId>0&&0===this.factId&&0===this.deptId&&0===this.levelId&&(this.policyData=this.policyDataTamp.filter(function(t){return t.centerId==e.centerId})),this.centerId>0&&this.factId>0&&0===this.deptId&&0===this.levelId&&(this.policyData=this.policyDataTamp.filter(function(t){return t.factId==e.factId&&t.centerId==e.centerId})),this.factId>0&&this.centerId>0&&this.deptId>0&&0===this.levelId&&(this.policyData=this.policyDataTamp.filter(function(t){return t.factId==e.factId&&t.centerId==e.centerId&&t.deptId==e.deptId})),this.factId>0&&this.centerId>0&&this.deptId>0&&this.levelId>0&&(this.policyData=this.policyDataTamp.filter(function(t){return t.factId==e.factId&&t.centerId==e.centerId&&t.deptId==e.deptId&&t.level==e.levelId}))}},{key:"filterDept",value:function(t){var e=this;this.deptId=t.value,0===this.deptId&&0===this.factId&&0===this.centerId&&0===this.levelId&&(this.policyData=this.policyDataTamp),this.deptId>0&&0===this.factId&&0===this.centerId&&0===this.levelId&&(this.policyData=this.policyDataTamp.filter(function(t){return t.deptId==e.deptId})),this.deptId>0&&this.factId>0&&0===this.centerId&&0===this.levelId&&(this.policyData=this.policyDataTamp.filter(function(t){return t.factId==e.factId&&t.deptId==e.deptId})),this.deptId>0&&this.centerId>0&&this.factId>0&&0===this.levelId&&(this.policyData=this.policyDataTamp.filter(function(t){return t.factId==e.factId&&t.centerId==e.centerId&&t.deptId==e.deptId})),this.factId>0&&this.centerId>0&&this.deptId>0&&this.levelId>0&&(this.policyData=this.policyDataTamp.filter(function(t){return t.factId==e.factId&&t.centerId==e.centerId&&t.deptId==e.deptId&&t.level==e.levelId}))}},{key:"filterlevel",value:function(t){var e=this;this.levelId=t.value,0===this.levelId&&0===this.factId&&0===this.centerId&&0===this.deptId&&(this.policyData=this.policyDataTamp),this.levelId>0&&0===this.factId&&0===this.centerId&&0===this.deptId&&(this.policyData=this.policyDataTamp.filter(function(t){return t.level==e.levelId})),this.levelId>0&&this.factId>0&&0===this.deptId&&0===this.centerId&&(this.policyData=this.policyDataTamp.filter(function(t){return t.factId==e.factId&&t.level==e.levelId})),this.levelId>0&&this.factId>0&&this.centerId>0&&0===this.deptId&&(this.policyData=this.policyDataTamp.filter(function(t){return t.factId==e.factId&&t.centerId==e.centerId&&t.level==e.levelId})),this.factId>0&&this.centerId>0&&this.deptId>0&&this.levelId>0&&(this.policyData=this.policyDataTamp.filter(function(t){return t.factId==e.factId&&t.centerId==e.centerId&&t.deptId==e.deptId&&t.level==e.levelId}))}},{key:"filterPic",value:function(t){var e=this;this.picId=t.value,0===this.levelId&&0===this.picId&&(this.policyData=this.policyDataTamp),this.levelId>0&&0===this.picId&&(this.policyData=this.policyDataTamp.filter(function(t){return t.level==e.levelId})),this.levelId>0&&this.picId>0&&(this.policyData=this.policyDataTamp.filter(function(t){return t.level==e.levelId&&t.picId==e.picId})),0===this.levelId&&this.picId>0&&(this.policyData=this.policyDataTamp.filter(function(t){return t.picId==e.picId}))}},{key:"scroll",value:function(t){t.scrollIntoView()}},{key:"openModal",value:function(t,e){var i=this;this.policyTitle=t.policyName,this.kpiTitle=t.name,this.levelTitle=t.level,this.picTitle=t.picName,this.unitId=t.typeId,this.unitName=t.typeName,this.kpiId=t.id,this.loadDataModel2(t.id),this.modalRef=this.modalService.open(e,{size:"lg",backdrop:"static"}),this.modalRef.result.then(function(t){i.perfomance=[],i.targets=[],i.labels=[],i.dataTable=[]},function(t){i.perfomance=[],i.targets=[],i.labels=[],i.dataTable=[]})}},{key:"createChart",value:function(t,e,i){var n=document.getElementById(t),o=new L(n,{type:"line",data:{labels:e,datasets:[{label:"This month perfomance",backgroundColor:"#008cff",borderColor:"#008cff",fill:!1,data:this.perfomance},{label:"This month targets",data:this.targets,backgroundColor:"#ff8c00",borderColor:"#ff8c00",fill:!1}]},options:{plugins:{datalabels:{backgroundColor:function(t){return t.dataset.backgroundColor},borderRadius:4,color:"white",font:{weight:"bold"},formatter:function(t,e){return t}}},scales:{yAxes:[{display:!0,stacked:!1,position:"left",ticks:{beginAtZero:!0,padding:10,fontSize:12,stepSize:10,min:-5},scaleLabel:{display:!0,fontSize:12,fontStyle:"normal"}}],xAxes:[{gridLines:{display:!0,tickMarkLength:8},ticks:{fontSize:12},scaleLabel:{display:!0,fontSize:12,fontStyle:"normal"}}]},title:{display:!0,text:this.options.title.text,fontSize:14,fontColor:"black"},elements:{point:{radius:0},line:{tension:.2}}}});this.chart=o}},{key:"loadDataModel",value:function(t){}},{key:"download",value:function(t,e){var i=this;this.modalRef=this.modalService.open(e,{size:"sm",backdrop:"static"}),console.log(this.kpiId),console.log(t),this.todolist2Service.getDownloadFilesMeeting(this.kpiId,t).subscribe(function(t){console.log(t),i.files=(t||[]).map(function(t){return{name:t.name,path:i.base+t.path}})})}},{key:"headerCellInfo",value:function(t){"CustomerID"===t.cell.column.field&&new B.c({content:t.cell.column.headerText}).appendTo(t.node)}},{key:"loadDataModel2",value:function(t){var e=this;this.meetingService.getChartWithTime(t,this.datePipe.transform(this.currentTime,"YYYY-MM-dd HH:mm")).subscribe(function(t){console.log(t),e.typeId=t.typeId,e.YTD=t.ytd,e.targetYTD=t.targetYTD,e.perfomance=t.perfomances,e.targets=t.targets,e.labels=t.labels,e.dataTable=t.dataTable.filter(function(t){return t.currentMonthData.length>0}),console.log(e.dataTable),e.createChart("planet-chart",e.labels,e.unitName)})}},{key:"getAllKpi",value:function(){var e=this;this.meetingService.getAllKpi().subscribe(function(i){console.log(i),e.policyData=i,e.policyDataTamp=i;var n=i.map(function(t){return{id:t.level,name:"Level "+t.level}});e.dataLevel=n.filter(function(t,e,i){return i.indexOf(i.find(function(e){return e.id===t.id}))===e});var o=i.map(function(t){return{id:t.picId,name:t.picName}});e.dataPic=t(new Map(o.map(function(t){return[t[t.id],t]})).values()),e.dataPic=o.filter(function(t,e,i){return i.indexOf(i.find(function(e){return e.id===t.id}))===e});var c=i.map(function(t){return{id:t.factId,name:t.factName}});e.dataFact=t(new Map(c.map(function(t){return[t[t.id],t]})).values()),e.dataFact=c.filter(function(t,e,i){return i.indexOf(i.find(function(e){return e.id===t.id}))===e});var a=i.map(function(t){return{id:t.centerId,name:t.centerName}});e.dataCenter=t(new Map(a.map(function(t){return[t[t.id],t]})).values()),e.dataCenter=a.filter(function(t,e,i){return i.indexOf(i.find(function(e){return e.id===t.id}))===e});var r=i.map(function(t){return{id:t.deptId,name:t.deptName}});e.dataDept=t(new Map(r.map(function(t){return[t[t.id],t]})).values()),e.dataDept=r.filter(function(t,e,i){return i.indexOf(i.find(function(e){return e.id===t.id}))===e}),e.dataLevel.unshift({name:"All",id:0}),e.dataPic.unshift({name:"All",id:0})})}},{key:"getAllPolicy",value:function(){var t=this;this.ocPolicyService.getAllPolicy().subscribe(function(e){t.policyData=e})}},{key:"getAllOcLv3",value:function(){var t=this;this.ocService.getAllLv3().subscribe(function(e){t.oclv3Data=e})}},{key:"createdManager",value:function(t,e){this.managers=this.accounts,this.managers=this.managers.filter(function(t){return t.id!==e.id})}},{key:"createdLeader",value:function(t,e){this.leaders=this.accounts.filter(function(t){return t.isLeader}),this.leaders=this.leaders.filter(function(t){return t.id!==e.id})}},{key:"onDoubleClick",value:function(t){this.setFocus=t.column}},{key:"initialModel",value:function(){this.accountGroupItem=[]}},{key:"updateModel",value:function(t){this.accountGroupItem=t.factory}},{key:"actionBegin",value:function(t){if("add"===t.requestType&&this.initialModel(),"beginEdit"===t.requestType&&this.updateModel(t.rowData),"save"===t.requestType&&"add"===t.action){var e={Name:t.data.name,OcIdList:this.accountGroupItem};if(void 0===t.data.name)return this.alertify.error("Please key in policy name! <br> Vui l\xf2ng nh\u1eadp Policy!"),void(t.cancel=!0);this.create(e)}"save"===t.requestType&&"edit"===t.action&&this.update({ID:t.data.id,Name:t.data.name,OcIdList:this.accountGroupItem}),"delete"===t.requestType&&this.delete(t.data[0].id)}},{key:"deleteOption",value:function(t){var e=this;this.ocPolicyService.deletePolicy(t).subscribe(function(t){t?(e.alertify.success(T.a.CREATED_OK_MSG),e.getAllPolicy(),e.accountGroupItem=[]):e.alertify.warning(T.a.SYSTEM_ERROR_MSG)})}},{key:"toolbarClick",value:function(t){switch(t.item.id){case"grid_excelexport":this.grid.excelExport({hierarchyExportMode:"All"})}}},{key:"actionComplete",value:function(t){"add"===t.requestType&&t.form.elements.namedItem("name").focus()}},{key:"lock",value:function(t){var e=this;this.service.lock(t).subscribe(function(t){!0===t.success?(e.alertify.success(t.message),e.loadData()):e.alertify.warning(T.a.SYSTEM_ERROR_MSG)},function(t){return e.alertify.warning(T.a.SYSTEM_ERROR_MSG)})}},{key:"loadData",value:function(){var t=this;this.service.getAll().subscribe(function(e){t.data=e})}},{key:"getAccounts",value:function(){var t=this;this.service.getAccounts().subscribe(function(e){t.accounts=e,t.leaders=e.filter(function(t){return t.isLeader}),t.managers=e})}},{key:"loadAccountGroupData",value:function(){var t=this;this.accountGroupService.getAll().subscribe(function(e){t.accountGroupData=e})}},{key:"delete",value:function(t){var e=this;this.ocPolicyService.deletePolicy(t).subscribe(function(t){t?(e.alertify.success(T.a.CREATED_OK_MSG),e.getAllPolicy(),e.accountGroupItem=[]):e.alertify.warning(T.a.SYSTEM_ERROR_MSG)})}},{key:"create",value:function(t){var e=this;this.ocPolicyService.addPolicy(t).subscribe(function(t){t?(e.alertify.success(T.a.CREATED_OK_MSG),e.getAllPolicy(),e.accountGroupItem=[]):e.alertify.warning(T.a.SYSTEM_ERROR_MSG)})}},{key:"update",value:function(t){var e=this;this.ocPolicyService.updatePolicy(t).subscribe(function(t){t?(e.alertify.success(T.a.CREATED_OK_MSG),e.getAllPolicy(),e.accountGroupItem=[]):e.alertify.warning(T.a.SYSTEM_ERROR_MSG)})}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}}]),c}(C.a)).\u0275fac=function(t){return new(t||Yt)(O.Pb(k.a),O.Pb(x.a),O.Pb(N.b),O.Pb(w.a),O.Pb(b.e),O.Pb(U.a),O.Pb(P),O.Pb(V.a),O.Pb(E),O.Pb(_.a))},Yt.\u0275cmp=O.Jb({type:Yt,selectors:[["app-meeting"]],viewQuery:function(t,e){var i;1&t&&(O.Mc(z,1),O.Mc(Q,1),O.Mc(Y,1),O.Mc(q,1),O.Mc(W,3)),2&t&&(O.wc(i=O.gc())&&(e.grid=i.first),O.wc(i=O.gc())&&(e.detailModal=i.first),O.wc(i=O.gc())&&(e.fileModal=i.first),O.wc(i=O.gc())&&(e.grid2=i.first),O.wc(i=O.gc())&&(e.elementView=i.first))},features:[O.Bb([b.e]),O.zb],decls:56,vars:37,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body","table-responsive","p-0"],[1,"row","my-3"],[1,"row","mb-2"],[1,"col-md-12","d-flex","justify-content-center","align-items-center"],[1,"font-weight-bold","px-3"],["placeholder","Select a Factory",3,"dataSource","fields","allowFiltering","ngModel","change","ngModelChange"],[1,"font-weight-bold","pr-3"],["placeholder","Select a Center",3,"dataSource","fields","allowFiltering","ngModel","change","ngModelChange"],["placeholder","Select a Dept.",3,"dataSource","fields","allowFiltering","ngModel","change","ngModelChange"],["placeholder","Select a Level",3,"dataSource","fields","allowFiltering","ngModel","change","ngModelChange"],[1,"col-md-3","d-flex","justify-content-center"],[1,"form-group"],["for","exampleInputEmail1"],[2,"width","100%",3,"ngModel","ngModelChange"],["id","grid","gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","locale","pageSettings","allowExcelExport","editSettings","actionBegin","actionComplete","recordDoubleClick"],["grid",""],["field","level","textAlign","Center","width","80","isPrimaryKey","true","headerText","Level"],["headerTemplate",""],["field","name","textAlign","Center","headerText","KPI Name"],["field","centerName","textAlign","Center","headerText","Center"],["field","deptName","textAlign","Center","headerText","Dept."],["field","picName","headerText","PIC","width","200","textAlign","Center"],["field","option","width","100","textAlign","Center","headerText","PDCA"],["template",""],["editTemplate",""],["detailModal",""],["fileModal",""],[1,"btn-group"],["type","button",1,"btn","btn-xs","btn-primary",3,"click"],[1,"fa","fa-eye"],["top",""],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-6"],[1,"col-md-7"],[1,"col-md-5"],[1,"chart"],["id","planet-chart"],[1,"box-body"],[1,"table-responsive"],["id","tblDataChart",1,"table","table-bordered",2,"margin-bottom","20px"],["width","5%",1,"text-center"],["class","text-center",4,"ngFor","ngForOf"],[1,"text-center"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["id","grid","gridLines","Both","isPrimaryKey","true",3,"dataSource","allowResizing","showColumnMenu","allowExcelExport","editSettings","pageSettings","queryCellInfo","headerCellInfo"],["gridDataTable",""],["field","month","textAlign","Center","width","30px","headerText","\u5167\u5bb9"],["field","","textAlign","Center","width","210px","headerText","P"],["field","target","textAlign","Center","width","50px","headerText","Target"],["field","deadline","textAlign","Center","width","50px","headerText","Deadline"],["field","doContent","textAlign","Center","width","210px","headerText","D"],["field","achievement","textAlign","Center","width","50px","headerText","Achievement"],["field","statusName","textAlign","Center","width","80px","headerText","Status"],["field","content","textAlign","Center","width","210px","headerText","C"],["field","aContent","textAlign","Center","width","210px","headerText","A"],["field","aTarget","textAlign","Center","width","50px","headerText","Target"],["field","aDeadline","textAlign","Center","width","50px","headerText","Deadline"],["field","","textAlign","Center","width","50px","headerText","Attatchment"],["rowTemplate",""],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],[2,"color","transparent"],[1,"btn","btn-outline-warning",3,"click"],[1,"fas","fa-chevron-up"],[3,"content"],[2,"font-size","14px","font-weight","bold"],[4,"ngFor","ngForOf"],["style","font-size: 14px; ","scope","row","class","border text-center align-middle",4,"ngIf"],[1,"border","align-top",2,"font-size","14px"],[1,"border","text-center",2,"font-size","14px"],["style","font-size: 14px; ","scope","row","class","border align-top ",4,"ngIf"],["style","font-size: 14px; ","scope","row","class","border align-top text-center",4,"ngIf"],["style","font-size: 14px; ","scope","row","class","border text-center align-top",4,"ngIf"],["scope","row",1,"border","text-center","align-middle",2,"font-size","14px"],["scope","row",1,"border","align-top",2,"font-size","14px"],[2,"height","350px","overflow-y","scroll"],["scope","row",1,"border","align-top","text-center",2,"font-size","14px"],[2,"height","350px","padding-top","175px"],["scope","row",1,"border","text-center","align-top",2,"font-size","14px"],[2,"text-align","center"],[1,"fa","fa-download"],[1,"mt-3","d-flex","justify-content-start"],[1,"list-group",2,"width","100%"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[3,"id","href"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"div",1),O.Vb(2,"div",2),O.Vb(3,"div",3),O.Vb(4,"div",4),O.Vb(5,"div",1),O.Vb(6,"div",5),O.Vb(7,"div",6),O.Vb(8,"div",7),O.Ic(9),O.jc(10,"translate"),O.Ub(),O.Vb(11,"ejs-dropdownlist",8),O.fc("change",function(t){return e.filterFact(t)})("ngModelChange",function(t){return e.factId=t}),O.Ub(),O.Vb(12,"div",9),O.Ic(13),O.jc(14,"translate"),O.Ub(),O.Vb(15,"ejs-dropdownlist",10),O.fc("change",function(t){return e.filterCenter(t)})("ngModelChange",function(t){return e.centerId=t}),O.Ub(),O.Vb(16,"div",9),O.Ic(17),O.jc(18,"translate"),O.Ub(),O.Vb(19,"ejs-dropdownlist",11),O.fc("change",function(t){return e.filterDept(t)})("ngModelChange",function(t){return e.deptId=t}),O.Ub(),O.Vb(20,"div",9),O.Ic(21),O.jc(22,"translate"),O.Ub(),O.Vb(23,"ejs-dropdownlist",12),O.fc("change",function(t){return e.filterlevel(t)})("ngModelChange",function(t){return e.levelId=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(24,"div",13),O.Vb(25,"div",14),O.Vb(26,"label",15),O.Ic(27,"Change System Date"),O.Ub(),O.Vb(28,"kendo-datepicker",16),O.fc("ngModelChange",function(t){return e.currentTime=t}),O.Ub(),O.Ub(),O.Ub(),O.Vb(29,"ejs-grid",17,18),O.fc("actionBegin",function(t){return e.actionBegin(t)})("actionComplete",function(t){return e.actionComplete(t)})("recordDoubleClick",function(t){return e.onDoubleClick(t)}),O.Vb(31,"e-columns"),O.Vb(32,"e-column",19),O.Gc(33,X,2,3,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(35,"e-column",21),O.Gc(36,Z,2,3,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(38,"e-column",22),O.Gc(39,tt,2,3,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(41,"e-column",23),O.Gc(42,et,2,3,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(44,"e-column",24),O.Gc(45,it,2,3,"ng-template",null,20,O.Hc),O.Ub(),O.Vb(47,"e-column",25),O.Gc(48,nt,3,0,"ng-template",null,26,O.Hc),O.Gc(50,ot,1,0,"ng-template",null,27,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Gc(52,Ht,107,26,"ng-template",null,28,O.Hc),O.Gc(54,$t,21,2,"ng-template",null,29,O.Hc)),2&t&&(O.Cb(9),O.Kc("",O.kc(10,29,"Factory")," :"),O.Cb(2),O.oc("dataSource",e.dataFact)("fields",e.levelFields)("allowFiltering",!0)("ngModel",e.factId),O.Cb(2),O.Kc("",O.kc(14,31,"Center"),": "),O.Cb(2),O.oc("dataSource",e.dataCenter)("fields",e.levelFields)("allowFiltering",!0)("ngModel",e.centerId),O.Cb(2),O.Kc("",O.kc(18,33,"Dept"),": "),O.Cb(2),O.oc("dataSource",e.dataDept)("fields",e.levelFields)("allowFiltering",!0)("ngModel",e.deptId),O.Cb(2),O.Kc("",O.kc(22,35,"Level"),": "),O.Cb(2),O.oc("dataSource",e.dataLevel)("fields",e.levelFields)("allowFiltering",!0)("ngModel",e.levelId),O.Cb(5),O.oc("ngModel",e.currentTime),O.Cb(1),O.oc("dataSource",e.policyData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("locale",e.locale)("pageSettings",e.pageSettings)("allowExcelExport",!0)("editSettings",e.editSettings))},directives:[m.b,h.f,h.i,f.b,v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c,b.l,b.m,J.b],pipes:[p.c],styles:[".chart-container[_ngcontent-%COMP%]{position:relative;margin:auto;height:48vh;width:auto}canvas[_ngcontent-%COMP%]{height:500px!important}"]}),Yt),Xt=c("K1le"),Zt=c("kjH0"),te=c("6fnv"),ee=((qt=function(t){e(o,t);var i=n(o);function o(t,e,n){return s(this,o),i.call(this,t,"Objective",e,n)}return u(o,[{key:"post",value:function(t){return this.http.post("".concat(this.env.apiUrl).concat(this.entity,"/add"),t).pipe(Object(R.a)(this.handleError))}},{key:"put",value:function(t){return this.http.put("".concat(this.env.apiUrl).concat(this.entity,"/update"),t).pipe(Object(R.a)(this.handleError))}},{key:"getAllKPIObjectiveByAccountId",value:function(){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetAllKPIObjectiveByAccountId"),{}).pipe(Object(R.a)(this.handleError))}}]),o}(te.a)).\u0275fac=function(t){return new(t||qt)(O.cc(S.b),O.cc(G.a),O.cc(M.a))},qt.\u0275prov=O.Lb({token:qt,factory:qt.\u0275fac,providedIn:"root"}),qt),ie=["addNewModal"],ne=["grid"];function oe(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic();O.Kc(" ",n.NO(i.index)," ")}}function ce(t,e){1&t&&O.Ic(0," # ")}function ae(t,e){if(1&t){var i=O.Wb();O.Vb(0,"ejs-dropdownlist",14,15),O.fc("change",function(t){return O.Ac(i),O.ic().onChangeAccountGroup(t)}),O.Ub()}if(2&t){var n=e.$implicit,o=O.ic();O.oc("dataSource",o.accountGroupData)("value",n.accountGroupId)("fields",o.fields)("allowFiltering",!0)}}function re(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",16),O.fc("click",function(){O.Ac(i);var t=e.$implicit;return O.ic().delete(t.id)}),O.Qb(1,"i",17),O.Ub()}}function le(t,e){1&t&&(O.Vb(0,"span"),O.Ic(1),O.Ub()),2&t&&(O.Cb(1),O.Kc(" ","Update KPI Object"," "))}function se(t,e){1&t&&(O.Vb(0,"span"),O.Ic(1),O.Ub()),2&t&&(O.Cb(1),O.Kc(" ","Add new KPI Object"," "))}function de(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",34),O.fc("click",function(){return O.Ac(i),O.ic(2).create()}),O.Ic(1),O.Ub()}2&t&&(O.Cb(1),O.Jc("Finish"))}function ue(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",34),O.fc("click",function(){return O.Ac(i),O.ic(2).update()}),O.Ic(1),O.Ub()}2&t&&(O.Cb(1),O.Jc("Finish"))}function be(t,e){if(1&t){var i=O.Wb();O.Vb(0,"div",18),O.Vb(1,"h4",19),O.Qb(2,"i",20),O.Gc(3,le,2,1,"span",21),O.Gc(4,se,2,1,"span",21),O.Ub(),O.Vb(5,"button",22),O.fc("click",function(){return e.$implicit.dismiss("Cross click")}),O.Vb(6,"span",23),O.Ic(7,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(8,"div",24),O.Vb(9,"div",0),O.Vb(10,"div",25),O.Vb(11,"div",26),O.Vb(12,"label",27),O.Ic(13,"KPI Objective"),O.Ub(),O.Vb(14,"input",28),O.fc("ngModelChange",function(t){return O.Ac(i),O.ic().topic=t}),O.Ub(),O.Ub(),O.Ub(),O.Vb(15,"div",25),O.Vb(16,"div",26),O.Vb(17,"label",27),O.Ic(18,"Choose PIC"),O.Ub(),O.Vb(19,"ejs-multiselect",29,30),O.fc("removing",function(t){return O.Ac(i),O.ic().removing(t)})("select",function(t){return O.Ac(i),O.ic().onSelect(t)}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(21,"div",31),O.Vb(22,"button",32),O.fc("click",function(){return e.$implicit.close("Close click")}),O.Ic(23),O.Ub(),O.Gc(24,de,2,1,"button",33),O.Gc(25,ue,2,1,"button",33),O.Ub()}if(2&t){var n=O.ic();O.Cb(3),O.oc("ngIf",(null==n.model?null:n.model.id)>0),O.Cb(1),O.oc("ngIf",0===(null==n.model?null:n.model.id)),O.Cb(10),O.oc("ngModel",n.topic),O.Cb(5),O.oc("dataSource",n.accountData)("fields",n.fields)("allowFiltering",!0)("value",n.accountIdList),O.Cb(4),O.Jc("Close"),O.Cb(1),O.oc("ngIf",0===n.model.id),O.Cb(1),O.oc("ngIf",n.model.id>0)}}var he,pe,fe,ge,me,ve,ye,Ie=((pe=function(t){e(o,t);var i=n(o);function o(t,e,n,c,a,r,l,d,u){var b;return s(this,o),(b=i.call(this)).service=t,b.periodService=e,b.accountService=n,b.periodReportTimeService=c,b.accountGroupService=a,b.modalService=r,b.alertify=l,b.route=d,b.datePipe=u,b.data=[],b.periodReportTimeData=[],b.password="",b.fields={text:"fullName",value:"id"},b.filterSettings={type:"Excel"},b.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},b.locale=localStorage.getItem("lang"),b.accountIdList=[],b.accountList=[],b.model={id:0,topic:"",status:!1,date:(new Date).toLocaleDateString(),accountIdList:b.accountIdList},b.toolbarOptions=["Add","Search"],b}return u(o,[{key:"ngOnInit",value:function(){this.loadData(),this.loadPeriodData(),this.loadAccountData(),this.loadAccountGroupData()}},{key:"onDoubleClick",value:function(t){console.log(t);var e=t.rowData;this.model={id:e.id,topic:e.topic,status:e.status,date:e.date,accountIdList:e.accountIdList},this.accountIdList=e.accountIdList,this.openModal(this.addNewModal),this.setFocus=t.column}},{key:"actionBegin",value:function(t){if("beginEdit"===t.requestType){var e=t.rowData;this.accountGroupId=e.accountGroupId,this.topic=e.topic,t.cancel=!0}"save"===t.requestType&&"add"===t.action&&this.create(),"save"===t.requestType&&"edit"===t.action&&(this.model={id:t.data.id,topic:t.data.topic,status:!1,date:t.data.date,accountIdList:this.accountIdList},this.update()),"delete"===t.requestType&&this.delete(t.data[0].id)}},{key:"actionComplete",value:function(t){}},{key:"loadData",value:function(){var t=this;this.service.getAllKPIObjectiveByAccountId().subscribe(function(e){t.data=e})}},{key:"loadAccountData",value:function(){var t=this;this.accountService.getAll().subscribe(function(e){t.accountData=e.filter(function(t){return t.id!==+JSON.parse(localStorage.getItem("user")).id})})}},{key:"loadAccountGroupData",value:function(){var t=this;this.accountGroupService.getAll().subscribe(function(e){t.accountGroupData=e})}},{key:"loadPeriodData",value:function(){var t=this;this.periodService.getAll().subscribe(function(e){t.periodData=e})}},{key:"loadPeriodReportTimeData",value:function(){var t=this;this.periodReportTimeService.getAll().subscribe(function(e){t.periodReportTimeData=e})}},{key:"delete",value:function(t){var e=this;this.alertify.confirm("Delete","Are you sure you want to delete the objective?",function(){e.service.delete(t).subscribe(function(t){!0===t.success?(e.alertify.success(T.a.DELETED_OK_MSG),e.loadData()):e.alertify.warning(T.a.SYSTEM_ERROR_MSG)},function(t){return e.alertify.warning(T.a.SYSTEM_ERROR_MSG)})})}},{key:"create",value:function(){var t=this;this.model={id:0,topic:this.topic,status:!1,date:(new Date).toLocaleDateString(),accountIdList:this.accountIdList},this.service.post(this.model).subscribe(function(e){!0===e.success?(t.alertify.success(T.a.CREATED_OK_MSG),t.loadData(),t.topic="",t.accountIdList=[],t.model={id:0,topic:"",status:!1,date:(new Date).toLocaleDateString(),accountIdList:t.accountIdList},t.modalService.dismissAll()):t.alertify.warning(T.a.SYSTEM_ERROR_MSG)},function(e){t.alertify.warning(T.a.SYSTEM_ERROR_MSG)})}},{key:"update",value:function(){var t=this;this.model.topic=this.topic,this.model.accountIdList=this.accountIdList,this.service.put(this.model).subscribe(function(e){!0===e.success?(t.alertify.success(T.a.UPDATED_OK_MSG),t.loadData(),t.modalService.dismissAll()):t.alertify.warning(T.a.SYSTEM_ERROR_MSG)},function(e){t.alertify.warning(T.a.SYSTEM_ERROR_MSG)})}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}},{key:"onChangeAccountGroup",value:function(t){console.log(t),this.accountGroupId=t.itemData.id}},{key:"removing",value:function(t){var e=this.accountIdList.filter(function(e){return e!==t.itemData.id});this.accountIdList=e,this.accountList=this.accountList.filter(function(e){return e.id!==t.itemData.id}),console.log(this.accountList),console.log(this.accountIdList)}},{key:"onSelect",value:function(t){var e=t.itemData;this.accountIdList.push(e.id),this.accountList.push({objectiveId:0,id:e.id,username:e.username}),console.log(this.accountList),console.log(this.accountIdList)}},{key:"toolbarClick",value:function(t){switch(t.item.id){case"grid_add":t.cancel=!0,this.openModal(this.addNewModal)}}},{key:"openModal",value:function(t){this.modalReference=this.modalService.open(this.addNewModal,{size:"xl"})}}]),o}(C.a)).\u0275fac=function(t){return new(t||pe)(O.Pb(ee),O.Pb(Xt.a),O.Pb(k.a),O.Pb(Zt.a),O.Pb(x.a),O.Pb(N.b),O.Pb(V.a),O.Pb(_.a),O.Pb(b.e))},pe.\u0275cmp=O.Jb({type:pe,selectors:[["app-objective"]],viewQuery:function(t,e){var i;1&t&&(O.Mc(ie,1),O.Mc(ne,1)),2&t&&(O.wc(i=O.gc())&&(e.addNewModal=i.first),O.wc(i=O.gc())&&(e.grid=i.first))},features:[O.Bb([b.e]),O.zb],decls:22,vars:12,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body","table-responsive","p-0"],["id","grid","gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","locale","toolbar","pageSettings","allowExcelExport","editSettings","actionBegin","actionComplete","recordDoubleClick","toolbarClick"],["grid",""],["field","ID","textAlign","Center","width","80","isPrimaryKey","true","headerText","ID"],["template",""],["editTemplate",""],["field","topic","width","200","textAlign","Center",3,"headerText"],["field","accounts","width","200","textAlign","Center",3,"headerText"],["field","date","type","date","format","MM-dd-yyyy","width","200","textAlign","Center",3,"headerText"],["field","option","width","80","headerText","Option","textAlign","Center"],["addNewModal",""],[3,"dataSource","value","fields","allowFiltering","change"],["accountGroupDropdownlist",""],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],[4,"ngIf"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-6"],[1,"form-group"],["for",""],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["id","glueDropdownlist","mode","Box","placeholder","Choose PIC",3,"dataSource","fields","allowFiltering","value","removing","select"],["accountDropdownlist",""],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"div",1),O.Vb(2,"div",2),O.Vb(3,"div",3),O.Vb(4,"ejs-grid",4,5),O.fc("actionBegin",function(t){return e.actionBegin(t)})("actionComplete",function(t){return e.actionComplete(t)})("recordDoubleClick",function(t){return e.onDoubleClick(t)})("toolbarClick",function(t){return e.toolbarClick(t)}),O.Vb(6,"e-columns"),O.Vb(7,"e-column",6),O.Gc(8,oe,1,1,"ng-template",null,7,O.Hc),O.Gc(10,ce,1,0,"ng-template",null,8,O.Hc),O.Ub(),O.Qb(12,"e-column",9),O.Vb(13,"e-column",10),O.Gc(14,ae,2,4,"ng-template",null,8,O.Hc),O.Ub(),O.Qb(16,"e-column",11),O.Vb(17,"e-column",12),O.Gc(18,re,2,0,"ng-template",null,7,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Gc(20,be,26,10,"ng-template",null,13,O.Hc)),2&t&&(O.Cb(4),O.oc("dataSource",e.data)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("locale",e.locale)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings)("allowExcelExport",!0)("editSettings",e.editSettings),O.Cb(8),O.pc("headerText","Period"),O.Cb(1),O.pc("headerText","PIC"),O.Cb(3),O.pc("headerText","Date"))},directives:[v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c,m.b,b.m,h.a,h.f,h.i,m.e],styles:[""]}),pe),Se=((he=function(t){e(o,t);var i=n(o);function o(t,e,n){return s(this,o),i.call(this,t,"Performance",e,n)}return u(o,[{key:"getKPIObjectivesByUpdater",value:function(){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetKPIObjectivesByUpdater"),{}).pipe(Object(R.a)(this.handleError))}},{key:"submit",value:function(t){return this.http.put("".concat(this.env.apiUrl).concat(this.entity,"/Submit"),t).pipe(Object(R.a)(this.handleError))}}]),o}(te.a)).\u0275fac=function(t){return new(t||he)(O.cc(S.b),O.cc(G.a),O.cc(M.a))},he.\u0275prov=O.Lb({token:he,factory:he.\u0275fac,providedIn:"root"}),he),Ue=function(t){return t[t.L0=1]="L0",t[t.L1=2]="L1",t[t.FunctionalLeader=6]="FunctionalLeader",t[t.GFL=6]="GFL",t[t.L2=3]="L2",t[t.FHO=4]="FHO",t[t.Updater=4]="Updater",t[t.GHR=5]="GHR",t[t.GM=7]="GM",t}({}),Ce=function(t){return t[t.Objective=1]="Objective",t[t.Target=2]="Target",t[t.Action=3]="Action",t}({}),Ve=function(t){return t.L0="L0",t.L1="L1",t.L2="L2",t.FHO="FHO",t.Updater="FHO",t.GHR="GHR",t.GM="GM",t.FunctionalLeader="FunctionalLeader",t.GFL="FunctionalLeader",t}({}),ke=function(t){return t.KPI="KPI",t.Attitude="Attitude",t}({}),Te=function(t){return t.Monthly="Monthly",t.Quarterly="Quarterly",t.HalfYear="HalfYear",t}({}),xe=function(t){return t[t.Q1=1]="Q1",t[t.Q2=2]="Q2",t[t.Q3=3]="Q3",t[t.Q4=4]="Q4",t}({}),we=function(t){return t.Comment="Comment",t.SelfEvaluation="Self Evaluation",t}({}),Me=((ve=function(t){e(o,t);var i=n(o);function o(t,e,n){var c;return s(this,o),(c=i.call(this,t,"Todolist",e,n)).env=n,c.messageSource=new D.a(null),c.currentMessage=c.messageSource.asObservable(),c}return u(o,[{key:"changeMessage",value:function(t){this.messageSource.next(t)}},{key:"getAllByObjectiveId",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetAllByObjectiveId?objectiveId=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"getAllByObjectiveIdAsTree",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetAllByObjectiveIdAsTree?objectiveId=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"l0",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/L0?currentTime=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"l1",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/L1?currentTime=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"functionalLeader",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/FunctionalLeader?currentTime=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"l2",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/L2?currentTime=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"fho",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/fho?currentTime=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"updater",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/updater?currentTime=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"ghr",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/ghr?currentTime=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"gm",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/gm?currentTime=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"getAllInCurrentQuarterByObjectiveId",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetAllInCurrentQuarterByObjectiveId?objectiveId=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"getAllObjectiveByL1L2",value:function(){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetAllObjectiveByL1L2"),{}).pipe(Object(R.a)(this.handleError))}},{key:"getAllKPIScoreByAccountId",value:function(){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetAllKPIScoreL0ByAccountId"),{}).pipe(Object(R.a)(this.handleError))}},{key:"getAllKPISelfScoreByObjectiveId",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/getAllKPISelfScoreByObjectiveId?objectiveId=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"dateToYMD",value:function(t){var e=t.getDate(),i=t.getMonth()+1;return t.getFullYear()+"-"+(i<=9?"0"+i:i)+"-"+(e<=9?"0"+e:e)}},{key:"getAllKPIScoreL1ByAccountId",value:function(t,e){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetAllKPIScoreL1ByAccountId?accountId=").concat(t,"&currentTime=").concat(this.dateToYMD(e)),{}).pipe(Object(R.a)(this.handleError))}},{key:"getAllKPIScoreL2ByAccountId",value:function(t,e){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetAllKPIScoreL2ByAccountId?accountId=").concat(t,"&currentTime=").concat(this.dateToYMD(e)),{}).pipe(Object(R.a)(this.handleError))}},{key:"getAllKPIScoreGHRByAccountId",value:function(t,e){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetAllKPIScoreGHRByAccountId?accountId=").concat(t,"&currentTime=").concat(this.dateToYMD(e)),{}).pipe(Object(R.a)(this.handleError))}},{key:"getAllKPIScoreL0ByPeriod",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetAllKPIScoreL0ByPeriod?period=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"getAllAttitudeScoreByFunctionalLeader",value:function(){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetAllAttitudeScoreByFunctionalLeader"),{}).pipe(Object(R.a)(this.handleError))}},{key:"getQuarterlySetting",value:function(){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/getQuarterlySetting"),{}).pipe(Object(R.a)(this.handleError))}},{key:"getAllAttitudeScoreL1ByAccountId",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetAllAttitudeScoreL1ByAccountId?accountId=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"getAllAttitudeScoreL2ByAccountId",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetAllAttitudeScoreL2ByAccountId?accountId=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"getAllAttitudeScoreGHRByAccountId",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/getAllAttitudeScoreGHRByAccountId?accountId=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"getAllAttitudeScoreGFLByAccountId",value:function(t){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/getAllAttitudeScoreGFLByAccountId?accountId=").concat(t),{}).pipe(Object(R.a)(this.handleError))}},{key:"import",value:function(t,e){var i=new FormData;return i.append("UploadedFile",t),i.append("UploadBy",e),this.http.post(e+"todolist/Import",i)}},{key:"reject",value:function(t){return this.http.put("".concat(this.env.apiUrl).concat(this.entity,"/reject"),{ids:t}).pipe(Object(R.a)(this.handleError))}},{key:"disableReject",value:function(t){return this.http.put("".concat(this.env.apiUrl).concat(this.entity,"/DisableReject"),{ids:t}).pipe(Object(R.a)(this.handleError))}},{key:"release",value:function(t){return this.http.put("".concat(this.env.apiUrl).concat(this.entity,"/release"),{ids:t}).pipe(Object(R.a)(this.handleError))}}]),o}(te.a)).\u0275fac=function(t){return new(t||ve)(O.cc(S.b),O.cc(G.a),O.cc(M.a))},ve.\u0275prov=O.Lb({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve),De=((me=function(t){e(o,t);var i=n(o);function o(t,e,n){return s(this,o),i.call(this,t,"KPIScore",e,n)}return u(o,[{key:"getFisrtSelfScoreByAccountId",value:function(t,e,i,n){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetFisrtSelfScoreByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i,"&scoreType=").concat(n),{}).pipe(Object(R.a)(this.handleError))}},{key:"getFisrtSelfScoreL1ByAccountId",value:function(t,e,i,n){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetFisrtSelfScoreL1ByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i,"&scoreType=").concat(n),{}).pipe(Object(R.a)(this.handleError))}},{key:"getFisrtByAccountId",value:function(t,e,i,n){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetFisrtByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i,"&scoreType=").concat(n),{}).pipe(Object(R.a)(this.handleError))}},{key:"getFisrtKPIScoreL1ByAccountId",value:function(t,e,i,n){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetFisrtKPIScoreL1ByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i,"&scoreType=").concat(n),{}).pipe(Object(R.a)(this.handleError))}}]),o}(te.a)).\u0275fac=function(t){return new(t||me)(O.cc(S.b),O.cc(G.a),O.cc(M.a))},me.\u0275prov=O.Lb({token:me,factory:me.\u0275fac,providedIn:"root"}),me),Ae=((ge=function(t){e(o,t);var i=n(o);function o(t,e,n){return s(this,o),i.call(this,t,"KPI",e,n)}return o}(te.a)).\u0275fac=function(t){return new(t||ge)(O.cc(S.b),O.cc(G.a),O.cc(M.a))},ge.\u0275prov=O.Lb({token:ge,factory:ge.\u0275fac,providedIn:"root"}),ge),Oe=((fe=function(t){e(o,t);var i=n(o);function o(t,e,n){return s(this,o),i.call(this,t,"Comment",e,n)}return u(o,[{key:"getFisrtByAccountId",value:function(t,e,i,n){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetFisrtByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i,"&scoreType=").concat(n),{}).pipe(Object(R.a)(this.handleError))}},{key:"getFunctionalLeaderCommentByAccountId",value:function(t,e,i){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetFunctionalLeaderCommentByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i),{}).pipe(Object(R.a)(this.handleError))}},{key:"getGHRCommentByAccountId",value:function(t,e,i){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetGHRCommentByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i),{}).pipe(Object(R.a)(this.handleError))}},{key:"getL1CommentByAccountId",value:function(t,e,i){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetL1CommentByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i),{}).pipe(Object(R.a)(this.handleError))}},{key:"getL0SelfEvaluationCommentByAccountId",value:function(t,e,i){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetL0SelfEvaluationCommentByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i),{}).pipe(Object(R.a)(this.handleError))}},{key:"getL1SelfEvaluationCommentByAccountId",value:function(t,e,i){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetL1SelfEvaluationCommentByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i),{}).pipe(Object(R.a)(this.handleError))}},{key:"getL2SelfEvaluationCommentByAccountId",value:function(t,e,i){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetL2SelfEvaluationCommentByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i),{}).pipe(Object(R.a)(this.handleError))}}]),o}(te.a)).\u0275fac=function(t){return new(t||fe)(O.cc(S.b),O.cc(G.a),O.cc(M.a))},fe.\u0275prov=O.Lb({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe),Pe=c("cp0P"),je=((ye=function(t){e(o,t);var i=n(o);function o(t,e,n){return s(this,o),i.call(this,t,"AttitudeScore",e,n)}return u(o,[{key:"getFisrtByObjectiveIdAndScoreBy",value:function(t,e){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetFisrtByObjectiveIdAndScoreBy?objectiveId=").concat(t,"&scoreby=").concat(e),{}).pipe(Object(R.a)(this.handleError))}},{key:"getFisrtByAccountId",value:function(t,e,i,n){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetFisrtByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i,"&scoreType=").concat(n),{}).pipe(Object(R.a)(this.handleError))}},{key:"getFunctionalLeaderAttitudeScoreByAccountId",value:function(t,e,i){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetFunctionalLeaderAttitudeScoreByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i),{}).pipe(Object(R.a)(this.handleError))}},{key:"getL1AttitudeScoreByAccountId",value:function(t,e,i){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetL1AttitudeScoreByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i),{}).pipe(Object(R.a)(this.handleError))}}]),o}(te.a)).\u0275fac=function(t){return new(t||ye)(O.cc(S.b),O.cc(G.a),O.cc(M.a))},ye.\u0275prov=O.Lb({token:ye,factory:ye.\u0275fac,providedIn:"root"}),ye),Le=["grid"];function Ge(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic();O.Kc(" ",n.NO(i.index)," ")}}function Fe(t,e){if(1&t&&(O.Vb(0,"li"),O.Ic(1),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.Jc(i)}}function Re(t,e){if(1&t&&(O.Vb(0,"ul",30),O.Gc(1,Fe,2,1,"li",31),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.oc("ngForOf",i.l0ActionList)}}function Ee(t,e){if(1&t&&O.Qb(0,"e-column",32),2&t){var i=e.$implicit;O.oc("field",i.field)("headerText",i.headerText)}}function Be(t,e){if(1&t&&(O.Vb(0,"table",33),O.Vb(1,"thead"),O.Vb(2,"tr"),O.Vb(3,"th",34),O.Ic(4,"Self - Evaluation"),O.Qb(5,"br"),O.Ic(6,"\u81ea\u6211\u8a55\u50f9"),O.Ub(),O.Vb(7,"th",35),O.Ic(8),O.Ub(),O.Vb(9,"th",36),O.Ic(10),O.Qb(11,"br"),O.Ic(12),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic();O.Cb(8),O.Jc(i.selfEvaluationCommentContent),O.Cb(2),O.Kc("",(null==i.data?null:i.data.fullName)||""," Self-Score"),O.Cb(2),O.Kc("\u81ea\u8a55\u5206\u6578\uff1a",i.selfPoint,"")}}function Ne(t,e){1&t&&(O.Vb(0,"div",37),O.Vb(1,"strong",38),O.Ic(2," Please ask L0 to self score!"),O.Ub(),O.Ub())}var _e,Ke=((_e=function(){function t(e,i,n,o,c,r,l,d){var u=this;s(this,t),this.activeModal=e,this.service=i,this.kpiScoreService=n,this.kpiService=o,this.commentService=c,this.alertify=r,this.attitudeScoreService=l,this.utilitiesService=d,this.toolbarOptions=["Search"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.fields={text:"point",value:"point"},this.filterSettings={type:"Excel"},this.content="",this.quarterlySettingsData=[],this.columns=[],this.queryCellInfoEvent=function(t){var e,i,n=t.data,o=a(u.quarterlySettingsData);try{var c=function(){var o=i.value;(""+o).includes(t.column.field)&&(t.cell.innerText=(null===(e=n.resultOfMonth.filter(function(t){return t.month===o})[0])||void 0===e?void 0:e.title)||"N/A")};for(o.s();!(i=o.n()).done;)c()}catch(r){o.e(r)}finally{o.f()}}}return u(t,[{key:"ngOnInit",value:function(){this.hasFunctionalLeader=this.data.hasFunctionalLeader,this.isQuarter2Or4=this.data.period==xe.Q2||this.data.period==xe.Q4,this.kpiScoreModel={id:0,periodTypeId:this.data.periodTypeId,period:this.data.period,point:this.point,scoreBy:+JSON.parse(localStorage.getItem("user")).id,modifiedTime:null,createdTime:(new Date).toDateString(),accountId:this.data.id,scoreType:this.scoreType},this.commentModel={id:0,content:this.content,createdBy:+JSON.parse(localStorage.getItem("user")).id,accountId:this.data.id,modifiedBy:null,createdTime:(new Date).toDateString(),modifiedTime:null,period:this.data.period,periodTypeId:this.data.periodTypeId,scoreType:this.scoreType,commentTypeId:we.Comment},!0===this.isQuarter2Or4&&this.getFisrtSelfScoreL1ByAccountId(),this.getQuarterlySetting(),this.loadData(),this.loadKPIScoreData(),this.loadKPIData(),this.getFisrtByAccountId(),this.getFisrtCommentByObjectiveId(),this.getL1SelfEvaluationCommentByAccountId()}},{key:"getFunctionalLeaderAttitudeScoreByAccountId",value:function(){var t=this;this.attitudeScoreService.getFunctionalLeaderAttitudeScoreByAccountId(this.data.id,this.data.halfYearId,this.data.halfYearPeriod).subscribe(function(e){t.functionalLeaderAttitudeScoreData=(null==e?void 0:e.point)||0,t.functionalLeaderScored=t.functionalLeaderAttitudeScoreData>0})}},{key:"getFunctionalLeaderCommentByAccountId",value:function(){var t=this;this.commentService.getFunctionalLeaderCommentByAccountId(this.data.id,this.data.halfYearId,this.data.halfYearPeriod).subscribe(function(e){t.functionalLeaderCommentContent=null==e?void 0:e.content})}},{key:"getFisrtSelfScoreL1ByAccountId",value:function(){var t=this;this.kpiScoreService.getFisrtSelfScoreL1ByAccountId(this.data.id,this.data.halfYearId,this.data.halfYearPeriod,Ve.L0).subscribe(function(e){t.selfPoint=(null==e?void 0:e.point)||0,t.selfScored=0!==t.selfPoint})}},{key:"getL1SelfEvaluationCommentByAccountId",value:function(){var t=this;this.commentService.getL1SelfEvaluationCommentByAccountId(this.data.id,this.data.halfYearId,this.data.halfYearPeriod).subscribe(function(e){t.selfEvaluationCommentContent=null==e?void 0:e.content})}},{key:"getMonthListInCurrentQuarter",value:function(t){return["Result of Jan.","Result of Feb.","Result of Mar.","Result of Apr.","Result of May.","Result of Jun.","Result of Jul.","Result of Aug.","Result of Sep.","Result of Oct.","Result of Nov.","Result of Dec."][t-1]}},{key:"getQuarterlySetting",value:function(){this.quarterlySettingsData=this.data.settings||[],this.columns=[];var t,e=a(this.quarterlySettingsData);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.columns.push({field:"".concat(i),headerText:this.getMonthListInCurrentQuarter(i),month:i})}}catch(n){e.e(n)}finally{e.f()}}},{key:"loadData",value:function(){var t=this;this.service.getAllKPIScoreL1ByAccountId(this.data.id,this.currentTime).subscribe(function(e){t.gridData=e})}},{key:"loadKPIScoreData",value:function(){var t=this;this.kpiScoreService.getById(this.data.id).subscribe(function(e){t.kpiScoreData=e})}},{key:"getFisrtByAccountId",value:function(){var t=this;this.kpiScoreService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.point=null==e?void 0:e.point,t.kpiScoreModel.id=null==e?void 0:e.id})}},{key:"getFisrtCommentByObjectiveId",value:function(){var t=this;this.commentService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.content=null==e?void 0:e.content,t.commentModel.id=null==e?void 0:e.id})}},{key:"loadKPIData",value:function(){var t=this;this.kpiService.getAll().subscribe(function(e){t.kpiData=e})}},{key:"addKPIScore",value:function(){return this.kpiScoreModel.point=this.point,this.kpiScoreService.add(this.kpiScoreModel)}},{key:"addComment",value:function(){return this.commentModel.content=this.content,this.commentService.add(this.commentModel)}},{key:"isShowSelfScore",value:function(){return[2,4].includes(this.data.period)}},{key:"finish",value:function(){if(this.point){var t=this.addKPIScore(),e=this.addComment();Object(Pe.a)([t,e]).subscribe(function(t){console.log(t),t.map(function(t){return t.success})})}else this.alertify.warning("Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0)}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}}]),t}()).\u0275fac=function(t){return new(t||_e)(O.Pb(N.a),O.Pb(Me),O.Pb(De),O.Pb(Ae),O.Pb(Oe),O.Pb(V.a),O.Pb(je),O.Pb(G.a))},_e.\u0275cmp=O.Jb({type:_e,selectors:[["app-kpi-score"]],viewQuery:function(t,e){var i;1&t&&O.Mc(Le,1),2&t&&O.wc(i=O.gc())&&(e.grid=i.first)},inputs:{data:"data",periodTypeCode:"periodTypeCode",scoreType:"scoreType",currentTime:"currentTime"},decls:73,vars:21,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["allowTextWrap","true","gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","toolbar","pageSettings","allowExcelExport","queryCellInfo"],["grid",""],["field","#","headerText","#","textAlign","Center","width","80","type","number"],["template",""],["field","objective","headerText","KPI Objective","type","string"],["field","l0TargetList","headerText","L0 Target"],["field","l0ActionList","headerText","L0 Action"],["ngFor","",3,"ngForOf"],[1,"row","mt-2","d-flex","justify-content-center"],[1,"col-md-12"],[1,"table","table-bordered"],["scope","col"],["class","table",4,"ngIf"],["class","alert alert-danger text-center","role","alert",4,"ngIf"],[1,"table",2,"border","none"],["scope","col",1,"text-center",2,"border","none","width","70%","padding","0"],["scope","col",1,"text-center",2,"border","none","width","30%","padding","0"],[2,"border","none"],[1,"form-group"],["id","comment","rows","6","type","text","placeholder","Type something!",1,"form-control",3,"ngModel","ngModelChange"],[3,"dataSource","value","fields","allowFiltering","valueChange"],["accountGroupDropdownlist",""],[1,"modal-footer","justify-content-end"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"disabled","click"],[2,"padding","0 0 0 15px"],[4,"ngFor","ngForOf"],[3,"field","headerText"],[1,"table"],["scope","col",2,"width","20%"],["scope","col",2,"width","50%","text-align","left"],["scope","col",2,"width","30%","text-align","left"],["role","alert",1,"alert","alert-danger","text-center"],[1,"text-center"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"h4",1),O.Ic(2),O.Ub(),O.Vb(3,"button",2),O.fc("click",function(){return e.activeModal.dismiss("Cross click")}),O.Vb(4,"span",3),O.Ic(5,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"div",4),O.Vb(7,"ejs-grid",5,6),O.fc("queryCellInfo",function(t){return e.queryCellInfoEvent(t)}),O.Vb(9,"e-columns"),O.Vb(10,"e-column",7),O.Gc(11,Ge,1,1,"ng-template",null,8,O.Hc),O.Ub(),O.Qb(13,"e-column",9),O.Qb(14,"e-column",10),O.Vb(15,"e-column",11),O.Gc(16,Re,2,1,"ng-template",null,8,O.Hc),O.Ub(),O.Gc(18,Ee,1,2,"ng-template",12,8,O.Hc),O.Ub(),O.Ub(),O.Vb(20,"div",13),O.Vb(21,"div",14),O.Vb(22,"table",15),O.Vb(23,"thead"),O.Vb(24,"tr"),O.Vb(25,"th",16),O.Ic(26,"5>= X >=4.5 \u8d85\u51fa\u9810\u671f"),O.Ub(),O.Vb(27,"th",16),O.Ic(28,"4.5> X >=4 \u7b26\u5408\u9810\u671f"),O.Ub(),O.Vb(29,"th",16),O.Ic(30,"4 > X >=3 \u5927\u90e8\u5206\u7b26\u5408\u9810\u671f"),O.Ub(),O.Vb(31,"th",16),O.Ic(32,"3> X >=2 \u90e8\u5206\u7b26\u5408\u9810\u671f"),O.Ub(),O.Vb(33,"th",16),O.Ic(34,"2> X >= 0 \u4e0d\u4f73\u4e0d\u7b26\u5408\u9810\u671f"),O.Ub(),O.Ub(),O.Ub(),O.Vb(35,"tbody"),O.Vb(36,"tr"),O.Vb(37,"td"),O.Ic(38,"Exceed expectation"),O.Ub(),O.Vb(39,"td"),O.Ic(40,"Meet expectation"),O.Ub(),O.Vb(41,"td"),O.Ic(42,"Mostly meet expectation"),O.Ub(),O.Vb(43,"td"),O.Ic(44,"Partly meet expectation"),O.Ub(),O.Vb(45,"td"),O.Ic(46,"Poorly or not meet expectation"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(47,"div",13),O.Vb(48,"div",14),O.Gc(49,Be,13,3,"table",17),O.Gc(50,Ne,3,0,"div",18),O.Vb(51,"table",19),O.Vb(52,"thead"),O.Vb(53,"tr"),O.Vb(54,"th",20),O.Ic(55,"Comment"),O.Ub(),O.Vb(56,"th",21),O.Ic(57,"KPI Score"),O.Ub(),O.Ub(),O.Ub(),O.Vb(58,"tbody"),O.Vb(59,"tr"),O.Vb(60,"td",22),O.Vb(61,"div",23),O.Vb(62,"textarea",24),O.fc("ngModelChange",function(t){return e.content=t}),O.Ub(),O.Ub(),O.Ub(),O.Vb(63,"td",22),O.Vb(64,"div",23),O.Vb(65,"ejs-dropdownlist",25,26),O.fc("valueChange",function(t){return e.point=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(67,"div",27),O.Vb(68,"button",28),O.fc("click",function(){return e.activeModal.close("Close click")}),O.Ic(69),O.jc(70,"translate"),O.Ub(),O.Vb(71,"button",29),O.fc("click",function(){return e.finish()}),O.Ic(72),O.Ub(),O.Ub(),O.Ub()),2&t&&(O.Cb(2),O.Kc("Self-score of KPI Objective (",e.data.objective,")"),O.Cb(5),O.oc("dataSource",e.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings)("allowExcelExport",!0),O.Cb(11),O.oc("ngForOf",e.columns),O.Cb(31),O.oc("ngIf",e.isQuarter2Or4),O.Cb(1),O.oc("ngIf",e.isQuarter2Or4&&!1===e.selfScored),O.Cb(12),O.oc("ngModel",e.content),O.Cb(3),O.oc("dataSource",e.kpiData)("value",e.point)("fields",e.fields)("allowFiltering",!0),O.Cb(4),O.Jc(O.kc(70,19,"Close")),O.Cb(2),O.oc("disabled",e.isQuarter2Or4&&!1===e.selfScored||e.isQuarter2Or4&&e.hasFunctionalLeader&&!1===e.functionalLeaderScored),O.Cb(1),O.Jc("Finish"))},directives:[v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c,b.l,b.m,h.a,h.f,h.i,m.b],pipes:[p.c],styles:["#comment[_ngcontent-%COMP%]{border:2px solid #ffc107!important;font-family:Helvetica Neue,Helvetica,Arial,sans-serif,-apple-system,BlinkMacSystemFont}#comment[_ngcontent-%COMP%], #comment.form-control[_ngcontent-%COMP%]:focus{color:#212529!important;font-size:14px!important}#comment.form-control[_ngcontent-%COMP%]:focus{background-color:#fff!important;border-color:#ffc107!important;outline:0!important;box-shadow:0 0 0 .2rem rgba(32,168,216,.25)}.e-input-group.e-control-wrapper[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error), .e-input-group[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error){border:2px solid #ffc107!important}"]}),_e),He=["grid"];function Je(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic();O.Kc(" ",n.NO(i.index)," ")}}var ze,Qe=((ze=function(){function t(e,i,n,o,c){s(this,t),this.activeModal=e,this.service=i,this.alertify=n,this.todolistService=o,this.datePipe=c,this.toolbarOptions=["Add","Delete","Search"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"}}return u(t,[{key:"ngOnInit",value:function(){this.targetModel={id:0,deadline:"",action:"",remark:"",parentId:0,objectiveId:this.data.id,level:Ce.Target,createdBy:+JSON.parse(localStorage.getItem("user")).id,modifiedBy:null,createdTime:(new Date).toLocaleDateString(),modifiedTime:null},this.objectiveModel={id:0,deadline:"",action:"",remark:"",parentId:0,objectiveId:this.data.id,level:Ce.Objective,createdBy:+JSON.parse(localStorage.getItem("user")).id,modifiedBy:null,createdTime:(new Date).toLocaleDateString(),modifiedTime:null},this.loadData()}},{key:"loadData",value:function(){var t=this;this.service.getAllByObjectiveId(this.data.id).subscribe(function(e){var i,n,o;if(t.gridData=e.filter(function(t){return 3==t.level}),e.length>0){var c=e.filter(function(t){return 2==t.level})[0];t.targetModel={id:null==c?void 0:c.id,deadline:null==c?void 0:c.deadline,action:null==c?void 0:c.action,remark:null==c?void 0:c.remark,parentId:null==c?void 0:c.parentId,objectiveId:null==c?void 0:c.objectiveId,level:null==c?void 0:c.level,createdBy:null==c?void 0:c.createdBy,modifiedBy:null==c?void 0:c.modifiedBy,createdTime:null==c?void 0:c.createdTime,modifiedTime:null==c?void 0:c.modifiedTime},t.target=null===(i=t.targetModel)||void 0===i?void 0:i.action,t.deadline=null===(n=t.targetModel)||void 0===n?void 0:n.deadline;var a=e.filter(function(t){return 1==t.level})[0];t.objectiveModel={id:null==a?void 0:a.id,deadline:null==a?void 0:a.deadline,action:null==a?void 0:a.action,remark:null==a?void 0:a.remark,parentId:null==a?void 0:a.parentId,objectiveId:null==a?void 0:a.objectiveId,level:null==a?void 0:a.level,createdBy:null==a?void 0:a.createdBy,modifiedBy:null==a?void 0:a.modifiedBy,createdTime:null==a?void 0:a.createdTime,modifiedTime:null==a?void 0:a.modifiedTime},t.objective=null===(o=t.objectiveModel)||void 0===o?void 0:o.action}})}},{key:"delete",value:function(t){var e=this;this.service.delete(t).subscribe(function(t){!0===t.success?(e.alertify.success(T.a.DELETED_OK_MSG),e.loadData()):e.alertify.warning(T.a.SYSTEM_ERROR_MSG)},function(t){return e.alertify.warning(T.a.SYSTEM_ERROR_MSG)})}},{key:"actionBegin",value:function(t){"delete"===t.requestType&&t.data[0].id>0&&this.delete(t.data[0].id)}},{key:"create",value:function(){var t=this;this.model={id:0,deadline:"",action:"",remark:"",parentId:0,objectiveId:this.data.id,level:0,createdBy:+JSON.parse(localStorage.getItem("user")).id,modifiedBy:null,createdTime:(new Date).toLocaleDateString(),modifiedTime:null},this.service.add(this.model).subscribe(function(e){!0===e.success?(t.alertify.success(T.a.CREATED_OK_MSG),t.loadData(),t.model={}):t.alertify.warning(T.a.SYSTEM_ERROR_MSG)},function(e){t.alertify.warning(T.a.SYSTEM_ERROR_MSG)})}},{key:"isNullOrUndefined",value:function(t){return null==t}},{key:"createRange",value:function(){var t=this,e=[],i=this.grid.currentViewData||[];if(console.log(this.target),console.log(this.objective),0===i.length||this.isNullOrUndefined(this.target)||this.isNullOrUndefined(this.objective)||this.isNullOrUndefined(this.deadline))this.alertify.warning("Not yet complete. Can not submit!",!0);else{this.targetModel.action=this.target,this.targetModel.deadline=this.datePipe.transform(this.deadline,"yyyy-MM-dd HH:mm:ss"),this.objectiveModel.action=this.objective,e.push(this.targetModel),e.push(this.objectiveModel);var n,o=a(i);try{for(o.s();!(n=o.n()).done;){var c=n.value,r={id:c.id,deadline:null,action:c.action,remark:"",level:Ce.Action,parentId:null,objectiveId:this.data.id,createdBy:+JSON.parse(localStorage.getItem("user")).id,modifiedBy:null,createdTime:(new Date).toLocaleDateString(),modifiedTime:null};e.push(r)}}catch(d){o.e(d)}finally{o.f()}var l=this.todolistService.disableReject([this.data.todolistId]),s=[this.service.addRange(e)];this.isReject&&s.push(l),Object(Pe.a)(s).subscribe(function(t){console.log(t),t.map(function(t){return t.success})},function(e){t.alertify.warning(T.a.SYSTEM_ERROR_MSG)})}}},{key:"update",value:function(){var t=this;this.service.update(this.model).subscribe(function(e){!0===e.success?(t.alertify.success(T.a.UPDATED_OK_MSG),t.loadData()):t.alertify.warning(T.a.SYSTEM_ERROR_MSG)},function(e){t.alertify.warning(T.a.SYSTEM_ERROR_MSG)})}},{key:"finish",value:function(){this.createRange()}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}}]),t}()).\u0275fac=function(t){return new(t||ze)(O.Pb(N.a),O.Pb(Me),O.Pb(V.a),O.Pb(Me),O.Pb(b.e))},ze.\u0275cmp=O.Jb({type:ze,selectors:[["app-action"]],viewQuery:function(t,e){var i;1&t&&O.Mc(He,1),2&t&&O.wc(i=O.gc())&&(e.grid=i.first)},inputs:{data:"data",isReject:"isReject"},features:[O.Bb([b.e])],decls:39,vars:13,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],[1,"d-flex"],[1,"flex-fill",2,"width","60%","padding","0 5px 0 5px"],[1,"flex-fill",2,"width","24%","padding","0 5px 0 5px"],[1,"form-group"],["for","title",1,"d-flex","justify-content-center",2,"font-weight","Bold","font-size","14px","margin-top","52px"],["id","title","rows","10","type","text","placeholder","Type something!",1,"form-control",3,"ngModel","ngModelChange"],[1,"flex-fill",2,"width","24%","padding","0 5px 0 0px"],["id","deadline",1,"flex-fill",2,"width","12%","padding","0 5px 0 0px"],["format","yyyy/MM/dd",3,"value","valueChange"],[1,"flex-fill",2,"width","40%","padding","5px 5px 5px 0"],["allowTextWrap","true",3,"dataSource","allowResizing","toolbar","editSettings","allowExcelExport","actionBegin"],["grid",""],["field","#","headerText","#","textAlign","Center","width","20","type","number",3,"allowEditing"],["template",""],["field","id","headerText","Id","type","number",3,"visible"],["field","action","textAlign","Left","headerTextAlign","Center","headerText","Action"],[1,"modal-footer","justify-content-end"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"h4",1),O.Ic(2),O.Ub(),O.Vb(3,"button",2),O.fc("click",function(){return e.activeModal.dismiss("Cross click")}),O.Vb(4,"span",3),O.Ic(5,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"div",4),O.Vb(7,"div",5),O.Vb(8,"div",6),O.Vb(9,"div",5),O.Vb(10,"div",7),O.Vb(11,"div",8),O.Vb(12,"label",9),O.Ic(13,"My Objective"),O.Ub(),O.Vb(14,"textarea",10),O.fc("ngModelChange",function(t){return e.objective=t}),O.Ub(),O.Ub(),O.Ub(),O.Vb(15,"div",11),O.Vb(16,"div",8),O.Vb(17,"label",9),O.Ic(18,"Target"),O.Ub(),O.Vb(19,"textarea",10),O.fc("ngModelChange",function(t){return e.target=t}),O.Ub(),O.Ub(),O.Ub(),O.Vb(20,"div",12),O.Vb(21,"div",8),O.Vb(22,"label",9),O.Ic(23,"Deadline"),O.Ub(),O.Vb(24,"ejs-datepicker",13),O.fc("valueChange",function(t){return e.deadline=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(25,"div",14),O.Vb(26,"ejs-grid",15,16),O.fc("actionBegin",function(t){return e.actionBegin(t)}),O.Vb(28,"e-columns"),O.Vb(29,"e-column",17),O.Gc(30,Je,1,1,"ng-template",null,18,O.Hc),O.Ub(),O.Qb(32,"e-column",19),O.Qb(33,"e-column",20),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(34,"div",21),O.Vb(35,"button",22),O.fc("click",function(){return e.activeModal.close("Close click")}),O.Ic(36),O.Ub(),O.Vb(37,"button",23),O.fc("click",function(){return e.finish()}),O.Ic(38),O.Ub(),O.Ub()),2&t&&(O.Cb(2),O.Kc("Action of KPI Objective (",e.data.topic,")"),O.Cb(12),O.oc("ngModel",e.objective),O.Cb(5),O.oc("ngModel",e.target),O.Cb(5),O.oc("value",e.deadline),O.Cb(2),O.oc("dataSource",e.gridData)("allowResizing",!0)("toolbar",e.toolbarOptions)("editSettings",e.editSettings)("allowExcelExport",!0),O.Cb(3),O.oc("allowEditing",!1),O.Cb(3),O.oc("visible",!1),O.Cb(4),O.Jc("Close"),O.Cb(2),O.Jc("Finish"))},directives:[h.a,h.f,h.i,d.a,v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c],styles:["#title[_ngcontent-%COMP%]{border:2px solid #ffc107!important;font-family:Helvetica Neue,Helvetica,Arial,sans-serif,-apple-system,BlinkMacSystemFont}#title[_ngcontent-%COMP%], #title.form-control[_ngcontent-%COMP%]:focus{color:#212529!important;font-size:14px!important}#title.form-control[_ngcontent-%COMP%]:focus{background-color:#fff!important;border-color:#ffc107!important;outline:0!important;box-shadow:0 0 0 .2rem rgba(32,168,216,.25)}#deadline[_ngcontent-%COMP%]   .e-input-group[_ngcontent-%COMP%], #deadline[_ngcontent-%COMP%]   .e-input-group[_ngcontent-%COMP%]   .e-control-wrapper[_ngcontent-%COMP%]   .e-date-wrapper[_ngcontent-%COMP%]{border:2px solid #ffc107!important}"]}),ze),$e=["grid"];function Ye(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic();O.Kc(" ",n.NO(i.index)," ")}}function qe(t,e){if(1&t&&(O.Vb(0,"ul",31),O.Vb(1,"li"),O.Ic(2),O.Ub(),O.Ub()),2&t){var i=e.$implicit;O.Cb(2),O.Jc(i)}}function We(t,e){1&t&&O.Gc(0,qe,3,1,"ul",30),2&t&&O.oc("ngForOf",e.$implicit.l0ActionList)}function Xe(t,e){if(1&t&&O.Qb(0,"e-column",32),2&t){var i=e.$implicit;O.oc("field",i.field)("headerText",i.headerText)}}function Ze(t,e){if(1&t&&(O.Vb(0,"table",33),O.Vb(1,"thead"),O.Vb(2,"tr"),O.Vb(3,"th",34),O.Ic(4,"Functional leader comment"),O.Qb(5,"br"),O.Ic(6," \u529f\u80fd\u4e3b\u7ba1\u8a55\u8a9e"),O.Ub(),O.Vb(7,"th",35),O.Ic(8),O.Ub(),O.Vb(9,"th",34),O.Ic(10,"Functional leader score"),O.Qb(11,"br"),O.Ic(12,"\u529f\u80fd\u4e3b\u7ba1\u8a55\u5206"),O.Ub(),O.Vb(13,"th",36),O.Ic(14),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic();O.Cb(8),O.Jc(i.functionalLeaderCommentContent||""),O.Cb(6),O.Jc(i.functionalLeaderAttitudeScoreData||0)}}function ti(t,e){1&t&&(O.Vb(0,"div",37),O.Vb(1,"strong",38),O.Ic(2," Please ask functional leader to score attitude score L0!"),O.Ub(),O.Ub())}var ei,ii,ni=((ii=function(){function t(e,i,n,o,c,r,l,d,u){var b=this;s(this,t),this.activeModal=e,this.service=i,this.kpiScoreService=n,this.attitudeScoreService=o,this.kpiService=c,this.commentService=r,this.alertify=l,this.todolistService=d,this.utilitiesService=u,this.toolbarOptions=["Search"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.fields={text:"point",value:"point"},this.filterSettings={type:"Excel"},this.content="",this.quarterlySettingsData=[],this.columns=[],this.hasFunctionalLeader=!1,this.queryCellInfoEvent=function(t){var e,i,n=t.data,o=a(b.quarterlySettingsData);try{var c=function(){var o=i.value;(""+o).includes(t.column.field)&&(t.cell.innerText=(null===(e=n.resultOfMonth.filter(function(t){return t.month===o})[0])||void 0===e?void 0:e.title)||"N/A")};for(o.s();!(i=o.n()).done;)c()}catch(r){o.e(r)}finally{o.f()}}}return u(t,[{key:"ngOnInit",value:function(){this.hasFunctionalLeader=this.data.hasFunctionalLeader,this.isQuarter2Or4=this.data.period==xe.Q2||this.data.period==xe.Q4,this.kpiScoreModel={id:0,periodTypeId:this.data.periodTypeId,period:this.data.period,point:this.point,scoreBy:+JSON.parse(localStorage.getItem("user")).id,modifiedTime:null,createdTime:(new Date).toDateString(),accountId:+JSON.parse(localStorage.getItem("user")).id,scoreType:this.scoreType},this.commentModel={id:0,content:this.content,createdBy:+JSON.parse(localStorage.getItem("user")).id,accountId:+JSON.parse(localStorage.getItem("user")).id,modifiedBy:null,createdTime:(new Date).toDateString(),modifiedTime:null,period:this.data.period,periodTypeId:this.data.periodTypeId,scoreType:this.scoreType,commentTypeId:we.SelfEvaluation},!0===this.hasFunctionalLeader&&(this.getFunctionalLeaderCommentByAccountId(),this.getFunctionalLeaderAttitudeScoreByAccountId()),this.getQuarterlySetting(),this.loadData(),this.loadKPIData(),this.getFisrtSelfScoreByAccountId(),this.getL0SelfEvaluationCommentByAccountId()}},{key:"getMonthListInCurrentQuarter",value:function(t){return["Result of Jan.","Result of Feb.","Result of Mar.","Result of Apr.","Result of May.","Result of Jun.","Result of Jul.","Result of Aug.","Result of Sep.","Result of Oct.","Result of Nov.","Result of Dec."][t-1]}},{key:"getQuarterlySetting",value:function(){this.quarterlySettingsData=this.data.settings||[],this.columns=[];var t,e=a(this.quarterlySettingsData);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.columns.push({field:"".concat(i),headerText:this.getMonthListInCurrentQuarter(i),month:i})}}catch(n){e.e(n)}finally{e.f()}}},{key:"loadData",value:function(){var t=this;this.service.getAllKPIScoreL0ByPeriod(this.data.period).subscribe(function(e){t.gridData=e})}},{key:"getFunctionalLeaderAttitudeScoreByAccountId",value:function(){var t=this;this.attitudeScoreService.getFunctionalLeaderAttitudeScoreByAccountId(+JSON.parse(localStorage.getItem("user")).id,this.data.halfYearId,this.data.period).subscribe(function(e){t.functionalLeaderAttitudeScoreData=(null==e?void 0:e.point)||0,t.functionalLeaderScored=0!==t.functionalLeaderAttitudeScoreData})}},{key:"getFisrtSelfScoreByAccountId",value:function(){var t=this;this.kpiScoreService.getFisrtSelfScoreByAccountId(+JSON.parse(localStorage.getItem("user")).id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.point=null==e?void 0:e.point,t.kpiScoreModel.id=null==e?void 0:e.id})}},{key:"getL0SelfEvaluationCommentByAccountId",value:function(){var t=this;this.commentService.getL0SelfEvaluationCommentByAccountId(+JSON.parse(localStorage.getItem("user")).id,this.data.periodTypeId,this.data.period).subscribe(function(e){t.content=null==e?void 0:e.content,t.commentModel.id=null==e?void 0:e.id})}},{key:"getFunctionalLeaderCommentByAccountId",value:function(){var t=this;this.commentService.getFunctionalLeaderCommentByAccountId(+JSON.parse(localStorage.getItem("user")).id,this.data.halfYearId,this.data.period).subscribe(function(e){t.functionalLeaderCommentContent=null==e?void 0:e.content})}},{key:"loadKPIData",value:function(){var t=this;this.kpiService.getAll().subscribe(function(e){t.kpiData=e})}},{key:"addKPIScore",value:function(){return this.kpiScoreModel.point=this.point,this.kpiScoreService.add(this.kpiScoreModel)}},{key:"addComment",value:function(){return this.commentModel.content=this.content,this.commentService.add(this.commentModel)}},{key:"finish",value:function(){if(0!=this.point&&this.utilitiesService.isUndefinedOrNullOrEmpty(this.content))this.alertify.warning("Please leave a Self - Evaluation! <br>Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0);else if(0!==this.point||this.utilitiesService.isUndefinedOrNullOrEmpty(this.content)){var t=this.addKPIScore(),e=this.addComment();Object(Pe.a)([t,e]).subscribe(function(t){console.log(t),t.map(function(t){return t.success})})}else this.alertify.warning("Please choose a special score. <br>Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0)}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}}]),t}()).\u0275fac=function(t){return new(t||ii)(O.Pb(N.a),O.Pb(Me),O.Pb(De),O.Pb(je),O.Pb(Ae),O.Pb(Oe),O.Pb(V.a),O.Pb(Me),O.Pb(G.a))},ii.\u0275cmp=O.Jb({type:ii,selectors:[["app-self-score"]],viewQuery:function(t,e){var i;1&t&&O.Mc($e,1),2&t&&O.wc(i=O.gc())&&(e.grid=i.first)},inputs:{data:"data",periodTypeCode:"periodTypeCode",scoreType:"scoreType"},decls:74,vars:18,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["allowTextWrap","true","gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","toolbar","pageSettings","allowExcelExport","queryCellInfo"],["grid",""],["field","#","headerText","#","textAlign","Center","width","30","type","number"],["template",""],["field","objective","headerText","KPI Objective","type","string"],["field","l0TargetList","headerText","L0 Target"],["field","l0ActionList","headerText","L0 Action"],["ngFor","",3,"ngForOf"],[1,"row","mt-2","d-flex","justify-content-center"],[1,"col-md-12"],[1,"table","table-bordered"],["scope","col"],["class","table",4,"ngIf"],["class","alert alert-danger text-center","role","alert",4,"ngIf"],[1,"table",2,"border","none"],["scope","col",1,"text-center",2,"border","none","width","60%","padding","0"],["scope","col",1,"text-center",2,"border","none","width","20%","padding","0"],[2,"border","none"],[1,"form-group"],["id","comment","rows","6","type","text","placeholder","Type something!",1,"form-control",3,"ngModel","ngModelChange"],[3,"dataSource","value","fields","allowFiltering","valueChange"],["accountGroupDropdownlist",""],[1,"modal-footer","justify-content-end"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"disabled","click"],["style","padding: 0 0 0 15px;",4,"ngFor","ngForOf"],[2,"padding","0 0 0 15px"],[3,"field","headerText"],[1,"table"],["scope","col",2,"width","20%"],["scope","col",2,"width","50%"],["scope","col",2,"width","10%","text-align","center","font-size","xx-large"],["role","alert",1,"alert","alert-danger","text-center"],[1,"text-center"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"h4",1),O.Ic(2,"Self-score quarter \u6bcf\u5b63\u81ea\u8a55"),O.Ub(),O.Vb(3,"button",2),O.fc("click",function(){return e.activeModal.dismiss("Cross click")}),O.Vb(4,"span",3),O.Ic(5,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"div",4),O.Vb(7,"ejs-grid",5,6),O.fc("queryCellInfo",function(t){return e.queryCellInfoEvent(t)}),O.Vb(9,"e-columns"),O.Vb(10,"e-column",7),O.Gc(11,Ye,1,1,"ng-template",null,8,O.Hc),O.Ub(),O.Qb(13,"e-column",9),O.Qb(14,"e-column",10),O.Vb(15,"e-column",11),O.Gc(16,We,1,1,"ng-template",null,8,O.Hc),O.Ub(),O.Gc(18,Xe,1,2,"ng-template",12,8,O.Hc),O.Ub(),O.Ub(),O.Vb(20,"div",13),O.Vb(21,"div",14),O.Vb(22,"table",15),O.Vb(23,"thead"),O.Vb(24,"tr"),O.Vb(25,"th",16),O.Ic(26,"5>= X >=4.5 \u8d85\u51fa\u9810\u671f"),O.Ub(),O.Vb(27,"th",16),O.Ic(28,"4.5> X >=4 \u7b26\u5408\u9810\u671f"),O.Ub(),O.Vb(29,"th",16),O.Ic(30,"4 > X >=3 \u5927\u90e8\u5206\u7b26\u5408\u9810\u671f"),O.Ub(),O.Vb(31,"th",16),O.Ic(32,"3> X >=2 \u90e8\u5206\u7b26\u5408\u9810\u671f"),O.Ub(),O.Vb(33,"th",16),O.Ic(34,"2> X >= 0 \u4e0d\u4f73\u4e0d\u7b26\u5408\u9810\u671f"),O.Ub(),O.Ub(),O.Ub(),O.Vb(35,"tbody"),O.Vb(36,"tr"),O.Vb(37,"td"),O.Ic(38,"Exceed expectation"),O.Ub(),O.Vb(39,"td"),O.Ic(40,"Meet expectation"),O.Ub(),O.Vb(41,"td"),O.Ic(42,"Mostly meet expectation"),O.Ub(),O.Vb(43,"td"),O.Ic(44,"Partly meet expectation"),O.Ub(),O.Vb(45,"td"),O.Ic(46,"Poorly or not meet expectation"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(47,"div",13),O.Vb(48,"div",14),O.Gc(49,Ze,15,2,"table",17),O.Gc(50,ti,3,0,"div",18),O.Vb(51,"table",19),O.Vb(52,"thead"),O.Vb(53,"tr"),O.Vb(54,"th",20),O.Ic(55,"Self - Evaluation \u81ea\u6211\u8a55\u50f9"),O.Ub(),O.Vb(56,"th",21),O.Ic(57,"Self-Score "),O.Qb(58,"br"),O.Ic(59,"\u81ea\u8a55"),O.Ub(),O.Ub(),O.Ub(),O.Vb(60,"tbody"),O.Vb(61,"tr"),O.Vb(62,"td",22),O.Vb(63,"div",23),O.Vb(64,"textarea",24),O.fc("ngModelChange",function(t){return e.content=t}),O.Ub(),O.Ub(),O.Ub(),O.Vb(65,"td",22),O.Vb(66,"div",23),O.Vb(67,"ejs-dropdownlist",25,26),O.fc("valueChange",function(t){return e.point=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(69,"div",27),O.Vb(70,"button",28),O.fc("click",function(){return e.activeModal.close("Close click")}),O.Ic(71),O.Ub(),O.Vb(72,"button",29),O.fc("click",function(){return e.finish()}),O.Ic(73),O.Ub(),O.Ub(),O.Ub()),2&t&&(O.Cb(7),O.oc("dataSource",e.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings)("allowExcelExport",!0),O.Cb(11),O.oc("ngForOf",e.columns),O.Cb(31),O.oc("ngIf",e.hasFunctionalLeader),O.Cb(1),O.oc("ngIf",e.hasFunctionalLeader&&!1===e.functionalLeaderScored),O.Cb(14),O.oc("ngModel",e.content),O.Cb(3),O.oc("dataSource",e.kpiData)("value",e.point)("fields",e.fields)("allowFiltering",!0),O.Cb(4),O.Jc("Close"),O.Cb(1),O.oc("disabled",e.hasFunctionalLeader&&!1===e.functionalLeaderScored),O.Cb(1),O.Jc("Finish"))},directives:[v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c,b.l,b.m,h.a,h.f,h.i,m.b],styles:["#comment[_ngcontent-%COMP%]{border:2px solid #ffc107!important;font-family:Helvetica Neue,Helvetica,Arial,sans-serif,-apple-system,BlinkMacSystemFont}#comment[_ngcontent-%COMP%], #comment.form-control[_ngcontent-%COMP%]:focus{color:#212529!important;font-size:14px!important}#comment.form-control[_ngcontent-%COMP%]:focus{background-color:#fff!important;border-color:#ffc107!important;outline:0!important;box-shadow:0 0 0 .2rem rgba(32,168,216,.25)}.e-input-group.e-control-wrapper[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error), .e-input-group[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error){border:2px solid #ffc107!important}"]}),ii),oi=((ei=function(t){e(o,t);var i=n(o);function o(t,e,n){return s(this,o),i.call(this,t,"ResultOfMonth",e,n)}return u(o,[{key:"getAllByMonth",value:function(t,e){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetAllByMonth?objectiveId=").concat(t,"&currentTime=").concat(e),{}).pipe(Object(R.a)(this.handleError))}},{key:"updateResultOfMonth",value:function(t){return this.http.put("".concat(this.env.apiUrl).concat(this.entity,"/UpdateResultOfMonth"),t).pipe(Object(R.a)(this.handleError))}}]),o}(te.a)).\u0275fac=function(t){return new(t||ei)(O.cc(S.b),O.cc(G.a),O.cc(M.a))},ei.\u0275prov=O.Lb({token:ei,factory:ei.\u0275fac,providedIn:"root"}),ei),ci=["grid"];function ai(t,e){if(1&t&&(O.Vb(0,"li"),O.Ic(1),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.Jc(i.entity.action)}}function ri(t,e){if(1&t&&(O.Vb(0,"ul",20),O.Gc(1,ai,2,1,"li",21),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.oc("ngForOf",i.childNodes[0].childNodes)}}function li(t,e){if(1&t){var i=O.Wb();O.Vb(0,"table",22),O.Vb(1,"thead"),O.Vb(2,"tr"),O.Vb(3,"th",23),O.Ic(4,"GHR Comment"),O.Ub(),O.Ub(),O.Ub(),O.Vb(5,"tbody"),O.Vb(6,"tr"),O.Vb(7,"td",24),O.Vb(8,"div",14),O.Vb(9,"textarea",25),O.fc("ngModelChange",function(t){return O.Ac(i),O.ic().content=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub()}if(2&t){var n=O.ic();O.Cb(9),O.oc("ngModel",n.content)}}var si,di,ui,bi,hi,pi=((hi=function(){function t(e,i,n,o,c,a,r){s(this,t),this.activeModal=e,this.service=i,this.todolistService=n,this.alertify=o,this.commentService=c,this.resultOfMonthService=a,this.datePipe=r,this.toolbarOptions=["Search"],this.toolbarOptions2=[""],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"}}return u(t,[{key:"ngOnInit",value:function(){this.currentTimeRequest=this.datePipe.transform(this.currentTime,"YYYY-MM-dd HH:mm"),this.title="",this.isReject&&this.getGHRCommentByAccountId(),this.loadCurrentResultOfMonthData(),this.loadData(),this.model={id:0,objectiveId:this.data.id,title:"",createdBy:+JSON.parse(localStorage.getItem("user")).id,period:this.data.period}}},{key:"getMonthText",value:function(){return["Result of Jan.","Result of Feb.","Result of Mar.","Result of Apr.","Result of May.","Result of Jun.","Result of Jul.","Result of Aug.","Result of Sep.","Result of Oct.","Result of Nov.","Result of Dec."][this.currentTime.getMonth()]}},{key:"getTitleText",value:function(){return["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."][this.currentTime.getMonth()]}},{key:"loadData",value:function(){var t=this;this.todolistService.getAllByObjectiveIdAsTree(this.data.id).subscribe(function(e){t.gridData=e})}},{key:"getGHRCommentByAccountId",value:function(){var t=this;this.commentService.getGHRCommentByAccountId(+JSON.parse(localStorage.getItem("user")).id,this.data.quarterPeriodTypeId,this.data.quarter).subscribe(function(e){t.content=null==e?void 0:e.content})}},{key:"loadCurrentResultOfMonthData",value:function(){var t=this;this.resultOfMonthService.getAllByMonth(this.data.id,this.currentTimeRequest).subscribe(function(e){var i;t.gridResultOfMonthData=e||[],t.title=null===(i=e[0])||void 0===i?void 0:i.title})}},{key:"updateResultOfMonth",value:function(){var t,e=this,i=this.gridResultOfMonthData||[];if(this.title){this.model.title=this.title,this.model.id=(null===(t=i[0])||void 0===t?void 0:t.id)||0;var n=this.resultOfMonthService.updateResultOfMonth(this.model),o=this.todolistService.disableReject([this.data.todolistId]),c=[n];this.isReject&&c.push(o),Object(Pe.a)(c).subscribe(function(t){console.log(t),t.map(function(t){return t.success})},function(t){e.alertify.warning("Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0)})}else this.alertify.warning("Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0)}},{key:"finish",value:function(){this.updateResultOfMonth()}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}}]),t}()).\u0275fac=function(t){return new(t||hi)(O.Pb(N.a),O.Pb(ee),O.Pb(Me),O.Pb(V.a),O.Pb(Oe),O.Pb(oi),O.Pb(b.e))},hi.\u0275cmp=O.Jb({type:hi,selectors:[["app-update-result"]],viewQuery:function(t,e){var i;1&t&&O.Mc(ci,1),2&t&&O.wc(i=O.gc())&&(e.grid=i.first)},inputs:{data:"data",isReject:"isReject",currentTime:"currentTime"},features:[O.Bb([b.e])],decls:27,vars:11,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],[1,"d-flex"],[1,"flex-fill",2,"width","70%","padding","5px 0 5px 5px"],["allowTextWrap","true","allowTextWrap","true","gridLines","Both",3,"dataSource","allowResizing","showColumnMenu","allowExcelExport","toolbar"],["grid",""],["field","entity.action","headerText","Your Objective","type","string"],["field","action","headerText","Action"],["template",""],["class","table ","style","border: none;",4,"ngIf"],[1,"flex-fill",2,"width","30%","padding","0 5px 0 5px"],[1,"form-group"],["for","title",1,"d-flex","justify-content-center",2,"font-weight","Bold","font-size","14px","margin-top","52px"],["id","title","rows","10","type","text","placeholder","Type something!",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer","justify-content-end"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[2,"padding","0 0 0 15px"],[4,"ngFor","ngForOf"],[1,"table",2,"border","none"],["scope","col",1,"text-center",2,"border","none","width","70%","padding","0"],[2,"border","none"],["id","comment","rows","6","type","text","placeholder","Type something!",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"h4",1),O.Ic(2),O.Ub(),O.Vb(3,"button",2),O.fc("click",function(){return e.activeModal.dismiss("Cross click")}),O.Vb(4,"span",3),O.Ic(5,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"div",4),O.Vb(7,"div",5),O.Vb(8,"div",6),O.Vb(9,"ejs-grid",7,8),O.Vb(11,"e-columns"),O.Qb(12,"e-column",9),O.Vb(13,"e-column",10),O.Gc(14,ri,2,1,"ng-template",null,11,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Gc(16,li,10,1,"table",12),O.Ub(),O.Vb(17,"div",13),O.Vb(18,"div",14),O.Vb(19,"label",15),O.Ic(20),O.Ub(),O.Vb(21,"textarea",16),O.fc("ngModelChange",function(t){return e.title=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(22,"div",17),O.Vb(23,"button",18),O.fc("click",function(){return e.activeModal.close("Close click")}),O.Ic(24),O.Ub(),O.Vb(25,"button",19),O.fc("click",function(){return e.finish()}),O.Ic(26),O.Ub(),O.Ub()),2&t&&(O.Cb(2),O.Kc("Update result of KPI Objective (",e.data.topic,")"),O.Cb(7),O.oc("dataSource",e.gridData)("allowResizing",!0)("showColumnMenu",!0)("allowExcelExport",!0)("toolbar",e.toolbarOptions),O.Cb(7),O.oc("ngIf",e.isReject),O.Cb(4),O.Kc("Result of ",e.data.topic.split(" - ")[0],""),O.Cb(1),O.oc("ngModel",e.title),O.Cb(3),O.Jc("Close"),O.Cb(2),O.Jc("Finish"))},directives:[v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c,b.m,h.a,h.f,h.i,b.l],styles:["#title[_ngcontent-%COMP%]{border:2px solid #ffc107!important;font-family:Helvetica Neue,Helvetica,Arial,sans-serif,-apple-system,BlinkMacSystemFont}#title[_ngcontent-%COMP%], #title.form-control[_ngcontent-%COMP%]:focus{color:#212529!important;font-size:14px!important}#title.form-control[_ngcontent-%COMP%]:focus{background-color:#fff!important;border-color:#ffc107!important;outline:0!important;box-shadow:0 0 0 .2rem rgba(32,168,216,.25)}"]}),hi),fi=((bi=function(t){e(o,t);var i=n(o);function o(t,e,n){return s(this,o),i.call(this,t,"SpecialScore",e,n)}return o}(te.a)).\u0275fac=function(t){return new(t||bi)(O.cc(S.b),O.cc(G.a),O.cc(M.a))},bi.\u0275prov=O.Lb({token:bi,factory:bi.\u0275fac,providedIn:"root"}),bi),gi=((ui=function(t){e(o,t);var i=n(o);function o(t,e,n){return s(this,o),i.call(this,t,"Contribution",e,n)}return u(o,[{key:"getFisrtByAccountId",value:function(t,e,i,n){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetFisrtByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i,"&scoreType=").concat(n),{}).pipe(Object(R.a)(this.handleError))}},{key:"getL1CommentByAccountId",value:function(t,e,i){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetL1CommentByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i),{}).pipe(Object(R.a)(this.handleError))}}]),o}(te.a)).\u0275fac=function(t){return new(t||ui)(O.cc(S.b),O.cc(G.a),O.cc(M.a))},ui.\u0275prov=O.Lb({token:ui,factory:ui.\u0275fac,providedIn:"root"}),ui),mi=((di=function(t){e(o,t);var i=n(o);function o(t,e,n){return s(this,o),i.call(this,t,"Attitude",e,n)}return o}(te.a)).\u0275fac=function(t){return new(t||di)(O.cc(S.b),O.cc(G.a),O.cc(M.a))},di.\u0275prov=O.Lb({token:di,factory:di.\u0275fac,providedIn:"root"}),di),vi=((si=function(t){e(o,t);var i=n(o);function o(t,e,n){return s(this,o),i.call(this,t,"SpecialContributionScore",e,n)}return u(o,[{key:"getFisrtByObjectiveIdAndScoreBy",value:function(t,e){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetFisrtByObjectiveIdAndScoreBy?objectiveId=").concat(t,"&scoreby=").concat(e),{}).pipe(Object(R.a)(this.handleError))}},{key:"getFisrtByAccountId",value:function(t,e,i,n){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetFisrtByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i,"&scoreType=").concat(n),{}).pipe(Object(R.a)(this.handleError))}},{key:"getSpecialScoreByAccountId",value:function(t,e,i,n){return this.http.get("".concat(this.env.apiUrl).concat(this.entity,"/GetSpecialScoreByAccountId?accountId=").concat(t,"&periodTypeId=").concat(e,"&period=").concat(i,"&scoreType=").concat(n),{}).pipe(Object(R.a)(this.handleError))}}]),o}(te.a)).\u0275fac=function(t){return new(t||si)(O.cc(S.b),O.cc(G.a),O.cc(M.a))},si.\u0275prov=O.Lb({token:si,factory:si.\u0275fac,providedIn:"root"}),si),yi=["grid"];function Ii(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic();O.Kc(" ",n.NO(i.index)," ")}}function Si(t,e){if(1&t&&(O.Vb(0,"li"),O.Ic(1),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.Jc(i)}}function Ui(t,e){if(1&t&&(O.Vb(0,"ul",29),O.Gc(1,Si,2,1,"li",30),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.oc("ngForOf",i.l0ActionList)}}function Ci(t,e){if(1&t&&O.Qb(0,"e-column",31),2&t){var i=e.$implicit;O.oc("field",i.field)("headerText",i.headerText)}}function Vi(t,e){if(1&t&&(O.Vb(0,"table",32),O.Vb(1,"thead"),O.Vb(2,"tr"),O.Vb(3,"th",33),O.Ic(4,"Functional leader comment"),O.Qb(5,"br"),O.Ic(6," \u529f\u80fd\u4e3b\u7ba1\u8a55\u8a9e"),O.Ub(),O.Vb(7,"th",34),O.Ic(8),O.Ub(),O.Vb(9,"th",33),O.Ic(10,"Functional leader score"),O.Qb(11,"br"),O.Ic(12,"\u529f\u80fd\u4e3b\u7ba1\u8a55\u5206"),O.Ub(),O.Vb(13,"th",35),O.Ic(14),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic();O.Cb(8),O.Jc(i.functionalLeaderCommentContent||""),O.Cb(6),O.Jc(i.functionalLeaderAttitudeScoreData||0)}}var ki,Ti=((ki=function(){function t(e,i,n,o,c,r,l,d,u,b){var h=this;s(this,t),this.activeModal=e,this.service=i,this.attitudeScoreService=n,this.attitudeService=o,this.contributionService=c,this.specialScoreService=r,this.specialContributionScoreService=l,this.commentService=d,this.alertify=u,this.utilitiesService=b,this.toolbarOptions=["Search"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.specialPoint=0,this.fields={text:"point",value:"point"},this.filterSettings={type:"Excel"},this.content="",this.specialContent="",this.commentContent="",this.queryCellInfoEvent=function(t){var e,i,n=t.data,o=a(h.halfYearSettingsData);try{var c=function(){var o=i.value;(""+o).includes(t.column.field)&&(t.cell.innerText=(null===(e=n.resultOfMonth.filter(function(t){return t.month===o})[0])||void 0===e?void 0:e.title)||"N/A")};for(o.s();!(i=o.n()).done;)c()}catch(r){o.e(r)}finally{o.f()}}}return u(t,[{key:"ngOnInit",value:function(){this.hasFunctionalLeader=this.data.hasFunctionalLeader,this.attitudeScoreModel={id:0,periodTypeId:this.data.periodTypeId,period:this.data.period,point:this.point,accountId:this.data.id,scoreBy:+JSON.parse(localStorage.getItem("user")).id,createdTime:(new Date).toDateString(),modifiedTime:null,scoreType:this.scoreType},this.specialContributionScoreModel={id:0,periodTypeId:this.data.periodTypeId,period:this.data.period,point:this.specialPoint,accountId:this.data.id,scoreBy:+JSON.parse(localStorage.getItem("user")).id,createdTime:(new Date).toDateString(),modifiedTime:null,scoreType:this.scoreType},this.contributionModel={id:0,content:this.content,createdBy:+JSON.parse(localStorage.getItem("user")).id,accountId:this.data.id,modifiedBy:null,createdTime:(new Date).toDateString(),modifiedTime:null,periodTypeId:this.data.periodTypeId,period:this.data.period,scoreType:this.scoreType},this.commentModel={id:0,content:this.content,createdBy:+JSON.parse(localStorage.getItem("user")).id,accountId:this.data.id,modifiedBy:null,createdTime:(new Date).toDateString(),modifiedTime:null,period:this.data.period,periodTypeId:this.data.periodTypeId,scoreType:this.scoreType,commentTypeId:we.SelfEvaluation},!0===this.hasFunctionalLeader&&(this.getFunctionalLeaderCommentByAccountId(),this.getFunctionalLeaderAttitudeScoreByAccountId()),this.getHalfYearSetting(),this.loadData(),this.loadAttitudeScoreData(),this.loadAttitudeData(),this.loadSpecialScoreData(),this.getFisrtByObjectiveIdAndScoreBy(),this.getFisrtContributionByObjectiveId(),this.getFisrtCommentByObjectiveId(),this.getFisrtSpecialContributionScoreByObjectiveIdAndScoreBy()}},{key:"getMonthListInCurrentQuarter",value:function(t){return["Result of Jan.","Result of Feb.","Result of Mar.","Result of Apr.","Result of May.","Result of Jun.","Result of Jul.","Result of Aug.","Result of Sep.","Result of Oct.","Result of Nov.","Result of Dec."][t-1]}},{key:"getHalfYearSetting",value:function(){this.halfYearSettingsData=this.data.settings||[],this.columns=[];var t,e=a(this.halfYearSettingsData);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.columns.push({field:"".concat(i),headerText:this.getMonthListInCurrentQuarter(i),month:i})}}catch(n){e.e(n)}finally{e.f()}}},{key:"loadData",value:function(){var t=this;this.service.getAllAttitudeScoreL1ByAccountId(this.data.id).subscribe(function(e){t.gridData=e})}},{key:"loadAttitudeScoreData",value:function(){var t=this;this.attitudeScoreService.getById(this.data.id).subscribe(function(e){t.attitudeScoreData=e})}},{key:"getFunctionalLeaderAttitudeScoreByAccountId",value:function(){var t=this;this.attitudeScoreService.getFunctionalLeaderAttitudeScoreByAccountId(this.data.id,this.data.periodTypeId,this.data.period).subscribe(function(e){t.functionalLeaderAttitudeScoreData=(null==e?void 0:e.point)||0})}},{key:"getFisrtByObjectiveIdAndScoreBy",value:function(){var t=this;this.attitudeScoreService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.point=null==e?void 0:e.point,t.attitudeScoreModel.id=null==e?void 0:e.id})}},{key:"getFisrtContributionByObjectiveId",value:function(){var t=this;this.contributionService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.content=null==e?void 0:e.content,t.contributionModel.id=null==e?void 0:e.id})}},{key:"getFunctionalLeaderCommentByAccountId",value:function(){var t=this;this.commentService.getFunctionalLeaderCommentByAccountId(this.data.id,this.data.periodTypeId,this.data.period).subscribe(function(e){t.functionalLeaderCommentContent=null==e?void 0:e.content})}},{key:"getFisrtCommentByObjectiveId",value:function(){var t=this;this.commentService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.commentContent=null==e?void 0:e.content,t.commentModel.id=null==e?void 0:e.id})}},{key:"getFisrtSpecialContributionScoreByObjectiveIdAndScoreBy",value:function(){var t=this;this.specialContributionScoreService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.specialPoint=(null==e?void 0:e.point)||0,t.specialContributionScoreModel.id=null==e?void 0:e.id})}},{key:"loadAttitudeData",value:function(){var t=this;this.attitudeService.getAll().subscribe(function(e){t.attitudeData=e})}},{key:"loadSpecialScoreData",value:function(){var t=this;this.specialScoreService.getAll().subscribe(function(e){t.specialScoreData=e})}},{key:"addComment",value:function(){return this.commentModel.content=this.commentContent,this.commentService.add(this.commentModel)}},{key:"addAttitudeScore",value:function(){return this.attitudeScoreModel.point=this.point,this.attitudeScoreService.add(this.attitudeScoreModel)}},{key:"addSpecialContributionScore",value:function(){return this.specialContributionScoreModel.point=this.specialPoint,this.specialContributionScoreService.add(this.specialContributionScoreModel)}},{key:"addContribution",value:function(){return this.contributionModel.content=this.content,this.contributionService.add(this.contributionModel)}},{key:"finish",value:function(){if(this.utilitiesService.isUndefinedOrNull(this.point))this.alertify.warning("Please choose a attitude score. <br>Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0);else if(this.utilitiesService.isUndefinedOrNullOrEmpty(this.commentContent))this.alertify.warning("Please leave a comment. <br>Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0);else if(0!=this.specialPoint&&this.utilitiesService.isUndefinedOrNullOrEmpty(this.content))this.alertify.warning("Please leave a special contribution or mistake! <br>Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0);else if(0!==this.specialPoint||this.utilitiesService.isUndefinedOrNullOrEmpty(this.content)){var t=this.addAttitudeScore(),e=this.addContribution(),i=this.addSpecialContributionScore(),n=this.addComment();Object(Pe.a)([t,e,i,n]).subscribe(function(t){console.log(t),t.map(function(t){return t.success})})}else this.alertify.warning("Please choose a special score. <br>Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0)}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}}]),t}()).\u0275fac=function(t){return new(t||ki)(O.Pb(N.a),O.Pb(Me),O.Pb(je),O.Pb(mi),O.Pb(gi),O.Pb(fi),O.Pb(vi),O.Pb(Oe),O.Pb(V.a),O.Pb(G.a))},ki.\u0275cmp=O.Jb({type:ki,selectors:[["app-attitude-score"]],viewQuery:function(t,e){var i;1&t&&O.Mc(yi,1),2&t&&O.wc(i=O.gc())&&(e.grid=i.first)},inputs:{data:"data",scoreType:"scoreType"},decls:91,vars:22,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["allowTextWrap","true","gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","toolbar","pageSettings","allowExcelExport","queryCellInfo"],["grid",""],["field","#","headerText","#","textAlign","Center","width","30","type","number"],["template",""],["field","objective","headerText","KPI Objective","type","string"],["field","l0TargetList","headerText","L0 Target","type","string"],["field","l0ActionList","headerText","L0 Action","type","string"],["ngFor","",3,"ngForOf"],[1,"row","mt-2","d-flex","justify-content-center"],[1,"col-md-12"],[1,"table","table-bordered"],["scope","col"],["class","table",4,"ngIf"],[1,"table",2,"border","none"],["scope","col",1,"text-center",2,"border","none","width","70%","padding","0"],["scope","col",1,"text-center",2,"border","none","width","30%","padding","0"],[2,"border","none"],[1,"form-group"],["id","comment","rows","6","type","text","placeholder","Type something!",1,"form-control",3,"ngModel","ngModelChange"],[3,"dataSource","value","fields","allowFiltering","valueChange"],["accountGroupDropdownlist",""],[1,"modal-footer","justify-content-end"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[2,"padding","0 0 0 8px"],[4,"ngFor","ngForOf"],[3,"field","headerText"],[1,"table"],["scope","col",2,"width","20%"],["scope","col",2,"width","50%"],["scope","col",2,"width","10%","text-align","center","font-size","xx-large"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"h4",1),O.Ic(2),O.Ub(),O.Vb(3,"button",2),O.fc("click",function(){return e.activeModal.dismiss("Cross click")}),O.Vb(4,"span",3),O.Ic(5,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"div",4),O.Vb(7,"ejs-grid",5,6),O.fc("queryCellInfo",function(t){return e.queryCellInfoEvent(t)}),O.Vb(9,"e-columns"),O.Vb(10,"e-column",7),O.Gc(11,Ii,1,1,"ng-template",null,8,O.Hc),O.Ub(),O.Qb(13,"e-column",9),O.Qb(14,"e-column",10),O.Vb(15,"e-column",11),O.Gc(16,Ui,2,1,"ng-template",null,8,O.Hc),O.Ub(),O.Gc(18,Ci,1,2,"ng-template",12,8,O.Hc),O.Ub(),O.Ub(),O.Vb(20,"div",13),O.Vb(21,"div",14),O.Vb(22,"table",15),O.Vb(23,"thead"),O.Vb(24,"tr"),O.Vb(25,"th",16),O.Ic(26,"\u5de5\u4f5c\u614b\u5ea6 = \u4e3b\u52d5\u7a4d\u6975 + \u6e9d\u901a\u53caEQ + \u914d\u5408\u5ea6"),O.Ub(),O.Vb(27,"th",16),O.Ic(28,"\u975e\u5e38\u597d 10 \u5206"),O.Ub(),O.Vb(29,"th",16),O.Ic(30,"\u8f03\u597d 8-9 \u5206"),O.Ub(),O.Vb(31,"th",16),O.Ic(32,"\u4e00\u822c 6-7 \u5206"),O.Ub(),O.Vb(33,"th",16),O.Ic(34,"\u8f03\u5dee 4-5 \u5206"),O.Ub(),O.Vb(35,"th",16),O.Ic(36,"\u6975\u5dee 3 \u5206\u4ee5\u4e0b"),O.Ub(),O.Ub(),O.Ub(),O.Vb(37,"tbody"),O.Vb(38,"tr"),O.Vb(39,"td"),O.Ic(40,"Attitude = Proactiveness + Communication & EQ + Cooperation"),O.Ub(),O.Vb(41,"td"),O.Ic(42,"Excellent 10 points"),O.Ub(),O.Vb(43,"td"),O.Ic(44,"Good 8-9 points"),O.Ub(),O.Vb(45,"td"),O.Ic(46,"Normal 6-7 points"),O.Ub(),O.Vb(47,"td"),O.Ic(48,"Not goo 4-5 points"),O.Ub(),O.Vb(49,"td"),O.Ic(50,"Poor 3 points or below"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(51,"div",13),O.Vb(52,"div",14),O.Gc(53,Vi,15,2,"table",17),O.Vb(54,"table",18),O.Vb(55,"thead"),O.Vb(56,"tr"),O.Vb(57,"th",19),O.Ic(58,"Comment"),O.Ub(),O.Vb(59,"th",20),O.Ic(60,"Attitude Score"),O.Ub(),O.Ub(),O.Ub(),O.Vb(61,"tbody"),O.Vb(62,"tr"),O.Vb(63,"td",21),O.Vb(64,"div",22),O.Vb(65,"textarea",23),O.fc("ngModelChange",function(t){return e.commentContent=t}),O.Ub(),O.Ub(),O.Ub(),O.Vb(66,"td",21),O.Vb(67,"div",22),O.Vb(68,"ejs-dropdownlist",24,25),O.fc("valueChange",function(t){return e.point=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(70,"table",18),O.Vb(71,"thead"),O.Vb(72,"tr"),O.Vb(73,"th",19),O.Ic(74,"\u91cd\u5927\u8ca2\u737b\u6216\u932f\u8aa4(\u5982\u6709) Special Contribution or Mistake(if any)"),O.Ub(),O.Vb(75,"th",20),O.Ic(76,"Special Score \u91cd\u5927\u8ca2\u737b\u6216\u932f\u8aa4(\u5982\u6709) "),O.Ub(),O.Ub(),O.Ub(),O.Vb(77,"tbody"),O.Vb(78,"tr"),O.Vb(79,"td",21),O.Vb(80,"div",22),O.Vb(81,"textarea",23),O.fc("ngModelChange",function(t){return e.content=t}),O.Ub(),O.Ub(),O.Ub(),O.Vb(82,"td",21),O.Vb(83,"div",22),O.Vb(84,"ejs-dropdownlist",24,25),O.fc("valueChange",function(t){return e.specialPoint=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(86,"div",26),O.Vb(87,"button",27),O.fc("click",function(){return e.activeModal.close("Close click")}),O.Ic(88),O.Ub(),O.Vb(89,"button",28),O.fc("click",function(){return e.finish()}),O.Ic(90),O.Ub(),O.Ub(),O.Ub()),2&t&&(O.Cb(2),O.Kc("Self-score of KPI Objective (",e.data.objective,")"),O.Cb(5),O.oc("dataSource",e.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings)("allowExcelExport",!0),O.Cb(11),O.oc("ngForOf",e.columns),O.Cb(35),O.oc("ngIf",e.hasFunctionalLeader),O.Cb(12),O.oc("ngModel",e.commentContent),O.Cb(3),O.oc("dataSource",e.attitudeData)("value",e.point)("fields",e.fields)("allowFiltering",!0),O.Cb(13),O.oc("ngModel",e.content),O.Cb(3),O.oc("dataSource",e.specialScoreData)("value",e.specialPoint)("fields",e.fields)("allowFiltering",!0),O.Cb(4),O.Jc("Close"),O.Cb(2),O.Jc("Finish"))},directives:[v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c,b.l,b.m,h.a,h.f,h.i,m.b],styles:["#comment[_ngcontent-%COMP%]{border:2px solid #ffc107!important;font-family:Helvetica Neue,Helvetica,Arial,sans-serif,-apple-system,BlinkMacSystemFont}#comment[_ngcontent-%COMP%], #comment.form-control[_ngcontent-%COMP%]:focus{color:#212529!important;font-size:14px!important}#comment.form-control[_ngcontent-%COMP%]:focus{background-color:#fff!important;border-color:#ffc107!important;outline:0!important;box-shadow:0 0 0 .2rem rgba(32,168,216,.25)}.e-input-group.e-control-wrapper[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error), .e-input-group[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error){border:2px solid #ffc107!important}"]}),ki),xi=["grid"];function wi(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic();O.Kc(" ",n.NO(i.index)," ")}}function Mi(t,e){if(1&t&&(O.Vb(0,"li"),O.Ic(1),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.Jc(i)}}function Di(t,e){if(1&t&&(O.Vb(0,"ul",34),O.Gc(1,Mi,2,1,"li",35),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.oc("ngForOf",i.l0ActionList)}}function Ai(t,e){if(1&t&&O.Qb(0,"e-column",36),2&t){var i=e.$implicit;O.oc("field",i.field)("headerText",i.headerText)}}function Oi(t,e){if(1&t&&(O.Vb(0,"table",19),O.Vb(1,"thead"),O.Vb(2,"tr"),O.Vb(3,"th",20),O.Ic(4,"Functional leader comment"),O.Qb(5,"br"),O.Ic(6," \u529f\u80fd\u4e3b\u7ba1\u8a55\u8a9e"),O.Ub(),O.Vb(7,"th",21),O.Ic(8),O.Ub(),O.Vb(9,"th",20),O.Ic(10,"Functional leader score"),O.Qb(11,"br"),O.Ic(12,"\u529f\u80fd\u4e3b\u7ba1\u8a55\u5206"),O.Ub(),O.Vb(13,"th",22),O.Ic(14),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic();O.Cb(8),O.Jc(i.functionalLeaderCommentContent||""),O.Cb(6),O.Jc(i.functionalLeaderAttitudeScoreData||0)}}function Pi(t,e){1&t&&(O.Vb(0,"div",37),O.Vb(1,"strong",38),O.Ic(2," Please ask functional leader to score attitude score L0!"),O.Ub(),O.Ub())}function ji(t,e){1&t&&(O.Vb(0,"div",37),O.Vb(1,"strong",38),O.Ic(2," Please ask L1 to score attitude score L0."),O.Ub(),O.Ub())}var Li,Gi=((Li=function(){function t(e,i,n,o,c,r,l,d,u,b){var h=this;s(this,t),this.activeModal=e,this.service=i,this.attitudeScoreService=n,this.attitudeService=o,this.contributionService=c,this.specialScoreService=r,this.specialContributionScoreService=l,this.commentService=d,this.alertify=u,this.utilitiesService=b,this.toolbarOptions=["Search"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.specialPoint=0,this.fields={text:"point",value:"point"},this.filterSettings={type:"Excel"},this.content="",this.specialContent="",this.commentContent="",this.queryCellInfoEvent=function(t){var e,i,n=t.data,o=a(h.halfYearSettingsData);try{var c=function(){var o=i.value;(""+o).includes(t.column.field)&&(t.cell.innerText=(null===(e=n.resultOfMonth.filter(function(t){return t.month===o})[0])||void 0===e?void 0:e.title)||"N/A")};for(o.s();!(i=o.n()).done;)c()}catch(r){o.e(r)}finally{o.f()}}}return u(t,[{key:"ngOnInit",value:function(){this.hasFunctionalLeader=this.data.hasFunctionalLeader,this.attitudeScoreModel={id:0,periodTypeId:this.data.periodTypeId,period:this.data.period,point:this.point,accountId:this.data.id,scoreBy:+JSON.parse(localStorage.getItem("user")).id,createdTime:(new Date).toDateString(),modifiedTime:null,scoreType:this.scoreType},this.specialContributionScoreModel={id:0,periodTypeId:this.data.periodTypeId,period:this.data.period,point:this.specialPoint,accountId:this.data.id,scoreBy:+JSON.parse(localStorage.getItem("user")).id,createdTime:(new Date).toDateString(),modifiedTime:null,scoreType:this.scoreType},this.contributionModel={id:0,content:this.content,createdBy:+JSON.parse(localStorage.getItem("user")).id,accountId:this.data.id,modifiedBy:null,createdTime:(new Date).toDateString(),modifiedTime:null,periodTypeId:this.data.periodTypeId,period:this.data.period,scoreType:this.scoreType},this.commentModel={id:0,content:this.commentContent,createdBy:+JSON.parse(localStorage.getItem("user")).id,accountId:this.data.id,modifiedBy:null,createdTime:(new Date).toDateString(),modifiedTime:null,period:this.data.period,periodTypeId:this.data.periodTypeId,scoreType:this.scoreType,commentTypeId:we.Comment},!0===this.hasFunctionalLeader&&(this.getFunctionalLeaderCommentByAccountId(),this.getFunctionalLeaderAttitudeScoreByAccountId()),this.getHalfYearSetting(),this.loadData(),this.loadAttitudeScoreData(),this.loadAttitudeData(),this.loadSpecialScoreData(),this.getFisrtByObjectiveIdAndScoreBy(),this.getFisrtContributionByObjectiveId(),this.getFisrtCommentByObjectiveId(),this.getFisrtSpecialContributionScoreByObjectiveIdAndScoreBy(),this.getL1CommentContributionByAccountId(),this.getSpecialScoreByAccountId(),this.getL1CommentByAccountId(),this.getL1AttitudeScoreByAccountId()}},{key:"getMonthListInCurrentQuarter",value:function(t){return["Result of Jan.","Result of Feb.","Result of Mar.","Result of Apr.","Result of May.","Result of Jun.","Result of Jul.","Result of Aug.","Result of Sep.","Result of Oct.","Result of Nov.","Result of Dec."][t-1]}},{key:"getHalfYearSetting",value:function(){this.halfYearSettingsData=this.data.settings||[],this.columns=[];var t,e=a(this.halfYearSettingsData);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.columns.push({field:"".concat(i),headerText:this.getMonthListInCurrentQuarter(i),month:i})}}catch(n){e.e(n)}finally{e.f()}}},{key:"loadData",value:function(){var t=this;this.service.getAllAttitudeScoreL1ByAccountId(this.data.id).subscribe(function(e){t.gridData=e})}},{key:"loadAttitudeScoreData",value:function(){var t=this;this.attitudeScoreService.getById(this.data.id).subscribe(function(e){t.attitudeScoreData=e})}},{key:"getFunctionalLeaderAttitudeScoreByAccountId",value:function(){var t=this;this.attitudeScoreService.getFunctionalLeaderAttitudeScoreByAccountId(this.data.id,this.data.periodTypeId,this.data.period).subscribe(function(e){t.functionalLeaderAttitudeScoreData=(null==e?void 0:e.point)||0,t.functionalLeaderScored=t.functionalLeaderAttitudeScoreData>0})}},{key:"getL1AttitudeScoreByAccountId",value:function(){var t=this;this.attitudeScoreService.getL1AttitudeScoreByAccountId(this.data.id,this.data.periodTypeId,this.data.period).subscribe(function(e){t.l1AttitudeScoreData=(null==e?void 0:e.point)||0,t.l1Scored=t.l1AttitudeScoreData>0})}},{key:"getFisrtByObjectiveIdAndScoreBy",value:function(){var t=this;this.attitudeScoreService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.point=null==e?void 0:e.point,t.attitudeScoreModel.id=null==e?void 0:e.id})}},{key:"getFisrtContributionByObjectiveId",value:function(){var t=this;this.contributionService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.content=null==e?void 0:e.content,t.contributionModel.id=null==e?void 0:e.id})}},{key:"getFunctionalLeaderCommentByAccountId",value:function(){var t=this;this.commentService.getFunctionalLeaderCommentByAccountId(this.data.id,this.data.periodTypeId,this.data.period).subscribe(function(e){t.functionalLeaderCommentContent=null==e?void 0:e.content})}},{key:"getL1CommentByAccountId",value:function(){var t=this;this.commentService.getL1CommentByAccountId(this.data.id,this.data.periodTypeId,this.data.period).subscribe(function(e){t.l1CommentContent=null==e?void 0:e.content})}},{key:"getFisrtCommentByObjectiveId",value:function(){var t=this;this.commentService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.commentContent=null==e?void 0:e.content,t.commentModel.id=null==e?void 0:e.id})}},{key:"getSpecialScoreByAccountId",value:function(){var t=this;this.specialContributionScoreService.getSpecialScoreByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.specialContributionScore=(null==e?void 0:e.point)||0,t.specialContributionScored=0!==t.specialContributionScore})}},{key:"getL1CommentContributionByAccountId",value:function(){var t=this;this.contributionService.getL1CommentByAccountId(this.data.id,this.data.periodTypeId,this.data.period).subscribe(function(e){t.l1SpecialContributionContent=null==e?void 0:e.content})}},{key:"getFisrtSpecialContributionScoreByObjectiveIdAndScoreBy",value:function(){var t=this;this.specialContributionScoreService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.specialPoint=(null==e?void 0:e.point)||0,t.specialContributionScoreModel.id=null==e?void 0:e.id})}},{key:"loadAttitudeData",value:function(){var t=this;this.attitudeService.getAll().subscribe(function(e){t.attitudeData=e})}},{key:"loadSpecialScoreData",value:function(){var t=this;this.specialScoreService.getAll().subscribe(function(e){t.specialScoreData=e})}},{key:"addComment",value:function(){return this.commentModel.content=this.commentContent,this.commentService.add(this.commentModel)}},{key:"addAttitudeScore",value:function(){return this.attitudeScoreModel.point=this.point,this.attitudeScoreService.add(this.attitudeScoreModel)}},{key:"addSpecialContributionScore",value:function(){return this.specialContributionScoreModel.point=this.specialPoint,this.specialContributionScoreService.add(this.specialContributionScoreModel)}},{key:"addContribution",value:function(){return this.contributionModel.content=this.content,this.contributionService.add(this.contributionModel)}},{key:"finish",value:function(){if(this.utilitiesService.isUndefinedOrNull(this.point))this.alertify.warning("Please choose a attitude score. <br>Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0);else if(this.utilitiesService.isUndefinedOrNullOrEmpty(this.commentContent))this.alertify.warning("Please leave a comment. <br>Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0);else if(0!=this.specialPoint&&this.utilitiesService.isUndefinedOrNullOrEmpty(this.content))this.alertify.warning("Please leave a special contribution or mistake! <br>Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0);else if(0!==this.specialPoint||this.utilitiesService.isUndefinedOrNullOrEmpty(this.content)){var t=this.addAttitudeScore(),e=this.addContribution(),i=this.addSpecialContributionScore(),n=this.addComment();Object(Pe.a)([t,e,i,n]).subscribe(function(t){console.log(t),t.map(function(t){return t.success})})}else this.alertify.warning("Please choose a special score. <br>Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0)}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}}]),t}()).\u0275fac=function(t){return new(t||Li)(O.Pb(N.a),O.Pb(Me),O.Pb(je),O.Pb(mi),O.Pb(gi),O.Pb(fi),O.Pb(vi),O.Pb(Oe),O.Pb(V.a),O.Pb(G.a))},Li.\u0275cmp=O.Jb({type:Li,selectors:[["app-attitude-score-l2"]],viewQuery:function(t,e){var i;1&t&&O.Mc(xi,1),2&t&&O.wc(i=O.gc())&&(e.grid=i.first)},inputs:{data:"data",scoreType:"scoreType"},decls:123,vars:29,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["allowTextWrap","true","gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","toolbar","pageSettings","allowExcelExport","queryCellInfo"],["grid",""],["field","#","headerText","#","textAlign","Center","width","30","type","number"],["template",""],["field","objective","headerText","KPI Objective","type","string"],["field","l0TargetList","headerText","L0 Target","type","string"],["field","l0ActionList","headerText","L0 Action","type","string"],["ngFor","",3,"ngForOf"],[1,"row","mt-2","d-flex","justify-content-center"],[1,"col-md-12"],[1,"table","table-bordered"],["scope","col"],["class","table",4,"ngIf"],["class","alert alert-danger text-center","role","alert",4,"ngIf"],[1,"table"],["scope","col",2,"width","20%"],["scope","col",2,"width","50%"],["scope","col",2,"width","10%","text-align","center","font-size","xx-large"],[1,"table",2,"border","none"],["scope","col",1,"text-center",2,"border","none","width","70%","padding","0"],["scope","col",1,"text-center",2,"border","none","width","30%","padding","0"],[2,"border","none"],[1,"form-group"],["id","comment","rows","6","type","text","placeholder","Type something!",1,"form-control",3,"ngModel","ngModelChange"],[3,"dataSource","value","fields","allowFiltering","valueChange"],["accountGroupDropdownlist",""],[1,"modal-footer","justify-content-end"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"disabled","click"],[2,"padding","0 0 0 8px"],[4,"ngFor","ngForOf"],[3,"field","headerText"],["role","alert",1,"alert","alert-danger","text-center"],[1,"text-center"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"h4",1),O.Ic(2),O.Ub(),O.Vb(3,"button",2),O.fc("click",function(){return e.activeModal.dismiss("Cross click")}),O.Vb(4,"span",3),O.Ic(5,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"div",4),O.Vb(7,"ejs-grid",5,6),O.fc("queryCellInfo",function(t){return e.queryCellInfoEvent(t)}),O.Vb(9,"e-columns"),O.Vb(10,"e-column",7),O.Gc(11,wi,1,1,"ng-template",null,8,O.Hc),O.Ub(),O.Qb(13,"e-column",9),O.Qb(14,"e-column",10),O.Vb(15,"e-column",11),O.Gc(16,Di,2,1,"ng-template",null,8,O.Hc),O.Ub(),O.Gc(18,Ai,1,2,"ng-template",12,8,O.Hc),O.Ub(),O.Ub(),O.Vb(20,"div",13),O.Vb(21,"div",14),O.Vb(22,"table",15),O.Vb(23,"thead"),O.Vb(24,"tr"),O.Vb(25,"th",16),O.Ic(26,"\u5de5\u4f5c\u614b\u5ea6 = \u4e3b\u52d5\u7a4d\u6975 + \u6e9d\u901a\u53caEQ + \u914d\u5408\u5ea6"),O.Ub(),O.Vb(27,"th",16),O.Ic(28,"\u975e\u5e38\u597d 10 \u5206"),O.Ub(),O.Vb(29,"th",16),O.Ic(30,"\u8f03\u597d 8-9 \u5206"),O.Ub(),O.Vb(31,"th",16),O.Ic(32,"\u4e00\u822c 6-7 \u5206"),O.Ub(),O.Vb(33,"th",16),O.Ic(34,"\u8f03\u5dee 4-5 \u5206"),O.Ub(),O.Vb(35,"th",16),O.Ic(36,"\u6975\u5dee 3 \u5206\u4ee5\u4e0b"),O.Ub(),O.Ub(),O.Ub(),O.Vb(37,"tbody"),O.Vb(38,"tr"),O.Vb(39,"td"),O.Ic(40,"Attitude = Proactiveness + Communication & EQ + Cooperation"),O.Ub(),O.Vb(41,"td"),O.Ic(42,"Excellent 10 points"),O.Ub(),O.Vb(43,"td"),O.Ic(44,"Good 8-9 points"),O.Ub(),O.Vb(45,"td"),O.Ic(46,"Normal 6-7 points"),O.Ub(),O.Vb(47,"td"),O.Ic(48,"Not goo 4-5 points"),O.Ub(),O.Vb(49,"td"),O.Ic(50,"Poor 3 points or below"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(51,"div",13),O.Vb(52,"div",14),O.Gc(53,Oi,15,2,"table",17),O.Gc(54,Pi,3,0,"div",18),O.Vb(55,"table",19),O.Vb(56,"thead"),O.Vb(57,"tr"),O.Vb(58,"th",20),O.Ic(59," L1 comment"),O.Qb(60,"br"),O.Ic(61," \u76f4\u5c6c\u4e3b\u7ba1\u8a55\u8a9e\uff1a "),O.Ub(),O.Vb(62,"th",21),O.Ic(63),O.Ub(),O.Vb(64,"th",20),O.Ic(65," L1 give Attitude Score"),O.Qb(66,"br"),O.Ic(67," \u76f4\u5c6c\u4e3b\u7ba1\u7d66\u4e88\u614b\u5ea6\u5206\u6578\uff1a "),O.Ub(),O.Vb(68,"th",22),O.Ic(69),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Gc(70,ji,3,0,"div",18),O.Vb(71,"table",19),O.Vb(72,"thead"),O.Vb(73,"tr"),O.Vb(74,"th",20),O.Ic(75," Special Contribution or Mistake(if any)"),O.Qb(76,"br"),O.Ic(77," L1\u8a55\u50f9\u91cd\u5927\u8ca2\u737b\u6216\u932f\u8aa4(\u5982\u6709) "),O.Ub(),O.Vb(78,"th",21),O.Ic(79),O.Ub(),O.Vb(80,"th",20),O.Ic(81," L1 Score for Special Contribution or Mistake"),O.Qb(82,"br"),O.Ic(83," \u76f4\u5c6c\u4e3b\u7ba1\u7d66\u4e88\u7279\u5225\u8868\u73fe\u5206\u6578\uff1a "),O.Ub(),O.Vb(84,"th",22),O.Ic(85),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(86,"table",23),O.Vb(87,"thead"),O.Vb(88,"tr"),O.Vb(89,"th",24),O.Ic(90,"Comment"),O.Ub(),O.Vb(91,"th",25),O.Ic(92,"Attitude Score"),O.Ub(),O.Ub(),O.Ub(),O.Vb(93,"tbody"),O.Vb(94,"tr"),O.Vb(95,"td",26),O.Vb(96,"div",27),O.Vb(97,"textarea",28),O.fc("ngModelChange",function(t){return e.commentContent=t}),O.Ub(),O.Ub(),O.Ub(),O.Vb(98,"td",26),O.Vb(99,"div",27),O.Vb(100,"ejs-dropdownlist",29,30),O.fc("valueChange",function(t){return e.point=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(102,"table",23),O.Vb(103,"thead"),O.Vb(104,"tr"),O.Vb(105,"th",24),O.Ic(106,"\u91cd\u5927\u8ca2\u737b\u6216\u932f\u8aa4(\u5982\u6709) Special Contribution or Mistake(if any)"),O.Ub(),O.Vb(107,"th",25),O.Ic(108,"Special Score \u91cd\u5927\u8ca2\u737b\u6216\u932f\u8aa4(\u5982\u6709) "),O.Ub(),O.Ub(),O.Ub(),O.Vb(109,"tbody"),O.Vb(110,"tr"),O.Vb(111,"td",26),O.Vb(112,"div",27),O.Vb(113,"textarea",28),O.fc("ngModelChange",function(t){return e.content=t}),O.Ub(),O.Ub(),O.Ub(),O.Vb(114,"td",26),O.Vb(115,"div",27),O.Vb(116,"ejs-dropdownlist",29,30),O.fc("valueChange",function(t){return e.specialPoint=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(118,"div",31),O.Vb(119,"button",32),O.fc("click",function(){return e.activeModal.close("Close click")}),O.Ic(120),O.Ub(),O.Vb(121,"button",33),O.fc("click",function(){return e.finish()}),O.Ic(122),O.Ub(),O.Ub(),O.Ub()),2&t&&(O.Cb(2),O.Kc("Self-score of KPI Objective (",e.data.objective,")"),O.Cb(5),O.oc("dataSource",e.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings)("allowExcelExport",!0),O.Cb(11),O.oc("ngForOf",e.columns),O.Cb(35),O.oc("ngIf",e.hasFunctionalLeader),O.Cb(1),O.oc("ngIf",e.hasFunctionalLeader&&!1===e.functionalLeaderScored),O.Cb(9),O.Jc(e.l1CommentContent||""),O.Cb(6),O.Jc(e.l1AttitudeScoreData||0),O.Cb(1),O.oc("ngIf",!1===e.l1Scored),O.Cb(9),O.Jc(e.l1SpecialContributionContent||""),O.Cb(6),O.Jc(e.specialContributionScore||0),O.Cb(12),O.oc("ngModel",e.commentContent),O.Cb(3),O.oc("dataSource",e.attitudeData)("value",e.point)("fields",e.fields)("allowFiltering",!0),O.Cb(13),O.oc("ngModel",e.content),O.Cb(3),O.oc("dataSource",e.specialScoreData)("value",e.specialPoint)("fields",e.fields)("allowFiltering",!0),O.Cb(4),O.Jc("Close"),O.Cb(1),O.oc("disabled",e.hasFunctionalLeader&&!1===e.functionalLeaderScored||0==e.l1Scored||e.hasFunctionalLeader&&!1===e.functionalLeaderScored),O.Cb(1),O.Jc("Finish"))},directives:[v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c,b.l,b.m,h.a,h.f,h.i,m.b],styles:["#comment[_ngcontent-%COMP%]{border:2px solid #ffc107!important;font-family:Helvetica Neue,Helvetica,Arial,sans-serif,-apple-system,BlinkMacSystemFont}#comment[_ngcontent-%COMP%], #comment.form-control[_ngcontent-%COMP%]:focus{color:#212529!important;font-size:14px!important}#comment.form-control[_ngcontent-%COMP%]:focus{background-color:#fff!important;border-color:#ffc107!important;outline:0!important;box-shadow:0 0 0 .2rem rgba(32,168,216,.25)}.e-input-group.e-control-wrapper[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error), .e-input-group[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error){border:2px solid #ffc107!important}"]}),Li),Fi=["grid"];function Ri(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic();O.Kc(" ",n.NO(i.index)," ")}}function Ei(t,e){if(1&t&&(O.Vb(0,"li"),O.Ic(1),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.Jc(i)}}function Bi(t,e){if(1&t&&(O.Vb(0,"ul",27),O.Gc(1,Ei,2,1,"li",28),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.oc("ngForOf",i.l0ActionList)}}function Ni(t,e){if(1&t&&O.Qb(0,"e-column",29),2&t){var i=e.$implicit;O.oc("field",i.field)("headerText",i.headerText)}}var _i,Ki=((_i=function(){function t(e,i,n,o,c,r,l){var d=this;s(this,t),this.activeModal=e,this.service=i,this.attitudeScoreService=n,this.attitudeService=o,this.contributionService=c,this.alertify=r,this.utilitiesService=l,this.toolbarOptions=["Search"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.fields={text:"point",value:"point"},this.filterSettings={type:"Excel"},this.content="",this.queryCellInfoEvent=function(t){var e,i,n=t.data,o=a(d.halfYearSettingsData);try{var c=function(){var o=i.value;(""+o).includes(t.column.field)&&(t.cell.innerText=(null===(e=n.resultOfMonth.filter(function(t){return t.month===o})[0])||void 0===e?void 0:e.title)||"N/A")};for(o.s();!(i=o.n()).done;)c()}catch(r){o.e(r)}finally{o.f()}}}return u(t,[{key:"ngOnInit",value:function(){this.attitudeScoreModel={id:0,periodTypeId:this.data.periodTypeId,period:this.data.period,point:this.point,accountId:this.data.id,scoreBy:+JSON.parse(localStorage.getItem("user")).id,createdTime:(new Date).toDateString(),modifiedTime:null,scoreType:this.scoreType},this.contributionModel={id:0,content:this.content,createdBy:+JSON.parse(localStorage.getItem("user")).id,accountId:this.data.id,modifiedBy:null,createdTime:(new Date).toDateString(),modifiedTime:null,periodTypeId:this.data.periodTypeId,period:this.data.period,scoreType:this.scoreType},this.getHalfYearSetting(),this.loadData(),this.loadAttitudeScoreData(),this.loadKPIData(),this.getFisrtByObjectiveIdAndScoreBy(),this.getFisrtContributionByObjectiveId()}},{key:"getMonthListInCurrentQuarter",value:function(t){return["Result of Jan.","Result of Feb.","Result of Mar.","Result of Apr.","Result of May.","Result of Jun.","Result of Jul.","Result of Aug.","Result of Sep.","Result of Oct.","Result of Nov.","Result of Dec."][t-1]}},{key:"getHalfYearSetting",value:function(){this.halfYearSettingsData=this.data.settings||[],this.columns=[];var t,e=a(this.halfYearSettingsData);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.columns.push({field:"".concat(i),headerText:this.getMonthListInCurrentQuarter(i),month:i})}}catch(n){e.e(n)}finally{e.f()}}},{key:"loadData",value:function(){var t=this;this.service.getAllAttitudeScoreGHRByAccountId(this.data.id).subscribe(function(e){t.gridData=e})}},{key:"loadAttitudeScoreData",value:function(){var t=this;this.attitudeScoreService.getById(this.data.id).subscribe(function(e){t.attitudeScoreData=e})}},{key:"getFisrtByObjectiveIdAndScoreBy",value:function(){var t=this;this.attitudeScoreService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.point=null==e?void 0:e.point,t.attitudeScoreModel.id=null==e?void 0:e.id})}},{key:"getFisrtContributionByObjectiveId",value:function(){var t=this;this.contributionService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.data.scoreType).subscribe(function(e){t.content=null==e?void 0:e.content,t.contributionModel.id=null==e?void 0:e.id})}},{key:"loadKPIData",value:function(){var t=this;this.attitudeService.getAll().subscribe(function(e){t.attitudeData=e})}},{key:"addAttitudeScore",value:function(){return this.attitudeScoreModel.point=this.point,this.attitudeScoreService.add(this.attitudeScoreModel)}},{key:"addContribution",value:function(){return this.contributionModel.content=this.content,this.contributionService.add(this.contributionModel)}},{key:"finish",value:function(){if(this.point){var t=this.addAttitudeScore();Object(Pe.a)([t]).subscribe(function(t){console.log(t),t.map(function(t){return t.success})})}else this.alertify.warning("Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0)}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}}]),t}()).\u0275fac=function(t){return new(t||_i)(O.Pb(N.a),O.Pb(Me),O.Pb(je),O.Pb(mi),O.Pb(gi),O.Pb(V.a),O.Pb(G.a))},_i.\u0275cmp=O.Jb({type:_i,selectors:[["app-attitude-score-ghr"]],viewQuery:function(t,e){var i;1&t&&O.Mc(Fi,1),2&t&&O.wc(i=O.gc())&&(e.grid=i.first)},inputs:{data:"data",scoreType:"scoreType"},decls:71,vars:15,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["allowTextWrap","true","gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","toolbar","pageSettings","allowExcelExport","queryCellInfo"],["grid",""],["field","#","headerText","#","textAlign","Center","width","80","type","number"],["template",""],["field","objective","headerText","KPI Objective","type","string"],["field","l0TargetList","headerText","L0 Target","type","string"],["field","l0ActionList","headerText","L0 Action","type","string"],["ngFor","",3,"ngForOf"],[1,"row","mt-2","d-flex","justify-content-center"],[1,"col-md-12"],[1,"table","table-bordered"],["scope","col"],[1,"table",2,"border","none"],["scope","col",1,"text-center",2,"border","none","width","70%","padding","0"],["scope","col",1,"text-center",2,"border","none","width","30%","padding","0"],[2,"border","none"],[1,"form-group"],[3,"dataSource","value","fields","allowFiltering","valueChange"],["accountGroupDropdownlist",""],[1,"modal-footer","justify-content-end"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[2,"padding","0 0 0 8px"],[4,"ngFor","ngForOf"],[3,"field","headerText"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"h4",1),O.Ic(2),O.Ub(),O.Vb(3,"button",2),O.fc("click",function(){return e.activeModal.dismiss("Cross click")}),O.Vb(4,"span",3),O.Ic(5,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"div",4),O.Vb(7,"ejs-grid",5,6),O.fc("queryCellInfo",function(t){return e.queryCellInfoEvent(t)}),O.Vb(9,"e-columns"),O.Vb(10,"e-column",7),O.Gc(11,Ri,1,1,"ng-template",null,8,O.Hc),O.Ub(),O.Qb(13,"e-column",9),O.Qb(14,"e-column",10),O.Vb(15,"e-column",11),O.Gc(16,Bi,2,1,"ng-template",null,8,O.Hc),O.Ub(),O.Gc(18,Ni,1,2,"ng-template",12,8,O.Hc),O.Ub(),O.Ub(),O.Vb(20,"div",13),O.Vb(21,"div",14),O.Vb(22,"table",15),O.Vb(23,"thead"),O.Vb(24,"tr"),O.Vb(25,"th",16),O.Ic(26,"\u5de5\u4f5c\u614b\u5ea6 = \u4e3b\u52d5\u7a4d\u6975 + \u6e9d\u901a\u53caEQ + \u914d\u5408\u5ea6"),O.Ub(),O.Vb(27,"th",16),O.Ic(28,"\u975e\u5e38\u597d 10 \u5206"),O.Ub(),O.Vb(29,"th",16),O.Ic(30,"\u8f03\u597d 8-9 \u5206"),O.Ub(),O.Vb(31,"th",16),O.Ic(32,"\u4e00\u822c 6-7 \u5206"),O.Ub(),O.Vb(33,"th",16),O.Ic(34,"\u8f03\u5dee 4-5 \u5206"),O.Ub(),O.Vb(35,"th",16),O.Ic(36,"\u6975\u5dee 3 \u5206\u4ee5\u4e0b"),O.Ub(),O.Ub(),O.Ub(),O.Vb(37,"tbody"),O.Vb(38,"tr"),O.Vb(39,"td"),O.Ic(40,"Attitude = Proactiveness + Communication & EQ + Cooperation"),O.Ub(),O.Vb(41,"td"),O.Ic(42,"Excellent 10 points"),O.Ub(),O.Vb(43,"td"),O.Ic(44,"Good 8-9 points"),O.Ub(),O.Vb(45,"td"),O.Ic(46,"Normal 6-7 points"),O.Ub(),O.Vb(47,"td"),O.Ic(48,"Not goo 4-5 points"),O.Ub(),O.Vb(49,"td"),O.Ic(50,"Poor 3 points or below"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(51,"div",13),O.Vb(52,"div",14),O.Vb(53,"table",17),O.Vb(54,"thead"),O.Vb(55,"tr"),O.Qb(56,"th",18),O.Vb(57,"th",19),O.Ic(58,"Attitude"),O.Ub(),O.Ub(),O.Ub(),O.Vb(59,"tbody"),O.Vb(60,"tr"),O.Qb(61,"td",20),O.Vb(62,"td",20),O.Vb(63,"div",21),O.Vb(64,"ejs-dropdownlist",22,23),O.fc("valueChange",function(t){return e.point=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(66,"div",24),O.Vb(67,"button",25),O.fc("click",function(){return e.activeModal.close("Close click")}),O.Ic(68),O.Ub(),O.Vb(69,"button",26),O.fc("click",function(){return e.finish()}),O.Ic(70),O.Ub(),O.Ub(),O.Ub()),2&t&&(O.Cb(2),O.Kc("Self-score of KPI Objective (",e.data.objective,")"),O.Cb(5),O.oc("dataSource",e.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings)("allowExcelExport",!0),O.Cb(11),O.oc("ngForOf",e.columns),O.Cb(46),O.oc("dataSource",e.attitudeData)("value",e.point)("fields",e.fields)("allowFiltering",!0),O.Cb(4),O.Jc("Close"),O.Cb(2),O.Jc("Finish"))},directives:[v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c,b.l,m.b],styles:["#comment[_ngcontent-%COMP%]{border:2px solid #ffc107!important;font-family:Helvetica Neue,Helvetica,Arial,sans-serif,-apple-system,BlinkMacSystemFont}#comment[_ngcontent-%COMP%], #comment.form-control[_ngcontent-%COMP%]:focus{color:#212529!important;font-size:14px!important}#comment.form-control[_ngcontent-%COMP%]:focus{background-color:#fff!important;border-color:#ffc107!important;outline:0!important;box-shadow:0 0 0 .2rem rgba(32,168,216,.25)}.e-input-group.e-control-wrapper[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error), .e-input-group[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error){border:2px solid #ffc107!important}"]}),_i),Hi=["grid"];function Ji(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic();O.Kc(" ",n.NO(i.index)," ")}}function zi(t,e){if(1&t&&(O.Vb(0,"ul",28),O.Vb(1,"li"),O.Ic(2),O.Ub(),O.Ub()),2&t){var i=e.$implicit;O.Cb(2),O.Jc(i)}}function Qi(t,e){1&t&&O.Gc(0,zi,3,1,"ul",27),2&t&&O.oc("ngForOf",e.$implicit.l0ActionList)}function $i(t,e){if(1&t&&O.Qb(0,"e-column",29),2&t){var i=e.$implicit;O.oc("field",i.field)("headerText",i.headerText)}}var Yi,qi,Wi=((qi=function(){function t(e,i,n,o,c,r,l,d){var u=this;s(this,t),this.activeModal=e,this.service=i,this.kpiScoreService=n,this.kpiService=o,this.commentService=c,this.alertify=r,this.todolistService=l,this.utilitiesService=d,this.toolbarOptions=["Search"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.fields={text:"point",value:"point"},this.filterSettings={type:"Excel"},this.content="",this.quarterlySettingsData=[],this.columns=[],this.queryCellInfoEvent=function(t){var e,i,n=t.data,o=a(u.quarterlySettingsData);try{var c=function(){var o=i.value;(""+o).includes(t.column.field)&&(t.cell.innerText=(null===(e=n.resultOfMonth.filter(function(t){return t.month===o})[0])||void 0===e?void 0:e.title)||"N/A")};for(o.s();!(i=o.n()).done;)c()}catch(r){o.e(r)}finally{o.f()}}}return u(t,[{key:"ngOnInit",value:function(){this.kpiScoreModel={id:0,periodTypeId:this.data.periodTypeId,period:this.data.period,point:this.point,scoreBy:+JSON.parse(localStorage.getItem("user")).id,modifiedTime:null,createdTime:(new Date).toDateString(),accountId:this.data.id,scoreType:this.scoreType},this.commentModel={id:0,content:this.content,createdBy:+JSON.parse(localStorage.getItem("user")).id,accountId:this.data.id,modifiedBy:null,createdTime:(new Date).toDateString(),modifiedTime:null,period:this.data.period,periodTypeId:this.data.periodTypeId,scoreType:this.scoreType,commentTypeId:we.Comment},this.getQuarterlySetting(),this.loadData(),this.loadKPIScoreData(),this.loadKPIData(),this.getFisrtByAccountId(),this.getFisrtCommentByObjectiveId()}},{key:"getMonthListInCurrentQuarter",value:function(t){return["Result of Jan.","Result of Feb.","Result of Mar.","Result of Apr.","Result of May.","Result of Jun.","Result of Jul.","Result of Aug.","Result of Sep.","Result of Oct.","Result of Nov.","Result of Dec."][t-1]}},{key:"getQuarterlySetting",value:function(){this.quarterlySettingsData=this.data.settings||[],this.columns=[];var t,e=a(this.quarterlySettingsData);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.columns.push({field:"".concat(i),headerText:this.getMonthListInCurrentQuarter(i),month:i})}}catch(n){e.e(n)}finally{e.f()}}},{key:"loadData",value:function(){var t=this;this.service.getAllKPIScoreGHRByAccountId(this.data.id,this.currentTime).subscribe(function(e){t.gridData=e})}},{key:"loadKPIScoreData",value:function(){var t=this;this.kpiScoreService.getById(this.data.id).subscribe(function(e){t.kpiScoreData=e})}},{key:"getFisrtByAccountId",value:function(){var t=this;this.kpiScoreService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.point=null==e?void 0:e.point,t.kpiScoreModel.id=null==e?void 0:e.id})}},{key:"getFisrtCommentByObjectiveId",value:function(){var t=this;this.commentService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.content=null==e?void 0:e.content,t.commentModel.id=null==e?void 0:e.id})}},{key:"loadKPIData",value:function(){var t=this;this.kpiService.getAll().subscribe(function(e){t.kpiData=e})}},{key:"addKPIScore",value:function(){return this.kpiScoreModel.point=this.point,this.kpiScoreService.add(this.kpiScoreModel)}},{key:"addComment",value:function(){return this.commentModel.content=this.content,this.commentService.add(this.commentModel)}},{key:"finish",value:function(){if(this.point){var t=this.addKPIScore();Object(Pe.a)([t]).subscribe(function(t){console.log(t),t.map(function(t){return t.success})})}else this.alertify.warning("Not yet complete. Can not submit!",!0)}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}}]),t}()).\u0275fac=function(t){return new(t||qi)(O.Pb(N.a),O.Pb(Me),O.Pb(De),O.Pb(Ae),O.Pb(Oe),O.Pb(V.a),O.Pb(Me),O.Pb(G.a))},qi.\u0275cmp=O.Jb({type:qi,selectors:[["app-kpi-score-gm"]],viewQuery:function(t,e){var i;1&t&&O.Mc(Hi,1),2&t&&O.wc(i=O.gc())&&(e.grid=i.first)},inputs:{data:"data",periodTypeCode:"periodTypeCode",scoreType:"scoreType",currentTime:"currentTime"},decls:67,vars:15,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["allowTextWrap","true","gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","toolbar","pageSettings","allowExcelExport","queryCellInfo"],["grid",""],["field","#","headerText","#","textAlign","Center","width","80","type","number"],["template",""],["field","objective","headerText","KPI Objective","type","string"],["field","l0TargetList","headerText","L0 Target"],["field","l0ActionList","headerText","L0 Action"],["ngFor","",3,"ngForOf"],[1,"row","mt-2","d-flex","justify-content-center"],[1,"col-md-12"],[1,"table","table-bordered"],["scope","col"],[1,"table",2,"border","none"],["scope","col",1,"text-center",2,"border","none","width","70%","padding","0"],["scope","col",1,"text-center",2,"border","none","width","30%","padding","0"],[2,"border","none"],[1,"form-group"],[3,"dataSource","value","fields","allowFiltering","valueChange"],["accountGroupDropdownlist",""],[1,"modal-footer","justify-content-end"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["style","padding: 0 0 0 15px;",4,"ngFor","ngForOf"],[2,"padding","0 0 0 15px"],[3,"field","headerText"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"h4",1),O.Ic(2),O.Ub(),O.Vb(3,"button",2),O.fc("click",function(){return e.activeModal.dismiss("Cross click")}),O.Vb(4,"span",3),O.Ic(5,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"div",4),O.Vb(7,"ejs-grid",5,6),O.fc("queryCellInfo",function(t){return e.queryCellInfoEvent(t)}),O.Vb(9,"e-columns"),O.Vb(10,"e-column",7),O.Gc(11,Ji,1,1,"ng-template",null,8,O.Hc),O.Ub(),O.Qb(13,"e-column",9),O.Qb(14,"e-column",10),O.Vb(15,"e-column",11),O.Gc(16,Qi,1,1,"ng-template",null,8,O.Hc),O.Ub(),O.Gc(18,$i,1,2,"ng-template",12,8,O.Hc),O.Ub(),O.Ub(),O.Vb(20,"div",13),O.Vb(21,"div",14),O.Vb(22,"table",15),O.Vb(23,"thead"),O.Vb(24,"tr"),O.Vb(25,"th",16),O.Ic(26,"5>= X >=4.5 \u8d85\u51fa\u9810\u671f"),O.Ub(),O.Vb(27,"th",16),O.Ic(28,"4.5> X >=4 \u7b26\u5408\u9810\u671f"),O.Ub(),O.Vb(29,"th",16),O.Ic(30,"4 > X >=3 \u5927\u90e8\u5206\u7b26\u5408\u9810\u671f"),O.Ub(),O.Vb(31,"th",16),O.Ic(32,"3> X >=2 \u90e8\u5206\u7b26\u5408\u9810\u671f"),O.Ub(),O.Vb(33,"th",16),O.Ic(34,"2> X >= 0 \u4e0d\u4f73\u4e0d\u7b26\u5408\u9810\u671f"),O.Ub(),O.Ub(),O.Ub(),O.Vb(35,"tbody"),O.Vb(36,"tr"),O.Vb(37,"td"),O.Ic(38,"Exceed expectation"),O.Ub(),O.Vb(39,"td"),O.Ic(40,"Meet expectation"),O.Ub(),O.Vb(41,"td"),O.Ic(42,"Mostly meet expectation"),O.Ub(),O.Vb(43,"td"),O.Ic(44,"Partly meet expectation"),O.Ub(),O.Vb(45,"td"),O.Ic(46,"Poorly or not meet expectation"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(47,"div",13),O.Vb(48,"div",14),O.Vb(49,"table",17),O.Vb(50,"thead"),O.Vb(51,"tr"),O.Qb(52,"th",18),O.Vb(53,"th",19),O.Ic(54,"Score"),O.Ub(),O.Ub(),O.Ub(),O.Vb(55,"tbody"),O.Vb(56,"tr"),O.Qb(57,"td",20),O.Vb(58,"td",20),O.Vb(59,"div",21),O.Vb(60,"ejs-dropdownlist",22,23),O.fc("valueChange",function(t){return e.point=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(62,"div",24),O.Vb(63,"button",25),O.fc("click",function(){return e.activeModal.close("Close click")}),O.Ic(64),O.Ub(),O.Vb(65,"button",26),O.fc("click",function(){return e.finish()}),O.Ic(66),O.Ub(),O.Ub(),O.Ub()),2&t&&(O.Cb(2),O.Kc("Self-score of KPI Objective (",e.data.objective,")"),O.Cb(5),O.oc("dataSource",e.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings)("allowExcelExport",!0),O.Cb(11),O.oc("ngForOf",e.columns),O.Cb(42),O.oc("dataSource",e.kpiData)("value",e.point)("fields",e.fields)("allowFiltering",!0),O.Cb(4),O.Jc("Close"),O.Cb(2),O.Jc("Finish"))},directives:[v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c,b.l,m.b],styles:["#comment[_ngcontent-%COMP%]{border:2px solid #ffc107!important;font-family:Helvetica Neue,Helvetica,Arial,sans-serif,-apple-system,BlinkMacSystemFont}#comment[_ngcontent-%COMP%], #comment.form-control[_ngcontent-%COMP%]:focus{color:#212529!important;font-size:14px!important}#comment.form-control[_ngcontent-%COMP%]:focus{background-color:#fff!important;border-color:#ffc107!important;outline:0!important;box-shadow:0 0 0 .2rem rgba(32,168,216,.25)}.e-input-group.e-control-wrapper[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error), .e-input-group[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error){border:2px solid #ffc107!important}"]}),qi),Xi=((Yi=function(t){e(o,t);var i=n(o);function o(t,e,n){return s(this,o),i.call(this,t,"SmartScore",e,n)}return o}(te.a)).\u0275fac=function(t){return new(t||Yi)(O.cc(S.b),O.cc(G.a),O.cc(M.a))},Yi.\u0275prov=O.Lb({token:Yi,factory:Yi.\u0275fac,providedIn:"root"}),Yi),Zi=["grid"];function tn(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic();O.Kc(" ",n.NO(i.index)," ")}}function en(t,e){if(1&t&&(O.Vb(0,"li"),O.Ic(1),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.Jc(i)}}function nn(t,e){if(1&t&&(O.Vb(0,"ul",28),O.Gc(1,en,2,1,"li",29),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.oc("ngForOf",i.l0ActionList)}}var on,cn=((on=function(){function t(e,i,n,o,c,r,l,d,u){var b=this;s(this,t),this.activeModal=e,this.service=i,this.kpiScoreService=n,this.kpiService=o,this.objectiveService=c,this.smartScoreService=r,this.commentService=l,this.alertify=d,this.utilitiesService=u,this.toolbarOptions=["Search"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.fields={text:"point",value:"point"},this.filterSettings={type:"Excel"},this.content="",this.quarterlySettingsData=[],this.columns=[],this.objectiveIds=[],this.queryCellInfoEvent=function(t){var e,i,n=t.data,o=a(b.quarterlySettingsData);try{var c=function(){var o=i.value;(""+o).includes(t.column.field)&&(t.cell.innerText=(null===(e=n.resultOfMonth.filter(function(t){return t.month===o})[0])||void 0===e?void 0:e.title)||"N/A")};for(o.s();!(i=o.n()).done;)c()}catch(r){o.e(r)}finally{o.f()}}}return u(t,[{key:"ngOnInit",value:function(){this.kpiScoreModel={id:0,periodTypeId:this.data.periodTypeId,period:this.data.period,point:this.point,scoreBy:+JSON.parse(localStorage.getItem("user")).id,modifiedTime:null,createdTime:(new Date).toDateString(),accountId:this.data.id,scoreType:this.scoreType},this.commentModel={id:0,content:this.content,createdBy:+JSON.parse(localStorage.getItem("user")).id,accountId:this.data.id,modifiedBy:null,createdTime:(new Date).toDateString(),modifiedTime:null,period:this.data.period,periodTypeId:this.data.periodTypeId,scoreType:this.scoreType,commentTypeId:we.Comment},this.getQuarterlySetting(),this.loadData(),this.loadKPIScoreData(),this.loadSmartScoreData(),this.loadKPIData(),this.getFisrtByAccountId(),this.getFisrtCommentByObjectiveId()}},{key:"getMonthListInCurrentQuarter",value:function(t){return["Result of Jan.","Result of Feb.","Result of Mar.","Result of Apr.","Result of May.","Result of Jun.","Result of Jul.","Result of Aug.","Result of Sep.","Result of Oct.","Result of Nov.","Result of Dec."][t-1]}},{key:"getQuarterlySetting",value:function(){this.quarterlySettingsData=this.data.settings||[],this.columns=[];var t,e=a(this.quarterlySettingsData);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.columns.push({field:"".concat(i),headerText:this.getMonthListInCurrentQuarter(i),month:i})}}catch(n){e.e(n)}finally{e.f()}}},{key:"loadData",value:function(){var t=this;this.service.getAllKPIScoreGHRByAccountId(this.data.id,this.currentTime).subscribe(function(e){t.gridData=e,t.objectiveIds=e.filter(function(t){return 1==t.isReject}).map(function(t){return t.id})||[]})}},{key:"loadKPIScoreData",value:function(){var t=this;this.kpiScoreService.getById(this.data.id).subscribe(function(e){t.kpiScoreData=e})}},{key:"getFisrtByAccountId",value:function(){var t=this;this.kpiScoreService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.point=null==e?void 0:e.point,t.kpiScoreModel.id=null==e?void 0:e.id})}},{key:"getFisrtCommentByObjectiveId",value:function(){var t=this;this.commentService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.content=null==e?void 0:e.content,t.commentModel.id=null==e?void 0:e.id})}},{key:"loadKPIData",value:function(){var t=this;this.kpiService.getAll().subscribe(function(e){t.kpiData=e})}},{key:"loadSmartScoreData",value:function(){var t=this;this.smartScoreService.getAll().subscribe(function(e){t.smartScoreData=e})}},{key:"onchangeReject",value:function(t,e){t?(this.objectiveIds.push(e.todolistId),this.objectiveIds=this.utilitiesService.toDistinct(this.objectiveIds)):this.objectiveIds=this.utilitiesService.toArrayRemove(this.objectiveIds,e.todolistId)}},{key:"onChangeSmartScore",value:function(t){var e=this;if(t.isInteracted){var i=this.addKPIScore();Object(Pe.a)([i]).subscribe(function(t){console.log(t),t.map(function(t){return t.success}),function(t){return t.every(Boolean)}||e.alertify.warning("Not yet complete. Can not release. \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0)})}}},{key:"addKPIScore",value:function(){return this.kpiScoreModel.point=this.point,this.kpiScoreService.add(this.kpiScoreModel)}},{key:"addComment",value:function(){return this.commentModel.content=this.content,this.commentService.add(this.commentModel)}},{key:"reject",value:function(){if(this.utilitiesService.isUndefinedOrNullOrEmpty(this.content))this.alertify.warning("Please leave a comment. \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0);else if(this.utilitiesService.isUndefinedOrNull(this.point))this.alertify.warning("Please score smart score first. Not yet complete. Can not release. \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0);else if(0!==this.objectiveIds.length){var t=this.addComment(),e=this.service.reject(this.objectiveIds);Object(Pe.a)([t,e]).subscribe(function(t){console.log(t),t.map(function(t){return t.success})})}else this.alertify.warning("There's no reject item, please check remark. \u60a8\u6c92\u6709\u9078\u64c7\u4e0d\u5408\u683c\u7684\u9805\u76ee\uff0c\u8acb\u5b8c\u6210\u52fe\u9078",!0)}},{key:"release",value:function(){var t=this.grid.dataSource.map(function(t){return t.todolistId})||[];if(0!==t.length)if(this.objectiveIds.length>0)this.alertify.warning("You ticked in reject column, please click Reject . \u60a8\u6709\u52fe\u9078\u4e0d\u5408\u683c\u7684\u9805\u76ee\uff0c\u8acb\u6309Reject",!0);else if(this.utilitiesService.isUndefinedOrNull(this.point))this.alertify.warning("Not yet complete. Can not release. \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0);else{var e=this.addComment(),i=this.service.release(t);Object(Pe.a)([e,i]).subscribe(function(t){console.log(t),t.map(function(t){return t.success})})}else this.alertify.warning("Not yet complete. Can not release. \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0)}},{key:"finish",value:function(){var t=this.addComment();Object(Pe.a)([t]).subscribe(function(t){console.log(t),t.map(function(t){return t.success})})}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}}]),t}()).\u0275fac=function(t){return new(t||on)(O.Pb(N.a),O.Pb(Me),O.Pb(De),O.Pb(Ae),O.Pb(ee),O.Pb(Xi),O.Pb(Oe),O.Pb(V.a),O.Pb(G.a))},on.\u0275cmp=O.Jb({type:on,selectors:[["app-kpi-score-ghr"]],viewQuery:function(t,e){var i;1&t&&O.Mc(Zi,1),2&t&&O.wc(i=O.gc())&&(e.grid=i.first)},inputs:{data:"data",periodTypeCode:"periodTypeCode",scoreType:"scoreType",currentTime:"currentTime"},decls:69,vars:15,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["allowTextWrap","true","gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","toolbar","pageSettings","allowExcelExport","queryCellInfo"],["grid",""],["field","#","headerText","#","textAlign","Center","width","80","type","number"],["template",""],["field","objective","headerText","KPI Objective","type","string"],["field","l0TargetList","headerText","L0 Target"],["field","l0ActionList","headerText","L0 Action"],["field","deadline","format","yyyy/MM/dd","type","Date","textAlign","Center","headerText","Deadline"],[1,"row","mt-2","d-flex","justify-content-center"],[1,"col-md-12"],[1,"table","table-bordered"],["scope","col"],[1,"table",2,"border","none"],["scope","col",1,"text-center",2,"border","none","width","70%","padding","0"],["scope","col",1,"text-center",2,"border","none","width","30%","padding","0"],[2,"border","none"],[1,"form-group"],["id","comment","rows","6","type","text","placeholder","Type something!",1,"form-control",3,"ngModel","ngModelChange"],[3,"dataSource","value","fields","allowFiltering","change","valueChange"],["accountGroupDropdownlist",""],[1,"modal-footer","justify-content-end"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[2,"padding","0 0 0 15px"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"h4",1),O.Ic(2),O.Ub(),O.Vb(3,"button",2),O.fc("click",function(){return e.activeModal.dismiss("Cross click")}),O.Vb(4,"span",3),O.Ic(5,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"div",4),O.Vb(7,"ejs-grid",5,6),O.fc("queryCellInfo",function(t){return e.queryCellInfoEvent(t)}),O.Vb(9,"e-columns"),O.Vb(10,"e-column",7),O.Gc(11,tn,1,1,"ng-template",null,8,O.Hc),O.Ub(),O.Qb(13,"e-column",9),O.Qb(14,"e-column",10),O.Vb(15,"e-column",11),O.Gc(16,nn,2,1,"ng-template",null,8,O.Hc),O.Ub(),O.Qb(18,"e-column",12),O.Ub(),O.Ub(),O.Vb(19,"div",13),O.Vb(20,"div",14),O.Vb(21,"table",15),O.Vb(22,"thead"),O.Vb(23,"tr"),O.Vb(24,"th",16),O.Ic(25,"5>= X >=4.5 \u8d85\u51fa\u9810\u671f"),O.Ub(),O.Vb(26,"th",16),O.Ic(27,"4.5> X >=4 \u7b26\u5408\u9810\u671f"),O.Ub(),O.Vb(28,"th",16),O.Ic(29,"4 > X >=3 \u5927\u90e8\u5206\u7b26\u5408\u9810\u671f"),O.Ub(),O.Vb(30,"th",16),O.Ic(31,"3> X >=2 \u90e8\u5206\u7b26\u5408\u9810\u671f"),O.Ub(),O.Vb(32,"th",16),O.Ic(33,"2> X >= 0 \u4e0d\u4f73\u4e0d\u7b26\u5408\u9810\u671f"),O.Ub(),O.Ub(),O.Ub(),O.Vb(34,"tbody"),O.Vb(35,"tr"),O.Vb(36,"td"),O.Ic(37,"Exceed expectation"),O.Ub(),O.Vb(38,"td"),O.Ic(39,"Meet expectation"),O.Ub(),O.Vb(40,"td"),O.Ic(41,"Mostly meet expectation"),O.Ub(),O.Vb(42,"td"),O.Ic(43,"Partly meet expectation"),O.Ub(),O.Vb(44,"td"),O.Ic(45,"Poorly or not meet expectation"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(46,"div",13),O.Vb(47,"div",14),O.Vb(48,"table",17),O.Vb(49,"thead"),O.Vb(50,"tr"),O.Vb(51,"th",18),O.Ic(52,"Comment"),O.Ub(),O.Vb(53,"th",19),O.Ic(54,"SMART Score"),O.Ub(),O.Ub(),O.Ub(),O.Vb(55,"tbody"),O.Vb(56,"tr"),O.Vb(57,"td",20),O.Vb(58,"div",21),O.Vb(59,"textarea",22),O.fc("ngModelChange",function(t){return e.content=t}),O.Ub(),O.Ub(),O.Ub(),O.Vb(60,"td",20),O.Vb(61,"div",21),O.Vb(62,"ejs-dropdownlist",23,24),O.fc("change",function(t){return e.onChangeSmartScore(t)})("valueChange",function(t){return e.point=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(64,"div",25),O.Vb(65,"button",26),O.fc("click",function(){return e.release()}),O.Ic(66),O.Ub(),O.Vb(67,"button",27),O.fc("click",function(){return e.activeModal.close("Close click")}),O.Ic(68),O.Ub(),O.Ub(),O.Ub()),2&t&&(O.Cb(2),O.Kc("Self-score of KPI Objective (",e.data.objective,")"),O.Cb(5),O.oc("dataSource",e.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings)("allowExcelExport",!0),O.Cb(52),O.oc("ngModel",e.content),O.Cb(3),O.oc("dataSource",e.smartScoreData)("value",e.point)("fields",e.fields)("allowFiltering",!0),O.Cb(4),O.Jc("Release"),O.Cb(2),O.Jc("Close"))},directives:[v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c,h.a,h.f,h.i,m.b,b.l],styles:["#comment[_ngcontent-%COMP%]{border:2px solid #ffc107!important;font-family:Helvetica Neue,Helvetica,Arial,sans-serif,-apple-system,BlinkMacSystemFont}#comment[_ngcontent-%COMP%], #comment.form-control[_ngcontent-%COMP%]:focus{color:#212529!important;font-size:14px!important}#comment.form-control[_ngcontent-%COMP%]:focus{background-color:#fff!important;border-color:#ffc107!important;outline:0!important;box-shadow:0 0 0 .2rem rgba(32,168,216,.25)}.e-input-group.e-control-wrapper[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error), .e-input-group[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error){border:2px solid #ffc107!important}input[type=checkbox][_ngcontent-%COMP%]{transform:scale(2);padding:10px}.checkboxtext[_ngcontent-%COMP%]{font-size:110%;display:inline}"]}),on),an=["grid"];function rn(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic();O.Kc(" ",n.NO(i.index)," ")}}function ln(t,e){if(1&t&&(O.Vb(0,"li"),O.Ic(1),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.Jc(i)}}function sn(t,e){if(1&t&&(O.Vb(0,"ul",28),O.Gc(1,ln,2,1,"li",29),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.oc("ngForOf",i.l0ActionList)}}function dn(t,e){if(1&t&&O.Qb(0,"e-column",30),2&t){var i=e.$implicit;O.oc("field",i.field)("headerText",i.headerText)}}var un,bn=((un=function(){function t(e,i,n,o,c,r,l){var d=this;s(this,t),this.activeModal=e,this.service=i,this.attitudeScoreService=n,this.commentService=o,this.attitudeService=c,this.alertify=r,this.utilitiesService=l,this.toolbarOptions=["Search"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.fields={text:"point",value:"point"},this.filterSettings={type:"Excel"},this.content="",this.queryCellInfoEvent=function(t){var e,i,n=t.data,o=a(d.halfYearSettingsData);try{var c=function(){var o=i.value;(""+o).includes(t.column.field)&&(t.cell.innerText=(null===(e=n.resultOfMonth.filter(function(t){return t.month===o})[0])||void 0===e?void 0:e.title)||"N/A")};for(o.s();!(i=o.n()).done;)c()}catch(r){o.e(r)}finally{o.f()}}}return u(t,[{key:"ngOnInit",value:function(){this.attitudeScoreModel={id:0,periodTypeId:this.data.periodTypeId,period:this.data.period,point:this.point,accountId:this.data.id,scoreBy:+JSON.parse(localStorage.getItem("user")).id,createdTime:(new Date).toDateString(),modifiedTime:null,scoreType:this.scoreType},this.contributionModel={id:0,content:this.content,createdBy:+JSON.parse(localStorage.getItem("user")).id,accountId:this.data.id,modifiedBy:null,createdTime:(new Date).toDateString(),modifiedTime:null,periodTypeId:this.data.periodTypeId,period:this.data.period,scoreType:this.scoreType},this.commentModel={id:0,content:this.content,createdBy:+JSON.parse(localStorage.getItem("user")).id,accountId:this.data.id,modifiedBy:null,createdTime:(new Date).toDateString(),modifiedTime:null,period:this.data.period,periodTypeId:this.data.periodTypeId,scoreType:this.scoreType,commentTypeId:we.Comment},this.getHalfYearSetting(),this.loadData(),this.loadAttitudeScoreData(),this.loadKPIData(),this.getFisrtCommentByObjectiveId(),this.getFisrtByObjectiveIdAndScoreBy()}},{key:"getMonthListInCurrentQuarter",value:function(t){return["Result of Jan.","Result of Feb.","Result of Mar.","Result of Apr.","Result of May.","Result of Jun.","Result of Jul.","Result of Aug.","Result of Sep.","Result of Oct.","Result of Nov.","Result of Dec."][t-1]}},{key:"getHalfYearSetting",value:function(){this.halfYearSettingsData=this.data.settings||[],this.columns=[];var t,e=a(this.halfYearSettingsData);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.columns.push({field:"".concat(i),headerText:this.getMonthListInCurrentQuarter(i),month:i})}}catch(n){e.e(n)}finally{e.f()}}},{key:"loadData",value:function(){var t=this;this.service.getAllAttitudeScoreGFLByAccountId(this.data.id).subscribe(function(e){t.gridData=e})}},{key:"loadAttitudeScoreData",value:function(){var t=this;this.attitudeScoreService.getById(this.data.id).subscribe(function(e){t.attitudeScoreData=e})}},{key:"getFisrtCommentByObjectiveId",value:function(){var t=this;this.commentService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.content=null==e?void 0:e.content,t.commentModel.id=null==e?void 0:e.id})}},{key:"getFisrtByObjectiveIdAndScoreBy",value:function(){var t=this;this.attitudeScoreService.getFunctionalLeaderAttitudeScoreByAccountId(this.data.id,this.data.periodTypeId,this.data.period).subscribe(function(e){t.point=null==e?void 0:e.point,t.attitudeScoreModel.id=null==e?void 0:e.id})}},{key:"loadKPIData",value:function(){var t=this;this.attitudeService.getAll().subscribe(function(e){t.attitudeData=e})}},{key:"addAttitudeScore",value:function(){return this.attitudeScoreModel.point=this.point,this.attitudeScoreService.add(this.attitudeScoreModel)}},{key:"addComment",value:function(){return this.commentModel.content=this.content,this.commentService.add(this.commentModel)}},{key:"finish",value:function(){if(this.point){var t=this.addAttitudeScore(),e=this.addComment();Object(Pe.a)([t,e]).subscribe(function(t){console.log(t),t.map(function(t){return t.success})})}else this.alertify.warning("Not yet complete. Can not submit!",!0)}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}}]),t}()).\u0275fac=function(t){return new(t||un)(O.Pb(N.a),O.Pb(Me),O.Pb(je),O.Pb(Oe),O.Pb(mi),O.Pb(V.a),O.Pb(G.a))},un.\u0275cmp=O.Jb({type:un,selectors:[["app-attitude-score-functional-leader"]],viewQuery:function(t,e){var i;1&t&&O.Mc(an,1),2&t&&O.wc(i=O.gc())&&(e.grid=i.first)},inputs:{data:"data",scoreType:"scoreType"},decls:78,vars:16,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["allowTextWrap","true","gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","toolbar","pageSettings","allowExcelExport","queryCellInfo"],["grid",""],["field","#","headerText","#","textAlign","Center","width","30","type","number"],["template",""],["field","objective","headerText","KPI Objective","type","string"],["field","l0TargetList","headerText","L0 Target","type","string"],["field","l0ActionList","headerText","L0 Action","type","string"],["ngFor","",3,"ngForOf"],[1,"row","mt-2","d-flex","justify-content-center"],[1,"col-md-12"],[1,"table","table-bordered"],["scope","col"],[1,"table",2,"border","none"],["scope","col",1,"text-center",2,"border","none","width","70%","padding","0"],["scope","col",1,"text-center",2,"border","none","width","30%","padding","0"],[2,"border","none"],[1,"form-group"],["id","comment","rows","6","type","text","placeholder","Type something!",1,"form-control",3,"ngModel","ngModelChange"],[3,"dataSource","value","fields","allowFiltering","valueChange"],["accountGroupDropdownlist",""],[1,"modal-footer","justify-content-end"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[2,"padding","0 0 0 8px"],[4,"ngFor","ngForOf"],[3,"field","headerText"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"h4",1),O.Ic(2),O.Ub(),O.Vb(3,"button",2),O.fc("click",function(){return e.activeModal.dismiss("Cross click")}),O.Vb(4,"span",3),O.Ic(5,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"div",4),O.Vb(7,"ejs-grid",5,6),O.fc("queryCellInfo",function(t){return e.queryCellInfoEvent(t)}),O.Vb(9,"e-columns"),O.Vb(10,"e-column",7),O.Gc(11,rn,1,1,"ng-template",null,8,O.Hc),O.Ub(),O.Qb(13,"e-column",9),O.Qb(14,"e-column",10),O.Vb(15,"e-column",11),O.Gc(16,sn,2,1,"ng-template",null,8,O.Hc),O.Ub(),O.Gc(18,dn,1,2,"ng-template",12,8,O.Hc),O.Ub(),O.Ub(),O.Vb(20,"div",13),O.Vb(21,"div",14),O.Vb(22,"table",15),O.Vb(23,"thead"),O.Vb(24,"tr"),O.Vb(25,"th",16),O.Ic(26,"\u5de5\u4f5c\u614b\u5ea6 = \u4e3b\u52d5\u7a4d\u6975 + \u6e9d\u901a\u53caEQ + \u914d\u5408\u5ea6"),O.Ub(),O.Vb(27,"th",16),O.Ic(28,"\u975e\u5e38\u597d 10 \u5206"),O.Ub(),O.Vb(29,"th",16),O.Ic(30,"\u8f03\u597d 8-9 \u5206"),O.Ub(),O.Vb(31,"th",16),O.Ic(32,"\u4e00\u822c 6-7 \u5206"),O.Ub(),O.Vb(33,"th",16),O.Ic(34,"\u8f03\u5dee 4-5 \u5206"),O.Ub(),O.Vb(35,"th",16),O.Ic(36,"\u6975\u5dee 3 \u5206\u4ee5\u4e0b"),O.Ub(),O.Ub(),O.Ub(),O.Vb(37,"tbody"),O.Vb(38,"tr"),O.Vb(39,"td"),O.Ic(40,"Attitude = Proactiveness + Communication & EQ + Cooperation"),O.Ub(),O.Vb(41,"td"),O.Ic(42,"Excellent 10 points"),O.Ub(),O.Vb(43,"td"),O.Ic(44,"Good 8-9 points"),O.Ub(),O.Vb(45,"td"),O.Ic(46,"Normal 6-7 points"),O.Ub(),O.Vb(47,"td"),O.Ic(48,"Not goo 4-5 points"),O.Ub(),O.Vb(49,"td"),O.Ic(50,"Poor 3 points or below"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(51,"div",13),O.Vb(52,"div",14),O.Vb(53,"table",17),O.Vb(54,"thead"),O.Vb(55,"tr"),O.Vb(56,"th",18),O.Ic(57,"Functional leader comment"),O.Qb(58,"br"),O.Ic(59," \u529f\u80fd\u4e3b\u7ba1\u8a55\u8a9e\uff1a"),O.Ub(),O.Vb(60,"th",19),O.Ic(61,"Fuctional leader give Attitude Score"),O.Qb(62,"br"),O.Ic(63," \u529f\u80fd\u4e3b\u7ba1\u7d66\u4e88\u614b\u5ea6\u5206\u6578\uff1a"),O.Ub(),O.Ub(),O.Ub(),O.Vb(64,"tbody"),O.Vb(65,"tr"),O.Vb(66,"td",20),O.Vb(67,"div",21),O.Vb(68,"textarea",22),O.fc("ngModelChange",function(t){return e.content=t}),O.Ub(),O.Ub(),O.Ub(),O.Vb(69,"td",20),O.Vb(70,"div",21),O.Vb(71,"ejs-dropdownlist",23,24),O.fc("valueChange",function(t){return e.point=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(73,"div",25),O.Vb(74,"button",26),O.fc("click",function(){return e.activeModal.close("Close click")}),O.Ic(75),O.Ub(),O.Vb(76,"button",27),O.fc("click",function(){return e.finish()}),O.Ic(77),O.Ub(),O.Ub(),O.Ub()),2&t&&(O.Cb(2),O.Kc("Attitude-score of KPI Objective (",e.data.objective,")"),O.Cb(5),O.oc("dataSource",e.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings)("allowExcelExport",!0),O.Cb(11),O.oc("ngForOf",e.columns),O.Cb(50),O.oc("ngModel",e.content),O.Cb(3),O.oc("dataSource",e.attitudeData)("value",e.point)("fields",e.fields)("allowFiltering",!0),O.Cb(4),O.Jc("Close"),O.Cb(2),O.Jc("Finish"))},directives:[v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c,b.l,h.a,h.f,h.i,m.b],styles:["#comment[_ngcontent-%COMP%]{border:2px solid #ffc107!important;font-family:Helvetica Neue,Helvetica,Arial,sans-serif,-apple-system,BlinkMacSystemFont}#comment[_ngcontent-%COMP%], #comment.form-control[_ngcontent-%COMP%]:focus{color:#212529!important;font-size:14px!important}#comment.form-control[_ngcontent-%COMP%]:focus{background-color:#fff!important;border-color:#ffc107!important;outline:0!important;box-shadow:0 0 0 .2rem rgba(32,168,216,.25)}.e-input-group.e-control-wrapper[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error), .e-input-group[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error){border:2px solid #ffc107!important}"]}),un),hn=["grid"];function pn(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic();O.Kc(" ",n.NO(i.index)," ")}}function fn(t,e){if(1&t&&(O.Vb(0,"li"),O.Ic(1),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.Jc(i)}}function gn(t,e){if(1&t&&(O.Vb(0,"ul",34),O.Gc(1,fn,2,1,"li",35),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.oc("ngForOf",i.l0ActionList)}}function mn(t,e){if(1&t&&O.Qb(0,"e-column",36),2&t){var i=e.$implicit;O.oc("field",i.field)("headerText",i.headerText)}}function vn(t,e){if(1&t&&(O.Vb(0,"table",19),O.Vb(1,"thead"),O.Vb(2,"tr"),O.Vb(3,"th",20),O.Ic(4,"Self - Evaluation"),O.Qb(5,"br"),O.Ic(6,"\u81ea\u6211\u8a55\u50f9"),O.Ub(),O.Vb(7,"th",37),O.Ic(8),O.Ub(),O.Vb(9,"th",38),O.Ic(10),O.Qb(11,"br"),O.Ic(12),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic();O.Cb(8),O.Jc(i.selfEvaluationCommentContent),O.Cb(2),O.Kc("",(null==i.data?null:i.data.fullName)||""," Self-Score"),O.Cb(2),O.Kc("\u81ea\u8a55\u5206\u6578\uff1a",i.selfPoint,"")}}function yn(t,e){1&t&&(O.Vb(0,"div",39),O.Vb(1,"strong",40),O.Ic(2," Please ask L0 to self-score!"),O.Ub(),O.Ub())}function In(t,e){1&t&&(O.Vb(0,"div",39),O.Vb(1,"strong",40),O.Ic(2," Please ask L1 to score attitude score L0!"),O.Ub(),O.Ub())}var Sn,Un,Cn=((Un=function(){function t(e,i,n,o,c,r,l,d,u){var b=this;s(this,t),this.activeModal=e,this.service=i,this.kpiScoreService=n,this.kpiService=o,this.commentService=c,this.alertify=r,this.utilitiesService=l,this.todolistService=d,this.attitudeScoreService=u,this.toolbarOptions=["Search"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.fields={text:"point",value:"point"},this.filterSettings={type:"Excel"},this.content="",this.quarterlySettingsData=[],this.columns=[],this.l1Scored=!1,this.selfScored=!1,this.hasFunctionalLeader=!1,this.queryCellInfoEvent=function(t){var e,i,n=t.data,o=a(b.quarterlySettingsData);try{var c=function(){var o=i.value;(""+o).includes(t.column.field)&&(t.cell.innerText=(null===(e=n.resultOfMonth.filter(function(t){return t.month===o})[0])||void 0===e?void 0:e.title)||"N/A")};for(o.s();!(i=o.n()).done;)c()}catch(r){o.e(r)}finally{o.f()}}}return u(t,[{key:"ngOnInit",value:function(){this.hasFunctionalLeader=this.data.hasFunctionalLeader,this.isQuarter2Or4=this.data.period==xe.Q2||this.data.period==xe.Q4,this.kpiScoreModel={id:0,periodTypeId:this.data.periodTypeId,period:this.data.period,point:this.point,scoreBy:+JSON.parse(localStorage.getItem("user")).id,modifiedTime:null,createdTime:(new Date).toDateString(),accountId:this.data.id,scoreType:this.scoreType},this.commentModel={id:0,content:this.content,createdBy:+JSON.parse(localStorage.getItem("user")).id,accountId:this.data.id,modifiedBy:null,createdTime:(new Date).toDateString(),modifiedTime:null,period:this.data.period,periodTypeId:this.data.periodTypeId,scoreType:this.scoreType,commentTypeId:we.Comment},!0===this.isQuarter2Or4&&this.getFisrtSelfScoreL1ByAccountId(),this.getL1CommentByAccountId(),this.getFisrtKPIScoreL1ByAccountId(),this.getQuarterlySetting(),this.loadData(),this.loadKPIScoreData(),this.loadKPIData(),this.getFisrtByAccountId(),this.getFisrtCommentByObjectiveId(),this.getL2SelfEvaluationCommentByAccountId()}},{key:"getFunctionalLeaderCommentByAccountId",value:function(){var t=this;this.commentService.getFunctionalLeaderCommentByAccountId(this.data.id,this.data.halfYearId,this.data.halfYearPeriod).subscribe(function(e){t.functionalLeaderCommentContent=null==e?void 0:e.content})}},{key:"getFunctionalLeaderAttitudeScoreByAccountId",value:function(){var t=this;this.attitudeScoreService.getFunctionalLeaderAttitudeScoreByAccountId(this.data.id,this.data.halfYearId,this.data.halfYearPeriod).subscribe(function(e){t.functionalLeaderAttitudeScoreData=(null==e?void 0:e.point)||0,t.functionalLeaderScored=t.functionalLeaderAttitudeScoreData>0})}},{key:"getFisrtSelfScoreL1ByAccountId",value:function(){var t=this;this.kpiScoreService.getFisrtSelfScoreL1ByAccountId(this.data.id,this.data.halfYearId,this.data.halfYearPeriod,Ve.L0).subscribe(function(e){t.selfPoint=(null==e?void 0:e.point)||0,t.selfScored=t.selfPoint>0})}},{key:"getL2SelfEvaluationCommentByAccountId",value:function(){var t=this;this.commentService.getL2SelfEvaluationCommentByAccountId(this.data.id,this.data.halfYearId,this.data.halfYearPeriod).subscribe(function(e){t.selfEvaluationCommentContent=null==e?void 0:e.content})}},{key:"getMonthListInCurrentQuarter",value:function(t){return["Result of Jan.","Result of Feb.","Result of Mar.","Result of Apr.","Result of May.","Result of Jun.","Result of Jul.","Result of Aug.","Result of Sep.","Result of Oct.","Result of Nov.","Result of Dec."][t-1]}},{key:"getQuarterlySetting",value:function(){this.quarterlySettingsData=this.data.settings||[],this.columns=[];var t,e=a(this.quarterlySettingsData);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.columns.push({field:"".concat(i),headerText:this.getMonthListInCurrentQuarter(i),month:i})}}catch(n){e.e(n)}finally{e.f()}}},{key:"loadData",value:function(){var t=this;this.service.getAllKPIScoreL2ByAccountId(this.data.id,this.currentTime).subscribe(function(e){t.gridData=e})}},{key:"loadKPIScoreData",value:function(){var t=this;this.kpiScoreService.getById(this.data.id).subscribe(function(e){t.kpiScoreData=e})}},{key:"getFisrtByAccountId",value:function(){var t=this;this.kpiScoreService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.point=null==e?void 0:e.point,t.kpiScoreModel.id=null==e?void 0:e.id})}},{key:"getFisrtKPIScoreL1ByAccountId",value:function(){var t=this;this.kpiScoreService.getFisrtKPIScoreL1ByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.l1Point=(null==e?void 0:e.point)||0,t.l1Scored=t.l1Point>0})}},{key:"getL1CommentByAccountId",value:function(){var t=this;this.commentService.getL1CommentByAccountId(this.data.id,this.data.periodTypeId,this.data.period).subscribe(function(e){t.l1CommentContent=null==e?void 0:e.content})}},{key:"getFisrtCommentByObjectiveId",value:function(){var t=this;this.commentService.getFisrtByAccountId(this.data.id,this.data.periodTypeId,this.data.period,this.scoreType).subscribe(function(e){t.content=null==e?void 0:e.content,t.commentModel.id=null==e?void 0:e.id})}},{key:"loadKPIData",value:function(){var t=this;this.kpiService.getAll().subscribe(function(e){t.kpiData=e})}},{key:"addKPIScore",value:function(){return this.kpiScoreModel.point=this.point,this.kpiScoreService.add(this.kpiScoreModel)}},{key:"addComment",value:function(){return this.commentModel.content=this.content,this.commentService.add(this.commentModel)}},{key:"isShowSelfScore",value:function(){return[2,4].includes(this.data.period)}},{key:"finish",value:function(){if(this.point){var t=this.addKPIScore(),e=this.addComment();Object(Pe.a)([t,e]).subscribe(function(t){console.log(t),t.map(function(t){return t.success})})}else this.alertify.warning("Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0)}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}}]),t}()).\u0275fac=function(t){return new(t||Un)(O.Pb(N.a),O.Pb(Me),O.Pb(De),O.Pb(Ae),O.Pb(Oe),O.Pb(V.a),O.Pb(G.a),O.Pb(Me),O.Pb(je))},Un.\u0275cmp=O.Jb({type:Un,selectors:[["app-kpi-score-l2"]],viewQuery:function(t,e){var i;1&t&&O.Mc(hn,1),2&t&&O.wc(i=O.gc())&&(e.grid=i.first)},inputs:{data:"data",periodTypeCode:"periodTypeCode",scoreType:"scoreType",currentTime:"currentTime"},decls:88,vars:22,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],["allowTextWrap","true","gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","toolbar","pageSettings","allowExcelExport","queryCellInfo"],["grid",""],["field","#","headerText","#","textAlign","Center","width","80","type","number"],["template",""],["field","objective","headerText","KPI Objective","type","string"],["field","l0TargetList","headerText","L0 Target"],["field","l0ActionList","headerText","L0 Action"],["ngFor","",3,"ngForOf"],[1,"row","mt-2","d-flex","justify-content-center"],[1,"col-md-12"],[1,"table","table-bordered"],["scope","col"],["class","table",4,"ngIf"],["class","alert alert-danger text-center","role","alert",4,"ngIf"],[1,"table"],["scope","col",2,"width","20%"],["scope","col",2,"width","50%"],["scope","col",2,"width","10%","text-align","center","font-size","xx-large"],[1,"table",2,"border","none"],["scope","col",1,"text-center",2,"border","none","width","70%","padding","0"],["scope","col",1,"text-center",2,"border","none","width","30%","padding","0"],[2,"border","none"],[1,"form-group"],["id","comment","rows","6","type","text","placeholder","Type something!",1,"form-control",3,"ngModel","ngModelChange"],[3,"dataSource","value","fields","allowFiltering","valueChange"],["accountGroupDropdownlist",""],[1,"modal-footer","justify-content-end"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"disabled","click"],[2,"padding","0 0 0 15px"],[4,"ngFor","ngForOf"],[3,"field","headerText"],["scope","col",2,"width","50%","text-align","left"],["scope","col",2,"width","30%","text-align","left"],["role","alert",1,"alert","alert-danger","text-center"],[1,"text-center"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"h4",1),O.Ic(2),O.Ub(),O.Vb(3,"button",2),O.fc("click",function(){return e.activeModal.dismiss("Cross click")}),O.Vb(4,"span",3),O.Ic(5,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"div",4),O.Vb(7,"ejs-grid",5,6),O.fc("queryCellInfo",function(t){return e.queryCellInfoEvent(t)}),O.Vb(9,"e-columns"),O.Vb(10,"e-column",7),O.Gc(11,pn,1,1,"ng-template",null,8,O.Hc),O.Ub(),O.Qb(13,"e-column",9),O.Qb(14,"e-column",10),O.Vb(15,"e-column",11),O.Gc(16,gn,2,1,"ng-template",null,8,O.Hc),O.Ub(),O.Gc(18,mn,1,2,"ng-template",12,8,O.Hc),O.Ub(),O.Ub(),O.Vb(20,"div",13),O.Vb(21,"div",14),O.Vb(22,"table",15),O.Vb(23,"thead"),O.Vb(24,"tr"),O.Vb(25,"th",16),O.Ic(26,"5>= X >=4.5 \u8d85\u51fa\u9810\u671f"),O.Ub(),O.Vb(27,"th",16),O.Ic(28,"4.5> X >=4 \u7b26\u5408\u9810\u671f"),O.Ub(),O.Vb(29,"th",16),O.Ic(30,"4 > X >=3 \u5927\u90e8\u5206\u7b26\u5408\u9810\u671f"),O.Ub(),O.Vb(31,"th",16),O.Ic(32,"3> X >=2 \u90e8\u5206\u7b26\u5408\u9810\u671f"),O.Ub(),O.Vb(33,"th",16),O.Ic(34,"2> X >= 0 \u4e0d\u4f73\u4e0d\u7b26\u5408\u9810\u671f"),O.Ub(),O.Ub(),O.Ub(),O.Vb(35,"tbody"),O.Vb(36,"tr"),O.Vb(37,"td"),O.Ic(38,"Exceed expectation"),O.Ub(),O.Vb(39,"td"),O.Ic(40,"Meet expectation"),O.Ub(),O.Vb(41,"td"),O.Ic(42,"Mostly meet expectation"),O.Ub(),O.Vb(43,"td"),O.Ic(44,"Partly meet expectation"),O.Ub(),O.Vb(45,"td"),O.Ic(46,"Poorly or not meet expectation"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(47,"div",13),O.Vb(48,"div",14),O.Gc(49,vn,13,3,"table",17),O.Gc(50,yn,3,0,"div",18),O.Vb(51,"table",19),O.Vb(52,"thead"),O.Vb(53,"tr"),O.Vb(54,"th",20),O.Ic(55,"L1 comment"),O.Qb(56,"br"),O.Ic(57,"\u76f4\u5c6c\u4e3b\u7ba1\u8a55\u8a9e\uff1a"),O.Ub(),O.Vb(58,"th",21),O.Ic(59),O.Ub(),O.Vb(60,"th",20),O.Ic(61,"L1 score"),O.Qb(62,"br"),O.Ic(63,"\u76f4\u5c6c\u4e3b\u7ba1\u8a55\u5206"),O.Ub(),O.Vb(64,"th",22),O.Ic(65),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Gc(66,In,3,0,"div",18),O.Vb(67,"table",23),O.Vb(68,"thead"),O.Vb(69,"tr"),O.Vb(70,"th",24),O.Ic(71,"Comment"),O.Ub(),O.Vb(72,"th",25),O.Ic(73,"KPI Score"),O.Ub(),O.Ub(),O.Ub(),O.Vb(74,"tbody"),O.Vb(75,"tr"),O.Vb(76,"td",26),O.Vb(77,"div",27),O.Vb(78,"textarea",28),O.fc("ngModelChange",function(t){return e.content=t}),O.Ub(),O.Ub(),O.Ub(),O.Vb(79,"td",26),O.Vb(80,"div",27),O.Vb(81,"ejs-dropdownlist",29,30),O.fc("valueChange",function(t){return e.point=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(83,"div",31),O.Vb(84,"button",32),O.fc("click",function(){return e.activeModal.close("Close click")}),O.Ic(85),O.Ub(),O.Vb(86,"button",33),O.fc("click",function(){return e.finish()}),O.Ic(87),O.Ub(),O.Ub(),O.Ub()),2&t&&(O.Cb(2),O.Kc("Self-score of KPI Objective (",e.data.objective,") - L2"),O.Cb(5),O.oc("dataSource",e.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings)("allowExcelExport",!0),O.Cb(11),O.oc("ngForOf",e.columns),O.Cb(31),O.oc("ngIf",e.isQuarter2Or4),O.Cb(1),O.oc("ngIf",e.isQuarter2Or4&&!1===e.selfScored),O.Cb(9),O.Jc(e.l1CommentContent||""),O.Cb(6),O.Jc(e.l1Point||0),O.Cb(1),O.oc("ngIf",!1===e.l1Scored),O.Cb(12),O.oc("ngModel",e.content),O.Cb(3),O.oc("dataSource",e.kpiData)("value",e.point)("fields",e.fields)("allowFiltering",!0),O.Cb(4),O.Jc("Close"),O.Cb(1),O.oc("disabled",!1===e.l1Scored||e.isQuarter2Or4&&!1===e.selfScored),O.Cb(1),O.Jc("Finish"))},directives:[v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c,b.l,b.m,h.a,h.f,h.i,m.b],styles:["#comment[_ngcontent-%COMP%]{border:2px solid #ffc107!important;font-family:Helvetica Neue,Helvetica,Arial,sans-serif,-apple-system,BlinkMacSystemFont}#comment[_ngcontent-%COMP%], #comment.form-control[_ngcontent-%COMP%]:focus{color:#212529!important;font-size:14px!important}#comment.form-control[_ngcontent-%COMP%]:focus{background-color:#fff!important;border-color:#ffc107!important;outline:0!important;box-shadow:0 0 0 .2rem rgba(32,168,216,.25)}.e-input-group.e-control-wrapper[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error), .e-input-group[_ngcontent-%COMP%]:not(.e-success):not(.e-warning):not(.e-error){border:2px solid #ffc107!important}"]}),Un),Vn=((Sn=function t(e){s(this,t),this.template=e}).\u0275fac=function(t){return new(t||Sn)(O.Pb(O.L))},Sn.\u0275dir=O.Kb({type:Sn,selectors:[["ng-template","name",""]],inputs:{name:"name"}}),Sn),kn=c("BrIm"),Tn=["grid"],xn=["importModal"],wn=["remoteDataBinding"];function Mn(t,e){if(1&t&&(O.Vb(0,"div"),O.Ic(1),O.Ub()),2&t){var i=O.ic().$implicit;O.Cb(1),O.Kc(" ",i.name," ")}}function Dn(t,e){if(1&t&&(O.Tb(0),O.Vb(1,"e-tabitem",17),O.Gc(2,Mn,2,1,"ng-template",null,18,O.Hc),O.Ub(),O.Sb()),2&t){var i=e.$implicit,n=O.ic();O.Cb(1),O.oc("content",n.getGridTemplate(i.position))}}function An(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic(3);O.Kc(" ",n.NO(i.index)," ")}}function On(t,e){1&t&&(O.Vb(0,"span",28),O.Ic(1,"Rejected"),O.Ub())}function Pn(t,e){1&t&&(O.Vb(0,"span",29),O.Ic(1,"Done"),O.Ub())}function jn(t,e){if(1&t&&(O.Vb(0,"span"),O.Ic(1),O.Ub(),O.Gc(2,On,2,0,"span",26),O.Gc(3,Pn,2,0,"span",27)),2&t){var i=e.$implicit;O.Cb(1),O.Jc(i.topic),O.Cb(1),O.oc("ngIf",i.isReject&&i.isDisplayAction),O.Cb(1),O.oc("ngIf",i.isUpdatedResult)}}function Ln(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openActionModalComponent(t)}),O.Ic(1,"Action"),O.Ub()}}function Gn(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openUpdateResultModalComponent(t)}),O.Ic(1,"Update Result"),O.Ub()}}function Fn(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openSelfScoreModalComponent(t)}),O.Ic(1,"Self-score"),O.Ub()}}function Rn(t,e){if(1&t&&(O.Vb(0,"div",30),O.Gc(1,Ln,2,0,"button",31),O.Gc(2,Gn,2,0,"button",31),O.Gc(3,Fn,2,0,"button",31),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.oc("ngIf",i.isDisplayAction),O.Cb(1),O.oc("ngIf",i.isDisplayUploadResult),O.Cb(1),O.oc("ngIf",i.isDisplaySelfScore)}}function En(t,e){if(1&t&&(O.Vb(0,"div"),O.Vb(1,"ejs-grid",20,21),O.Vb(3,"e-columns"),O.Vb(4,"e-column",22),O.Gc(5,An,1,1,"ng-template",null,23,O.Hc),O.Ub(),O.Vb(7,"e-column",24),O.Gc(8,jn,4,3,"ng-template",null,23,O.Hc),O.Ub(),O.Vb(10,"e-column",25),O.Gc(11,Rn,4,3,"ng-template",null,23,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic(2);O.Cb(1),O.oc("dataSource",i.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",i.toolbarOptions)("pageSettings",i.pageSettings)("allowExcelExport",!0)}}function Bn(t,e){1&t&&(O.Vb(0,"div"),O.Vb(1,"p",33),O.Ic(2," No authority to view. "),O.Ub(),O.Ub())}function Nn(t,e){if(1&t&&(O.Gc(0,En,13,7,"div",19),O.Gc(1,Bn,3,0,"div",19)),2&t){var i=O.ic();O.oc("ngIf",i.isAllowAccess(1)),O.Cb(1),O.oc("ngIf",!i.isAllowAccess(1))}}function _n(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic(3);O.Kc(" ",n.NO(i.index)," ")}}function Kn(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openKPIScoreModalComponent(t)}),O.Ic(1,"KPI Score"),O.Ub()}}function Hn(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openAttitudeScoreModalComponent(t)}),O.Ic(1,"Attitude Score"),O.Ub()}}function Jn(t,e){if(1&t&&(O.Vb(0,"div",30),O.Gc(1,Kn,2,0,"button",31),O.Gc(2,Hn,2,0,"button",31),O.Ub()),2&t){var i=e.$implicit,n=O.ic(3);O.Cb(1),O.oc("ngIf",i.type==n.KPI),O.Cb(1),O.oc("ngIf",i.type==n.Attitude)}}function zn(t,e){if(1&t&&(O.Vb(0,"div"),O.Vb(1,"ejs-grid",20,21),O.Vb(3,"e-columns"),O.Vb(4,"e-column",22),O.Gc(5,_n,1,1,"ng-template",null,23,O.Hc),O.Ub(),O.Qb(7,"e-column",34),O.Vb(8,"e-column",25),O.Gc(9,Jn,3,2,"ng-template",null,23,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic(2);O.Cb(1),O.oc("dataSource",i.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",i.toolbarOptions)("pageSettings",i.pageSettings)("allowExcelExport",!0)}}function Qn(t,e){1&t&&(O.Vb(0,"div"),O.Vb(1,"p",33),O.Ic(2," No authority to view. "),O.Ub(),O.Ub())}function $n(t,e){if(1&t&&(O.Gc(0,zn,11,7,"div",19),O.Gc(1,Qn,3,0,"div",19)),2&t){var i=O.ic();O.oc("ngIf",i.isAllowAccess(2)),O.Cb(1),O.oc("ngIf",!i.isAllowAccess(2))}}function Yn(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic(3);O.Kc(" ",n.NO(i.index)," ")}}function qn(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openKPIScoreL2ModalComponent(t)}),O.Ic(1,"KPI Score"),O.Ub()}}function Wn(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openAttitudeScoreL2ModalComponent(t)}),O.Ic(1,"Attitude Score"),O.Ub()}}function Xn(t,e){if(1&t&&(O.Vb(0,"div",30),O.Gc(1,qn,2,0,"button",31),O.Gc(2,Wn,2,0,"button",31),O.Ub()),2&t){var i=e.$implicit,n=O.ic(3);O.Cb(1),O.oc("ngIf",i.type==n.KPI),O.Cb(1),O.oc("ngIf",i.type==n.Attitude)}}function Zn(t,e){if(1&t&&(O.Vb(0,"div"),O.Vb(1,"ejs-grid",20,21),O.Vb(3,"e-columns"),O.Vb(4,"e-column",22),O.Gc(5,Yn,1,1,"ng-template",null,23,O.Hc),O.Ub(),O.Qb(7,"e-column",34),O.Vb(8,"e-column",25),O.Gc(9,Xn,3,2,"ng-template",null,23,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic(2);O.Cb(1),O.oc("dataSource",i.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",i.toolbarOptions)("pageSettings",i.pageSettings)("allowExcelExport",!0)}}function to(t,e){1&t&&(O.Vb(0,"div"),O.Vb(1,"p",33),O.Ic(2," No authority to view. "),O.Ub(),O.Ub())}function eo(t,e){if(1&t&&(O.Gc(0,Zn,11,7,"div",19),O.Gc(1,to,3,0,"div",19)),2&t){var i=O.ic();O.oc("ngIf",i.isAllowAccess(3)),O.Cb(1),O.oc("ngIf",!i.isAllowAccess(3))}}function io(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic(2);O.Kc(" ",n.NO(i.index)," ")}}function no(t,e){if(1&t){var i=O.Wb();O.Vb(0,"div",30),O.Vb(1,"button",32),O.fc("click",function(){return O.Ac(i),O.ic(2).gotoUpdate()}),O.Ic(2,"Update"),O.Ub(),O.Ub()}}function oo(t,e){if(1&t&&(O.Vb(0,"div"),O.Vb(1,"ejs-grid",20,21),O.Vb(3,"e-columns"),O.Vb(4,"e-column",22),O.Gc(5,io,1,1,"ng-template",null,23,O.Hc),O.Ub(),O.Qb(7,"e-column",35),O.Vb(8,"e-column",25),O.Gc(9,no,3,0,"ng-template",null,23,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic();O.Cb(1),O.oc("dataSource",i.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",i.toolbarOptions)("pageSettings",i.pageSettings)("allowExcelExport",!0)}}function co(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic(3);O.Kc(" ",n.NO(i.index)," ")}}function ao(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openKPIScoreGHRModalComponent(t)}),O.Ic(1,"SMART Score"),O.Ub()}}function ro(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openAttitudeScoreGHRModalComponent(t)}),O.Ic(1,"Attitude Score"),O.Ub()}}function lo(t,e){if(1&t&&(O.Vb(0,"div",30),O.Gc(1,ao,2,0,"button",31),O.Gc(2,ro,2,0,"button",31),O.Ub()),2&t){var i=e.$implicit,n=O.ic(3);O.Cb(1),O.oc("ngIf",i.type==n.KPI),O.Cb(1),O.oc("ngIf",i.type==n.Attitude)}}function so(t,e){if(1&t&&(O.Vb(0,"div"),O.Vb(1,"ejs-grid",20,21),O.Vb(3,"e-columns"),O.Vb(4,"e-column",22),O.Gc(5,co,1,1,"ng-template",null,23,O.Hc),O.Ub(),O.Qb(7,"e-column",34),O.Vb(8,"e-column",25),O.Gc(9,lo,3,2,"ng-template",null,23,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic(2);O.Cb(1),O.oc("dataSource",i.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",i.toolbarOptions)("pageSettings",i.pageSettings)("allowExcelExport",!0)}}function uo(t,e){1&t&&(O.Vb(0,"div"),O.Vb(1,"p",33),O.Ic(2," No authority to view. "),O.Ub(),O.Ub())}function bo(t,e){if(1&t&&(O.Gc(0,so,11,7,"div",19),O.Gc(1,uo,3,0,"div",19)),2&t){var i=O.ic();O.oc("ngIf",i.isAllowAccess(5)),O.Cb(1),O.oc("ngIf",!i.isAllowAccess(5))}}function ho(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic(3);O.Kc(" ",n.NO(i.index)," ")}}function po(t,e){if(1&t){var i=O.Wb();O.Vb(0,"div",30),O.Vb(1,"button",37),O.fc("click",function(){O.Ac(i);var t=e.$implicit;return O.ic(3).openAttitudeScoreFunctionalLeaderModalComponent(t)}),O.Ic(2,"Attitude Score"),O.Ub(),O.Ub()}}function fo(t,e){if(1&t&&(O.Vb(0,"div"),O.Vb(1,"ejs-grid",20,21),O.Vb(3,"e-columns"),O.Vb(4,"e-column",22),O.Gc(5,ho,1,1,"ng-template",null,23,O.Hc),O.Ub(),O.Qb(7,"e-column",36),O.Vb(8,"e-column",25),O.Gc(9,po,3,0,"ng-template",null,23,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic(2);O.Cb(1),O.oc("dataSource",i.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",i.toolbarOptions)("pageSettings",i.pageSettings)("allowExcelExport",!0)}}function go(t,e){1&t&&(O.Vb(0,"div"),O.Vb(1,"p",33),O.Ic(2," No authority to view. "),O.Ub(),O.Ub())}function mo(t,e){if(1&t&&(O.Gc(0,fo,11,7,"div",19),O.Gc(1,go,3,0,"div",19)),2&t){var i=O.ic();O.oc("ngIf",i.isAllowAccess(6)),O.Cb(1),O.oc("ngIf",!i.isAllowAccess(6))}}function vo(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic(2);O.Kc(" ",n.NO(i.index)," ")}}function yo(t,e){if(1&t){var i=O.Wb();O.Vb(0,"div",30),O.Vb(1,"button",32),O.fc("click",function(){O.Ac(i);var t=e.$implicit;return O.ic(2).openKPIScoreGMModalComponent(t)}),O.Ic(2,"KPI Score"),O.Ub(),O.Ub()}}function Io(t,e){if(1&t&&(O.Vb(0,"ejs-grid",20,21),O.Vb(2,"e-columns"),O.Vb(3,"e-column",22),O.Gc(4,vo,1,1,"ng-template",null,23,O.Hc),O.Ub(),O.Qb(6,"e-column",34),O.Vb(7,"e-column",25),O.Gc(8,yo,3,0,"ng-template",null,23,O.Hc),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic();O.oc("dataSource",i.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",i.toolbarOptions)("pageSettings",i.pageSettings)("allowExcelExport",!0)}}function So(t,e){if(1&t){var i=O.Wb();O.Vb(0,"div",38),O.Vb(1,"h4",39),O.Qb(2,"i",40),O.Ic(3," Import Excel "),O.Ub(),O.Vb(4,"button",41),O.fc("click",function(){return e.$implicit.dismiss("Cross click")}),O.Vb(5,"span",42),O.Ic(6,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(7,"div",43),O.Vb(8,"div",0),O.Vb(9,"div",44),O.Vb(10,"div",2),O.Vb(11,"label",45),O.Ic(12,"Select File (*Notice: Excel file must be followed a system template. If you do not have a template, please "),O.Vb(13,"a",46),O.Ic(14,"click here"),O.Ub(),O.Ic(15," to download. Thank you!)"),O.Ub(),O.Vb(16,"input",47),O.fc("change",function(t){return O.Ac(i),O.ic().fileProgress(t)}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(17,"div",48),O.Vb(18,"button",49),O.fc("click",function(){return O.Ac(i),O.ic().uploadFile()}),O.Ic(19,"Upload File"),O.Ub(),O.Vb(20,"button",50),O.fc("click",function(){return e.$implicit.close("Close click")}),O.Ic(21,"Close"),O.Ub(),O.Ub()}if(2&t){var n=O.ic();O.Cb(13),O.oc("href",n.excelDownloadUrl,O.Cc)}}var Uo,Co,Vo,ko=((Uo=function(){function t(e,i,n,o,c,a,r,l){s(this,t),this.service=e,this.router=i,this.alertify=n,this.todolistService=o,this.accountGroupService=c,this.modalService=a,this.datePipe=r,this.performanceService=l,this.toolbarOptions=["Search"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.KPI=ke.KPI,this.Attitude=ke.Attitude,this.index=1,this.subscription=[],this.sheetName="Upload Details",this.isAuthorize=!1}return u(t,[{key:"ngOnDestroy",value:function(){}},{key:"onChangeReportTime",value:function(t){this.loadData()}},{key:"ngOnInit",value:function(){var t=this;this.currentTime=new Date,this.content="",this.loadAccountGroupData(),this.subscription.push(this.todolistService.currentMessage.subscribe(function(e){e&&t.loadData()}))}},{key:"isAllowAccess",value:function(t){return(JSON.parse(localStorage.getItem("user")).accountGroupPositions||[]).includes(t)}},{key:"loadData",value:function(){var t,e;this.currentTimeRequest=this.datePipe.transform(this.currentTime,"YYYY-MM-dd HH:mm");var i=0;switch(""===this.content?(this.content=null===(t=this.accountGroupData[0])||void 0===t?void 0:t.name,i=Ue[null===(e=this.accountGroupData[0])||void 0===e?void 0:e.name]||0):i=Ue[this.content]||0,i){case Ue.L0:this.scoreType=Ve.L0,this.loadDataL0();break;case Ue.L1:this.scoreType=Ve.L1,this.loadDataL1();break;case Ue.FunctionalLeader:this.scoreType=Ve.FunctionalLeader,this.loadDataFunctionalLeader();break;case Ue.L2:this.scoreType=Ve.L2,this.loadDataL2();break;case Ue.Updater:this.scoreType=Ve.FHO,this.loadDataUpdater();break;case Ue.GHR:this.scoreType=Ve.GHR,this.loadDataGHR();break;case Ue.GM:this.loadDataGM(),this.scoreType=Ve.GM}}},{key:"selected",value:function(t){var e,i;this.currentTimeRequest=this.datePipe.transform(this.currentTime,"YYYY-MM-dd HH:mm"),this.index=t.selectedIndex+1;var n=0;switch(this.content=t.selectedItem.outerText,""===this.content?(this.content=null===(e=this.accountGroupData[0])||void 0===e?void 0:e.name,n=Ue[null===(i=this.accountGroupData[0])||void 0===i?void 0:i.name]||0):n=Ue[t.selectedItem.outerText],n){case Ue.L0:this.scoreType=Ve.L0,this.loadDataL0();break;case Ue.L1:this.scoreType=Ve.L1,this.loadDataL1();break;case Ue.GFL:this.scoreType=Ve.FunctionalLeader,this.loadDataFunctionalLeader();break;case Ue.L2:this.scoreType=Ve.L2,this.loadDataL2();break;case Ue.Updater:this.scoreType=Ve.FHO,this.loadDataUpdater();break;case Ue.GHR:this.scoreType=Ve.GHR,this.loadDataGHR();break;case Ue.GM:this.loadDataGM(),this.scoreType=Ve.GM}}},{key:"getGridTemplate",value:function(t){var e=this.Gridtemplates.find(function(e){return e.name===t+""});return e?e.template:null}},{key:"loadDataL0",value:function(){var t=this;this.gridData=[],this.todolistService.l0(this.currentTimeRequest).subscribe(function(e){t.gridData=e})}},{key:"loadDataL1",value:function(){var t=this;this.gridData=[],this.todolistService.l1(this.currentTimeRequest).subscribe(function(e){t.gridData=e})}},{key:"loadDataUpdater",value:function(){var t=this;this.gridData=[],this.todolistService.updater(this.currentTimeRequest).subscribe(function(e){t.gridData=e})}},{key:"loadDataFunctionalLeader",value:function(){var t=this;this.gridData=[],this.todolistService.functionalLeader(this.currentTimeRequest).subscribe(function(e){t.gridData=e})}},{key:"loadDataL2",value:function(){var t=this;this.gridData=[],this.todolistService.l2(this.currentTimeRequest).subscribe(function(e){t.gridData=e})}},{key:"loadDataFHO",value:function(){var t=this;this.gridData=[],this.todolistService.fho(this.currentTimeRequest).subscribe(function(e){t.gridData=e})}},{key:"loadDataGHR",value:function(){var t=this;this.gridData=[],this.todolistService.ghr(this.currentTimeRequest).subscribe(function(e){t.gridData=e})}},{key:"loadDataGM",value:function(){var t=this;this.gridData=[],this.todolistService.gm(this.currentTimeRequest).subscribe(function(e){t.gridData=e})}},{key:"loadAccountGroupData",value:function(){var t=this;this.accountGroupService.getAccountGroupForTodolistByAccountId().subscribe(function(e){t.accountGroupData=e,t.loadData()})}},{key:"gotoUpdate",value:function(){return this.router.navigateByUrl("/transaction/upload-kpi-objective")}},{key:"openActionModalComponent",value:function(t){var e=this.modalService.open(Qe,{size:"xl",backdrop:"static"});e.componentInstance.data=t,e.componentInstance.isReject=t.isReject,e.result.then(function(t){},function(t){})}},{key:"openUpdateResultModalComponent",value:function(t){var e=this.modalService.open(pi,{size:"xl",backdrop:"static"});e.componentInstance.data=t,e.componentInstance.currentTime=this.currentTime,e.componentInstance.isReject=t.isReject,e.result.then(function(t){},function(t){})}},{key:"openSelfScoreModalComponent",value:function(t){var e=this.modalService.open(ni,{size:"xl",backdrop:"static"});e.componentInstance.data=t,e.componentInstance.periodTypeCode=Te.Monthly,e.componentInstance.scoreType=this.scoreType,e.result.then(function(t){},function(t){})}},{key:"openKPIScoreModalComponent",value:function(t){var e=this.modalService.open(Ke,{size:"xl",backdrop:"static"});e.componentInstance.data=t,e.componentInstance.periodTypeCode=Te.Quarterly,e.componentInstance.scoreType=this.scoreType,e.componentInstance.currentTime=this.currentTime,e.result.then(function(t){},function(t){})}},{key:"openKPIScoreL2ModalComponent",value:function(t){var e=this.modalService.open(Cn,{size:"xl",backdrop:"static"});e.componentInstance.data=t,e.componentInstance.periodTypeCode=Te.Quarterly,e.componentInstance.scoreType=this.scoreType,e.componentInstance.currentTime=this.currentTime,e.result.then(function(t){},function(t){})}},{key:"openKPIScoreGHRModalComponent",value:function(t){var e=this.modalService.open(cn,{size:"xl",backdrop:"static"});e.componentInstance.data=t,e.componentInstance.periodTypeCode=Te.Quarterly,e.componentInstance.scoreType=this.scoreType,e.componentInstance.currentTime=this.currentTime,e.result.then(function(t){},function(t){})}},{key:"openKPIScoreGMModalComponent",value:function(t){var e=this.modalService.open(Wi,{size:"xl",backdrop:"static"});e.componentInstance.data=t,e.componentInstance.periodTypeCode=Te.Quarterly,e.componentInstance.scoreType=this.scoreType,e.componentInstance.currentTime=this.currentTime,e.result.then(function(t){},function(t){})}},{key:"openAttitudeScoreModalComponent",value:function(t){var e=this.modalService.open(Ti,{size:"xl",backdrop:"static"});e.componentInstance.data=t,e.componentInstance.scoreType=this.scoreType,e.result.then(function(t){},function(t){})}},{key:"openAttitudeScoreL2ModalComponent",value:function(t){var e=this.modalService.open(Gi,{size:"xl",backdrop:"static"});e.componentInstance.data=t,e.componentInstance.scoreType=this.scoreType,e.result.then(function(t){},function(t){})}},{key:"openAttitudeScoreGHRModalComponent",value:function(t){var e=this.modalService.open(Ki,{size:"xl",backdrop:"static"});e.componentInstance.data=t,e.componentInstance.scoreType=this.scoreType,e.result.then(function(t){},function(t){})}},{key:"openAttitudeScoreFunctionalLeaderModalComponent",value:function(t){var e=this.modalService.open(bn,{size:"xl",backdrop:"static"});e.componentInstance.data=t,e.componentInstance.scoreType=this.scoreType,e.result.then(function(t){},function(t){})}},{key:"openImportExcelModalComponent",value:function(){this.excelDownloadUrl="".concat(A.a.apiUrl,"todolist/ExcelExport"),this.modalReference=this.modalService.open(this.importModal,{size:"xl"})}},{key:"fileProgress",value:function(t){this.file=t.target.files[0]}},{key:"uploadFile",value:function(){var t=this,e=JSON.parse(localStorage.getItem("user")).id;this.todolistService.import(this.file,e).subscribe(function(e){t.loadDataFHO(),t.alertify.success("The excel has been imported into system!"),t.modalService.dismissAll()},function(e){t.alertify.error(e,!0)})}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}}]),t}()).\u0275fac=function(t){return new(t||Uo)(O.Pb(ee),O.Pb(_.c),O.Pb(V.a),O.Pb(Me),O.Pb(x.a),O.Pb(N.b),O.Pb(b.e),O.Pb(Se))},Uo.\u0275cmp=O.Jb({type:Uo,selectors:[["app-todolist"]],viewQuery:function(t,e){var i;1&t&&(O.Mc(Tn,1),O.Mc(xn,1),O.Mc(wn,1),O.Mc(Vn,1)),2&t&&(O.wc(i=O.gc())&&(e.grid=i.first),O.wc(i=O.gc())&&(e.importModal=i.first),O.wc(i=O.gc())&&(e.spreadsheetObj=i.first),O.wc(i=O.gc())&&(e.Gridtemplates=i))},features:[O.Bb([b.e])],decls:27,vars:2,consts:[[1,"row"],[1,"col-md-3","d-flex","justify-content-center"],[1,"form-group"],["for","exampleInputEmail1"],[2,"width","100%",3,"ngModel","ngModelChange","valueChange"],[1,"card"],[1,"card-body"],["id","element",3,"selected"],[4,"ngFor","ngForOf"],["name","1"],["GridtemplateRef",""],["name","2"],["name","3"],["name","4"],["name","5"],["name","6"],["importModal",""],[3,"content"],["headerText",""],[4,"ngIf"],["gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","toolbar","pageSettings","allowExcelExport"],["grid",""],["field","#","headerText","#","textAlign","Center","width","80","type","number"],["template",""],["field","topic","headerText","KPI Objective","type","string"],["field","option","headerText","Option"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[1,"badge","badge-danger"],[1,"badge","badge-success"],[1,"btn-group"],["type","button","class","btn btn-sm btn-success mr-2",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-success","mr-2",3,"click"],[2,"text-align","center","color","red","font-size","xx-large"],["field","objective","headerText","KPI Objective","type","string"],["field","title","headerText","KPI Objective","type","string"],["field","objective","headerText","Objective","type","string"],["type","button",1,"btn","btn-sm","btn-secondary","mr-2",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-6"],["for","Name"],[3,"href"],["name","file","type","file",1,"form-control",3,"change"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"div",1),O.Vb(2,"div",2),O.Vb(3,"label",3),O.Ic(4,"Change System Date"),O.Ub(),O.Vb(5,"kendo-datepicker",4),O.fc("ngModelChange",function(t){return e.currentTime=t})("valueChange",function(t){return e.onChangeReportTime(t)}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"div",5),O.Vb(7,"div",6),O.Vb(8,"ejs-tab",7),O.fc("selected",function(t){return e.selected(t)}),O.Vb(9,"e-tabitems"),O.Gc(10,Dn,4,1,"ng-container",8),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Gc(11,Nn,2,2,"ng-template",9,10,O.Hc),O.Gc(13,$n,2,2,"ng-template",11,10,O.Hc),O.Gc(15,eo,2,2,"ng-template",12,10,O.Hc),O.Gc(17,oo,11,7,"ng-template",13,10,O.Hc),O.Gc(19,bo,2,2,"ng-template",14,10,O.Hc),O.Gc(21,mo,2,2,"ng-template",15,10,O.Hc),O.Gc(23,Io,10,7,"ng-template",null,10,O.Hc),O.Gc(25,So,22,1,"ng-template",null,16,O.Hc)),2&t&&(O.Cb(5),O.oc("ngModel",e.currentTime),O.Cb(5),O.oc("ngForOf",e.accountGroupData))},directives:[f.b,h.f,h.i,kn.a,kn.c,b.l,Vn,kn.b,b.m,v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c],styles:[""]}),Uo),To=c("mrSG"),xo=["remoteDataBinding"],wo=function(){return{fontWeight:"bold",textAlign:"center",backgroundColor:"#4b5366",color:"#ffffff",fontSize:"12pt"}},Mo=function(){return{textAlign:"center"}},Do=((Co=function(){function t(e,i,n){s(this,t),this.service=e,this.datePipe=i,this.alertify=n}return u(t,[{key:"ngOnInit",value:function(){this.loadData()}},{key:"loadData",value:function(){var t=this;this.service.getKPIObjectivesByUpdater().subscribe(function(e){t.data=e.data.map(function(e){return{objectiveName:e.objectiveName,percentage:e.percentage,createdTime:"0001-01-01T00:00:00"===e.createdTime?"":t.datePipe.transform(e.createdTime,"yyyy-MM-dd HH:mm:ss")}}),t.originalData=e.data})}},{key:"contextMenuBeforeOpen",value:function(t){console.log(t),t.element.id===this.spreadsheetObj.element.id+"_contextmenu"&&(this.spreadsheetObj.removeContextMenuItems(["Paste"],!1),this.spreadsheetObj.removeContextMenuItems(["Paste Special"],!1),this.spreadsheetObj.removeContextMenuItems(["Cut"],!1),this.spreadsheetObj.removeContextMenuItems(["Copy"],!1))}},{key:"submit",value:function(){return Object(To.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,i,n,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=[],i=function(){console.log(o.spreadsheetObj.getRowData(n+1,0));var t=o.spreadsheetObj.getRowData(n+1,0),i=t[0].objectiveName,c=t[0].percentage,a=o.originalData.filter(function(t){return t.objectiveName==i})[0];a.percentage=c,e.push(a)},n=0;n<this.originalData.length;n++)i();console.log(e),0!==e.length?this.service.submit(e).subscribe(function(t){console.log(t),t.success?(o.alertify.success(T.a.CREATED_OK_MSG),o.loadData()):o.alertify.warning(T.a.SYSTEM_ERROR_MSG)},function(){return o.alertify.warning(T.a.SYSTEM_ERROR_MSG)}):this.alertify.warning("Not yet complete. Can not submit! \u5c1a\u672a\u5b8c\u6210\uff0c\u7121\u6cd5\u63d0\u4ea4",!0);case 4:case"end":return t.stop()}},t,this)}))}}]),t}()).\u0275fac=function(t){return new(t||Co)(O.Pb(Se),O.Pb(b.e),O.Pb(V.a))},Co.\u0275cmp=O.Jb({type:Co,selectors:[["app-upload-kpi"]],viewQuery:function(t,e){var i;1&t&&O.Mc(xo,1),2&t&&O.wc(i=O.gc())&&(e.spreadsheetObj=i.first)},features:[O.Bb([b.e])],decls:22,vars:24,consts:[[1,"row"],[1,"col-md-12","d-flex","justify-content-between","my-2"],["type","button","routerLink","/transaction/todolist",1,"btn","btn-success",2,"cursor","pointer"],["type","button",1,"btn","btn-secondary",2,"cursor","pointer",3,"click"],[3,"height","showRibbon","showSheetTabs","contextMenuBeforeOpen"],["remoteDataBinding",""],[3,"name"],["startCell","A2",3,"showFieldAsHeader","dataSource"],["value","KPI Objective \u4e00\u968eKPI"],["value","Monthly Performance","format","@"],["value","Upload date / time"],[3,"width"],["format","@",3,"width"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"div",1),O.Vb(2,"button",2),O.Ic(3,"Back"),O.Ub(),O.Vb(4,"button",3),O.fc("click",function(){return e.submit()}),O.Ic(5,"Submit"),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"ejs-spreadsheet",4,5),O.fc("contextMenuBeforeOpen",function(t){return e.contextMenuBeforeOpen(t)}),O.Vb(8,"e-sheets"),O.Vb(9,"e-sheet",6),O.Vb(10,"e-ranges"),O.Qb(11,"e-range",7),O.Ub(),O.Vb(12,"e-rows"),O.Vb(13,"e-row"),O.Vb(14,"e-cells"),O.Qb(15,"e-cell",8),O.Qb(16,"e-cell",9),O.Qb(17,"e-cell",10),O.Ub(),O.Ub(),O.Ub(),O.Vb(18,"e-columns"),O.Qb(19,"e-column",11),O.Qb(20,"e-column",12),O.Qb(21,"e-column",11),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t&&(O.Cb(6),O.oc("height",500)("showRibbon",!1)("showSheetTabs",!1),O.Cb(3),O.oc("name","Upload Details"),O.Cb(2),O.oc("showFieldAsHeader",!1)("dataSource",e.data),O.Cb(4),O.Ec(O.rc(19,wo)),O.Cb(1),O.Ec(O.rc(20,wo)),O.Cb(1),O.Ec(O.rc(21,wo)),O.Cb(2),O.oc("width",200),O.Cb(1),O.Ec(O.rc(22,Mo)),O.oc("width",150),O.Cb(1),O.Ec(O.rc(23,Mo)),O.oc("width",200))},directives:[_.d,H.l,H.j,H.i,H.f,H.e,H.h,H.g,H.b,H.a,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c],styles:[""]}),Co),Ao=c("Uc7L"),Oo=["defaultupload"],Po=((Vo=function(){function t(e,i){s(this,t),this.activeModal=e,this.service=i,this.base=A.a.apiUrl,this.allowExtensions=".doc, .docx, .xls, .xlsx, .pdf",this.files=[],this.dropElement=document.getElementsByClassName("control_wrapper")[0],this.path={saveUrl:""}}return u(t,[{key:"ngOnInit",value:function(){this.loadData(),this.path={saveUrl:"".concat(this.base,"UploadFile/Save?kpiId=").concat(this.data.id,"&uploadTime=").concat(this.currentTime.toLocaleDateString()),removeUrl:"".concat(this.base,"UploadFile/remove?kpiId=").concat(this.data.id,"&uploadTime=").concat(this.currentTime.toLocaleDateString())},this.dropElement=document.getElementsByClassName("control_wrapper")[0],console.log(this.dropElement)}},{key:"onFileRemove",value:function(t){t.postRawFile=!1}},{key:"success",value:function(t){this.service.changeUploadMessage(!0)}},{key:"loadData",value:function(){var t=this;this.files=[],this.service.getAttackFiles(this.data.id,this.currentTime.toLocaleDateString()).subscribe(function(e){t.files=e||[]})}},{key:"beforeUpload",value:function(t){console.log(t),t.statusText=t.response.statusText}},{key:"onSelected",value:function(t){t.filesData.splice(5);var e=this.uploadObj.getFilesData().concat(t.filesData);if(e.length>5){for(var i=0;i<e.length;i++)e.length>5&&e.shift();t.filesData=e,t.modifiedFilesData=t.filesData}t.isModified=!0,console.log(t)}}]),t}()).\u0275fac=function(t){return new(t||Vo)(O.Pb(N.a),O.Pb(E))},Vo.\u0275cmp=O.Jb({type:Vo,selectors:[["app-upload-file"]],viewQuery:function(t,e){var i;1&t&&O.Mc(Oo,1),2&t&&O.wc(i=O.gc())&&(e.uploadObj=i.first)},inputs:{data:"data",currentTime:"currentTime"},decls:15,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-0"],[1,"row"],[1,"col-12"],[1,"control_wrapper"],["id","defaultfileupload",3,"allowedExtensions","files","asyncSettings","dropArea","selected","failure","success","removing"],["defaultupload",""],[1,"modal-footer","d-flex","justify-content-end"],["type","button",1,"btn","btn-secondary","mr-2",3,"click"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"h4",1),O.Ic(2,"Upload multiple file "),O.Ub(),O.Vb(3,"button",2),O.fc("click",function(){return e.activeModal.dismiss("Cross click")}),O.Vb(4,"span",3),O.Ic(5,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"div",4),O.Vb(7,"div",5),O.Vb(8,"div",6),O.Vb(9,"div",7),O.Vb(10,"ejs-uploader",8,9),O.fc("selected",function(t){return e.onSelected(t)})("failure",function(t){return e.beforeUpload(t)})("success",function(t){return e.success(t)})("removing",function(t){return e.onFileRemove(t)}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(12,"div",10),O.Vb(13,"button",11),O.fc("click",function(){return e.activeModal.close("Close click")}),O.Ic(14),O.Ub(),O.Ub()),2&t&&(O.Cb(10),O.oc("allowedExtensions",e.allowExtensions)("files",e.files)("asyncSettings",e.path)("dropArea",e.dropElement),O.Cb(4),O.Jc("Close"))},directives:[Ao.a],styles:[""]}),Vo),jo=["grid"];function Lo(t,e){1&t&&(O.Vb(0,"div",41),O.Vb(1,"span",42),O.Ic(2,"%"),O.Ub(),O.Ub())}function Go(t,e){1&t&&(O.Vb(0,"div",41),O.Vb(1,"span",42),O.Ic(2,"%"),O.Ub(),O.Ub())}function Fo(t,e){1&t&&(O.Vb(0,"div",41),O.Vb(1,"span",42),O.Ic(2,"%"),O.Ub(),O.Ub())}function Ro(t,e){1&t&&(O.Vb(0,"div",41),O.Vb(1,"span",42),O.Ic(2,"%"),O.Ub(),O.Ub())}function Eo(t,e){1&t&&(O.Vb(0,"div",41),O.Vb(1,"span",42),O.Ic(2,"%"),O.Ub(),O.Ub())}function Bo(t,e){if(1&t&&(O.Vb(0,"li",43),O.Vb(1,"a",44),O.Ic(2),O.Ub(),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.oc("id",i.path)("href",i.path,O.Cc),O.Cb(1),O.Jc(i.name)}}function No(t,e){if(1&t&&(O.Vb(0,"li",43),O.Vb(1,"a",44),O.Ic(2),O.Ub(),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.oc("id",i.path)("href",i.path,O.Cc),O.Cb(1),O.Jc(i.name)}}function _o(t,e){if(1&t&&(O.Vb(0,"ul",45),O.Gc(1,No,3,3,"li",19),O.Ub()),2&t){var i=O.ic();O.Cb(1),O.oc("ngForOf",i.filesRight)}}function Ko(t,e){if(1&t&&(O.Vb(0,"th",52),O.Ic(1),O.Ub()),2&t){var i=O.ic(2);O.Db("rowspan",i.gridData.length),O.Cb(1),O.Jc(i.month)}}function Ho(t,e){if(1&t&&(O.Vb(0,"option",49),O.Ic(1),O.Ub()),2&t){var i=e.$implicit;O.oc("value",i.id),O.Cb(1),O.Jc(i.name)}}function Jo(t,e){if(1&t){var i=O.Wb();O.Tb(0),O.Vb(1,"tr"),O.Gc(2,Ko,2,2,"th",46),O.Vb(3,"th",10),O.Ic(4),O.Ub(),O.Vb(5,"td"),O.Ic(6),O.Ub(),O.Vb(7,"td"),O.Ic(8),O.Ub(),O.Vb(9,"td"),O.Ic(10),O.Ub(),O.Vb(11,"td"),O.Vb(12,"textarea",47),O.fc("ngModelChange",function(t){O.Ac(i);var n=e.index;return O.ic().onChangeContent(t,n)})("ngModelChange",function(t){return e.$implicit.doContent=t}),O.Ub(),O.Ub(),O.Vb(13,"td"),O.Vb(14,"textarea",47),O.fc("ngModelChange",function(t){O.Ac(i);var n=e.index;return O.ic().onChangeArchivement(t,n)})("ngModelChange",function(t){return e.$implicit.achievement=t}),O.Ub(),O.Ub(),O.Vb(15,"td"),O.Vb(16,"select",48),O.fc("ngModelChange",function(t){return e.$implicit.statusId=t})("ngModelChange",function(t){O.Ac(i);var n=e.index,o=e.$implicit;return O.ic().onChangeStatus(t,n,o)}),O.Vb(17,"option",49),O.Ic(18,"Chose status"),O.Ub(),O.Gc(19,Ho,2,2,"option",50),O.Ub(),O.Ub(),O.Vb(20,"td"),O.Vb(21,"textarea",51),O.fc("ngModelChange",function(t){return e.$implicit.resultContent=t})("ngModelChange",function(t){O.Ac(i);var n=e.index;return O.ic().onChangeResult(t,n)}),O.Ub(),O.Ub(),O.Ub(),O.Sb()}if(2&t){var n=e.$implicit,o=e.index,c=O.ic();O.Cb(2),O.oc("ngIf",0==o),O.Cb(2),O.Jc(o+1),O.Cb(2),O.Jc(n.content),O.Cb(2),O.Jc(n.target),O.Cb(2),O.Jc(n.deadline),O.Cb(2),O.oc("ngModel",n.doContent),O.Cb(2),O.oc("ngModel",n.achievement),O.Cb(2),O.oc("ngModel",n.statusId),O.Cb(1),O.oc("value",null),O.Cb(2),O.oc("ngForOf",c.status),O.Cb(2),O.oc("ngModel",n.resultContent)}}function zo(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic();O.Kc(" ",n.NO(i.index)," ")}}var Qo,$o=((Qo=function(){function t(e,i,n,o,c){s(this,t),this.activeModal=e,this.todolist2Service=i,this.datePipe=n,this.alertify=o,this.modalService=c,this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.toolbarOptions=["Add","Delete","Search"],this.policy="\u6548\u7387\u7cbe\u9032",this.kpi="SHC CTB IE \u5de5\u6642\u9054\u6210\u7387",this.pic="\u751f\u7522\u4e2d\u5fc3 Lai He",this.gridData=[],this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.month="",this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.actions=[],this.subscription=[],this.base=A.a.apiUrl.replace("/api/",""),this.allowExtensions=".doc, .docx, .xls, .xlsx, .pdf",this.files=[],this.filesLeft=[],this.filesRight=[]}return u(t,[{key:"ngOnDestroy",value:function(){this.subscription.forEach(function(t){return t.unsubscribe()})}},{key:"ngAfterViewInit",value:function(){$(function(){$('[data-toggle="tooltip"]').tooltip()})}},{key:"ngOnInit",value:function(){var t=this;this.subscription.push(this.todolist2Service.currentUploadMessage.subscribe(function(e){e&&t.getDownloadFiles()}));var e=this.currentTime.getMonth();this.month=this.months[1==e?12:e-1],this.getDownloadFiles(),this.loadStatusData(),this.loadData()}},{key:"openUploadModalComponent",value:function(){var t=this.modalService.open(Po,{size:"md",backdrop:"static",keyboard:!1});t.componentInstance.data=this.data,t.componentInstance.currentTime=this.currentTime,t.result.then(function(t){},function(t){})}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}},{key:"onChangeThisMonthPerformance",value:function(t){null!=this.thisMonthPerformance?this.thisMonthPerformance.performance=+t:this.thisMonthPerformance={id:0,value:0,performance:+t,kPIId:this.data.id,targetTime:(new Date).toISOString(),createdTime:(new Date).toISOString(),modifiedTime:null,yTD:0,createdBy:+JSON.parse(localStorage.getItem("user")).id}}},{key:"onChangeThisMonthTarget",value:function(t){null!=this.thisMonthTarget?this.thisMonthTarget.value=+t:this.thisMonthTarget={id:0,value:+t,performance:0,kPIId:this.data.id,targetTime:(new Date).toISOString(),createdTime:(new Date).toISOString(),modifiedTime:null,yTD:0,createdBy:+JSON.parse(localStorage.getItem("user")).id}}},{key:"onChangeNextMonthTarget",value:function(t){null!=this.nextMonthTarget?this.nextMonthTarget.value=+t:this.nextMonthTarget={id:0,value:+t,performance:0,kPIId:this.data.id,targetTime:(new Date).toISOString(),createdTime:(new Date).toISOString(),modifiedTime:null,yTD:0,createdBy:+JSON.parse(localStorage.getItem("user")).id,submitted:!1}}},{key:"onChangeThisMonthYTD",value:function(t){null!=this.thisMonthYTD?this.thisMonthYTD.yTD=+t:this.thisMonthYTD={id:0,value:this.thisMonthTargetValue,performance:this.performanceValue,kPIId:this.data.id,targetTime:(new Date).toISOString(),createdTime:(new Date).toISOString(),modifiedTime:null,yTD:+t,createdBy:+JSON.parse(localStorage.getItem("user")).id}}},{key:"download",value:function(){this.todolist2Service.download(this.data.id,this.currentTime.toLocaleDateString()).subscribe(function(t){new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});var e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e;var n=new Date;i.download="".concat(n.getFullYear()).concat(n.getMonth()).concat(n.getDay(),"_archive.zip"),i.click()})}},{key:"onChangeTargetYTD",value:function(t){null!=this.targetYTD?this.targetYTD.value=+t:this.targetYTD={id:0,value:+t,createdTime:(new Date).toISOString(),modifiedBy:null,modifiedTime:null,createdBy:+JSON.parse(localStorage.getItem("user")).id,kPIId:this.data.id}}},{key:"onChangeContent",value:function(t,e){this.gridData[e].doContent=t}},{key:"onChangeArchivement",value:function(t,e){this.gridData[e].achievement=t}},{key:"onChangeStatus",value:function(t,e,i){var n=this;this.addOrUpdateStatus(i,function(i){n.gridData[e].statusId=JSON.parse(t),n.gridData[e].actionStatusId=i.data.id})}},{key:"onChangeResult",value:function(t,e){this.gridData[e].resultContent=t}},{key:"loadData",value:function(){this.loadKPIData(),this.loadTargetData(),this.loadPDCAAndResultData(),this.loadActionData()}},{key:"loadPDCAAndResultData",value:function(){var t=this;this.gridData=[];var e=this.currentTime.toLocaleDateString();this.todolist2Service.getPDCAForL0(this.data.id||0,e).subscribe(function(e){var i;console.log(e),t.gridData=e.data,t.result=e.result,t.content=null===(i=t.result)||void 0===i?void 0:i.content})}},{key:"loadActionData",value:function(){var t=this;this.actions=[];var e=this.currentTime.toLocaleDateString();this.todolist2Service.getActionsForUpdatePDCA(this.data.id||0,e).subscribe(function(e){t.actions=e.actions||[]})}},{key:"loadKPIData",value:function(){var t=this,e=this.currentTime.toLocaleDateString();this.todolist2Service.getKPIForUpdatePDC(this.data.id||0,e).subscribe(function(e){t.type=e.type,t.kpi=e.kpi,t.policy=e.policy,t.pic=e.pic})}},{key:"loadTargetData",value:function(){var t=this,e=this.currentTime.toLocaleDateString();this.todolist2Service.getTargetForUpdatePDCA(this.data.id||0,e).subscribe(function(e){var i,n,o,c,a;t.thisMonthYTD=e.thisMonthYTD,t.thisMonthPerformance=e.thisMonthPerformance,t.thisMonthTarget=e.thisMonthTarget,t.targetYTD=e.targetYTD,t.nextMonthTarget=e.nextMonthTarget,t.performanceValue=null===(i=t.thisMonthPerformance)||void 0===i?void 0:i.performance,t.thisMonthTargetValue=null===(n=t.thisMonthTarget)||void 0===n?void 0:n.value,t.nextMonthTargetValue=null===(o=t.nextMonthTarget)||void 0===o?void 0:o.value,t.ytdValue=null===(c=t.targetYTD)||void 0===c?void 0:c.value,t.thisMonthYTDValue=null===(a=t.thisMonthYTD)||void 0===a?void 0:a.ytd})}},{key:"loadStatusData",value:function(){var t=this;this.status=[],this.todolist2Service.getStatus().subscribe(function(e){t.status=e||[]})}},{key:"submit",value:function(){this.post(!0)}},{key:"back",value:function(){this.post(!1)}},{key:"validate",value:function(){if(!this.thisMonthTargetValue)return this.alertify.warning("Please input this month target"),!1;if(!this.performanceValue)return this.alertify.warning("Please input this month performance"),!1;if(!this.thisMonthYTDValue)return this.alertify.warning("Please input this month YTD"),!1;if(!this.nextMonthTargetValue)return this.alertify.warning("Please input next month target"),!1;var t,e=!0,i=a(this.gridData);try{for(i.s();!(t=i.n()).done;)if(null==t.value.actionStatusId){e=!1;break}}catch(n){i.e(n)}finally{i.f()}return!!e||(this.alertify.warning("Please add status"),!1)}},{key:"post",value:function(t){var e=this;if(0!=this.validate()){var i={id:this.thisMonthTarget.id,value:this.thisMonthTargetValue,performance:this.performanceValue,kPIId:this.data.id,targetTime:this.thisMonthYTD.targetTime,createdTime:this.thisMonthYTD.createdTime,modifiedTime:this.thisMonthYTD.modifiedTime,yTD:this.thisMonthYTDValue,createdBy:this.thisMonthYTD.createdBy,submitted:t},n=this.gridData,o=this.grid.dataSource.map(function(t){return{id:t.id,target:t.target,content:t.content,deadline:e.datePipe.transform(t.deadline,"MM/dd/yyyy"),accountId:+JSON.parse(localStorage.getItem("user")).id,kPIId:e.data.id,statusId:t.statusId,createdTime:(new Date).toISOString(),modifiedTime:null}}),c={target:i,targetYTD:this.targetYTD,nextMonthTarget:this.nextMonthTarget,actions:o,updatePDCA:n,result:this.result,currentTime:this.datePipe.transform(this.currentTime,"MM/dd/yyyy")};this.todolist2Service.submitUpdatePDCA(c).subscribe(function(t){!0===t.success?(e.todolist2Service.changeMessage(!0),e.activeModal.close()):e.alertify.warning(T.a.SYSTEM_ERROR_MSG)},function(t){return e.alertify.warning(T.a.SYSTEM_ERROR_MSG)})}}},{key:"addOrUpdateStatus",value:function(t,e){var i=this,n={actionId:t.actionId,statusId:+t.statusId,actionStatusId:t.actionStatusId||0,currentTime:this.currentTime.toLocaleDateString()};this.todolist2Service.addOrUpdateStatus(n).subscribe(function(t){e(t)},function(t){return i.alertify.warning(T.a.SYSTEM_ERROR_MSG)})}},{key:"getDownloadFiles",value:function(){var t=this;this.files=[],this.filesLeft=[],this.filesRight=[],this.todolist2Service.getDownloadFiles(this.data.id,this.currentTime.toLocaleDateString()).subscribe(function(e){t.files=(e||[]).map(function(e){return{name:e.name,path:t.base+e.path}});var i,n=0,o=a(t.files);try{for(o.s();!(i=o.n()).done;){var c=i.value;++n<=3?t.filesLeft.push(c):t.filesRight.push(c)}}catch(r){o.e(r)}finally{o.f()}})}}]),t}()).\u0275fac=function(t){return new(t||Qo)(O.Pb(N.a),O.Pb(E),O.Pb(b.e),O.Pb(V.a),O.Pb(N.b))},Qo.\u0275cmp=O.Jb({type:Qo,selectors:[["app-pdca"]],viewQuery:function(t,e){var i;1&t&&O.Mc(jo,1),2&t&&O.wc(i=O.gc())&&(e.grid=i.first)},inputs:{data:"data",currentTime:"currentTime"},features:[O.Bb([b.e])],decls:139,vars:60,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row","mb-3"],[1,"col-6"],[1,"font-weight-bold"],[1,"d-flex","align-items-start"],[1,"table","table-bordered",2,"width","300px","margin-right","50px"],["scope","row"],[1,"input-group",2,"width","100px"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["class","input-group-append",4,"ngIf"],["type","text",1,"form-control",2,"pointer-events","none",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-secondary","ml-2",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"mt-3","d-flex","justify-content-start"],[1,"list-group","mr-3",2,"width","50%"],["class","list-group-item",4,"ngFor","ngForOf"],["class","list-group","style","width: 50%;",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"table","table-bordered"],["scope","col","rowspan","2",1,"text-center","align-middle",2,"width","5%"],["scope","col",1,"text-center"],["scope","col",1,"text-center",2,"width","8%"],["scope","col",1,"text-center",2,"width","15%"],["scope","col",1,"text-center",2,"width","10%"],["scope","col",1,"text-center",2,"width","20%"],[4,"ngFor","ngForOf"],["gridLines","Both",3,"dataSource","allowPaging","allowResizing","editSettings","toolbar","pageSettings"],["grid",""],["field","#","headerText","#","textAlign","Center","headerTextAlign","Center","width","30","type","number",3,"allowEditing"],["template",""],["field","content","headerTextAlign","Center","type","string",3,"headerText"],["field","target","width","80","headerTextAlign","Center","type","string",3,"headerText"],["field","deadline","type","date","format","MM/dd/yyyy","editType","datepickeredit",3,"headerText"],[1,"modal-footer","d-flex","justify-content-end"],["type","button",1,"btn","btn-secondary","mr-2",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"input-group-append"],[1,"input-group-text"],[1,"list-group-item"],[3,"id","href"],[1,"list-group",2,"width","50%"],["scope","row","class","text-center align-middle",4,"ngIf"],["type","text","cols","30","rows","3",1,"form-control",3,"ngModel","ngModelChange"],[1,"custom-select",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["cols","30","rows","10",1,"form-control",3,"ngModel","ngModelChange"],["scope","row",1,"text-center","align-middle"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"h4",1),O.Ic(2),O.Ub(),O.Vb(3,"button",2),O.fc("click",function(){return e.activeModal.dismiss("Cross click")}),O.Vb(4,"span",3),O.Ic(5,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"div",4),O.Vb(7,"div",5),O.Vb(8,"div",6),O.Vb(9,"p"),O.Vb(10,"label",7),O.Ic(11),O.jc(12,"translate"),O.Ub(),O.Vb(13,"span"),O.Ic(14),O.Ub(),O.Ub(),O.Vb(15,"p"),O.Vb(16,"label",7),O.Ic(17),O.jc(18,"translate"),O.Ub(),O.Vb(19,"span"),O.Ic(20),O.Ub(),O.Ub(),O.Vb(21,"p"),O.Vb(22,"label",7),O.Ic(23,"PIC: "),O.Ub(),O.Vb(24,"span"),O.Ic(25),O.Ub(),O.Ub(),O.Vb(26,"div",8),O.Vb(27,"table",9),O.Vb(28,"tbody"),O.Vb(29,"tr"),O.Vb(30,"th",10),O.Ic(31),O.jc(32,"translate"),O.Ub(),O.Vb(33,"td"),O.Vb(34,"div",11),O.Vb(35,"input",12),O.fc("ngModelChange",function(t){return e.onChangeThisMonthPerformance(t)})("ngModelChange",function(t){return e.performanceValue=t}),O.Ub(),O.Gc(36,Lo,3,0,"div",13),O.Ub(),O.Ub(),O.Ub(),O.Vb(37,"tr"),O.Vb(38,"th",10),O.Ic(39),O.jc(40,"translate"),O.Ub(),O.Vb(41,"td"),O.Vb(42,"div",11),O.Vb(43,"input",14),O.fc("ngModelChange",function(t){return e.onChangeThisMonthTarget(t)})("ngModelChange",function(t){return e.thisMonthTargetValue=t}),O.Ub(),O.Gc(44,Go,3,0,"div",13),O.Ub(),O.Ub(),O.Ub(),O.Vb(45,"tr"),O.Vb(46,"th",10),O.Ic(47),O.jc(48,"translate"),O.Ub(),O.Vb(49,"td"),O.Vb(50,"div",11),O.Vb(51,"input",12),O.fc("ngModelChange",function(t){return e.onChangeNextMonthTarget(t)})("ngModelChange",function(t){return e.nextMonthTargetValue=t}),O.Ub(),O.Gc(52,Fo,3,0,"div",13),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(53,"table",9),O.Vb(54,"tbody"),O.Vb(55,"tr"),O.Vb(56,"th",10),O.Ic(57),O.jc(58,"translate"),O.Ub(),O.Vb(59,"td"),O.Vb(60,"div",11),O.Vb(61,"input",12),O.fc("ngModelChange",function(t){return e.onChangeThisMonthYTD(t)})("ngModelChange",function(t){return e.thisMonthYTDValue=t}),O.Ub(),O.Gc(62,Ro,3,0,"div",13),O.Ub(),O.Ub(),O.Ub(),O.Vb(63,"tr"),O.Vb(64,"th",10),O.Ic(65),O.jc(66,"translate"),O.Ub(),O.Vb(67,"td"),O.Vb(68,"div",11),O.Vb(69,"input",14),O.fc("ngModelChange",function(t){return e.onChangeTargetYTD(t)})("ngModelChange",function(t){return e.ytdValue=t}),O.Ub(),O.Gc(70,Eo,3,0,"div",13),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(71,"div",6),O.Vb(72,"button",15),O.fc("click",function(){return e.download()}),O.Ic(73),O.Ub(),O.Vb(74,"button",16),O.fc("click",function(){return e.openUploadModalComponent()}),O.Ic(75),O.Ub(),O.Vb(76,"div",17),O.Vb(77,"ul",18),O.Gc(78,Bo,3,3,"li",19),O.Ub(),O.Gc(79,_o,2,1,"ul",20),O.Ub(),O.Ub(),O.Ub(),O.Vb(80,"div",21),O.Vb(81,"div",22),O.Vb(82,"table",23),O.Vb(83,"thead"),O.Vb(84,"tr"),O.Vb(85,"th",24),O.Ic(86,"\u6708\u4efd"),O.Ub(),O.Vb(87,"th",24),O.Ic(88,"#"),O.Ub(),O.Vb(89,"th",25),O.Ic(90,"P"),O.Ub(),O.Vb(91,"th",25),O.Ic(92,"Target"),O.Ub(),O.Vb(93,"th",26),O.Ic(94,"Deadline"),O.Ub(),O.Vb(95,"th",27),O.Ic(96,"D"),O.Ub(),O.Vb(97,"th",26),O.Ic(98,"Achievement"),O.Ub(),O.Vb(99,"th",28),O.Ic(100,"Status"),O.Ub(),O.Vb(101,"th",29),O.Ic(102,"C"),O.Ub(),O.Ub(),O.Vb(103,"tr"),O.Vb(104,"th",25),O.Ic(105,"\u6708\u4efd\u8a08\u5283"),O.Ub(),O.Vb(106,"th",25),O.Ic(107,"\u76ee\u6a19\u503c "),O.Ub(),O.Vb(108,"th",25),O.Ic(109,"\u5b8c\u6210\u671f\u9650"),O.Ub(),O.Vb(110,"th",25),O.Ic(111,"\u57f7\u884c\u72c0\u6cc1"),O.Ub(),O.Vb(112,"th",25),O.Ic(113,"\u5be6\u7e3e"),O.Ub(),O.Vb(114,"th",25),O.Ic(115,"\u72c0\u614b"),O.Ub(),O.Vb(116,"th",25),O.Ic(117,"\u57f7\u884c\u5206\u6790\u6aa2\u8a0e"),O.Ub(),O.Ub(),O.Ub(),O.Vb(118,"tbody"),O.Gc(119,Jo,22,11,"ng-container",30),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(120,"div",21),O.Vb(121,"div",22),O.Vb(122,"ejs-grid",31,32),O.Vb(124,"e-columns"),O.Vb(125,"e-column",33),O.Gc(126,zo,1,1,"ng-template",null,34,O.Hc),O.Ub(),O.Qb(128,"e-column",35),O.jc(129,"translate"),O.Qb(130,"e-column",36),O.jc(131,"translate"),O.Qb(132,"e-column",37),O.jc(133,"translate"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(134,"div",38),O.Vb(135,"button",39),O.fc("click",function(){return e.back()}),O.Ic(136),O.Ub(),O.Vb(137,"button",40),O.fc("click",function(){return e.submit()}),O.Ic(138),O.Ub(),O.Ub()),2&t&&(O.Cb(2),O.Kc("Monthly update PDCA (",e.month,") "),O.Cb(9),O.Kc("",O.kc(12,40,"Policy"),": "),O.Cb(3),O.Jc(e.policy),O.Cb(3),O.Kc("",O.kc(18,42,"KPI"),": "),O.Cb(3),O.Jc(e.kpi),O.Cb(5),O.Jc(e.pic),O.Cb(6),O.Kc("",O.kc(32,44,"This month Performance")," "),O.Cb(4),O.oc("ngModel",e.performanceValue),O.Cb(1),O.oc("ngIf",1===e.type),O.Cb(3),O.Kc("",O.kc(40,46,"This month Target")," "),O.Cb(4),O.oc("ngModel",e.thisMonthTargetValue),O.Cb(1),O.oc("ngIf",1===e.type),O.Cb(3),O.Kc("",O.kc(48,48,"Next month Target")," "),O.Cb(4),O.oc("ngModel",e.nextMonthTargetValue),O.Cb(1),O.oc("ngIf",1===e.type),O.Cb(5),O.Kc("",O.kc(58,50,"This month YTD")," "),O.Cb(4),O.oc("ngModel",e.thisMonthYTDValue),O.Cb(1),O.oc("ngIf",1===e.type),O.Cb(3),O.Kc("",O.kc(66,52,"Target YTD")," "),O.Cb(4),O.oc("ngModel",e.ytdValue),O.Cb(1),O.oc("ngIf",1===e.type),O.Cb(3),O.Jc("Download"),O.Cb(2),O.Jc("Upload file"),O.Cb(2),O.Fc("width",e.filesRight.length>0?"50%":"100%"),O.Cb(1),O.oc("ngForOf",e.filesLeft),O.Cb(1),O.oc("ngIf",e.filesRight.length>0),O.Cb(40),O.oc("ngForOf",e.gridData),O.Cb(3),O.oc("dataSource",e.actions)("allowPaging",!0)("allowResizing",!0)("editSettings",e.editSettings)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings),O.Cb(3),O.oc("allowEditing",!1),O.Cb(3),O.pc("headerText",O.kc(129,54,"Content2")),O.Cb(2),O.pc("headerText",O.kc(131,56,"Target")),O.Cb(2),O.pc("headerText",O.kc(133,58,"Deadline")),O.Cb(4),O.Kc("","Save","\n"),O.Cb(2),O.Jc("Submit"))},directives:[h.a,h.f,h.i,b.m,b.l,v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c,h.m,h.j,h.o],pipes:[p.c],styles:[""]}),Qo),Yo=c("7g+E"),qo=["grid"];function Wo(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic();O.Kc(" ",n.NO(i.index)," ")}}var Xo,Zo=((Xo=function(){function t(e,i,n,o,c){s(this,t),this.activeModal=e,this.todolist2Service=i,this.alertify=n,this.datePipe=o,this.spinner=c,this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.toolbarOptions=["Add","Delete","Search"],this.policy="\u6548\u7387\u7cbe\u9032",this.kpi="SHC CTB IE \u5de5\u6642\u9054\u6210\u7387",this.pic="\u751f\u7522\u4e2d\u5fc3 Lai He",this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.actions=[],this.targetValue=null,this.targetYTDValue=null}return u(t,[{key:"ngAfterViewInit",value:function(){$(function(){$('[data-toggle="tooltip"]').tooltip()})}},{key:"ngOnInit",value:function(){this.loadData()}},{key:"onChangeTarget",value:function(t){null!=this.target?this.target.value=+t:this.target={id:0,value:+t,performance:0,kPIId:this.data.id,targetTime:(new Date).toISOString(),createdTime:(new Date).toISOString(),modifiedTime:null,yTD:0,createdBy:+JSON.parse(localStorage.getItem("user")).id,submitted:!0},console.log(this.target)}},{key:"onChangeTargetYTD",value:function(t){null!=this.targetYTD?this.targetYTD.value=+t:this.targetYTD={id:0,value:+t,createdTime:(new Date).toISOString(),modifiedBy:null,modifiedTime:null,createdBy:+JSON.parse(localStorage.getItem("user")).id,kPIId:this.data.id},console.log(this.targetYTD)}},{key:"submit",value:function(){var t=this;if(0!=this.validate(!0)){this.spinner.show();var e={actions:this.grid.dataSource.map(function(e){return{id:e.id,target:e.target,content:e.content,deadline:"string"!=typeof e.deadline?e.deadline.toLocaleDateString():e.deadline,accountId:+JSON.parse(localStorage.getItem("user")).id,kPIId:t.data.id,statusId:e.statusId,createdTime:(new Date).toISOString(),modifiedTime:null}}),target:this.target,targetYTD:this.targetYTD,currentTime:this.currentTime.toLocaleDateString()};console.log(e);var i=this.todolist2Service.submitAction(e),n=this.todolist2Service.submitKPINew(this.data.id);Object(Pe.a)([i,n]).subscribe(function(t){console.log(t),t.map(function(t){return t.success})})}}},{key:"back",value:function(){var t=this;this.post(function(){t.todolist2Service.changeMessage(!0),t.activeModal.close()},!1)}},{key:"validate",value:function(t){return this.target?this.targetYTD?!t||0!=(this.grid.dataSource||[]).length||(this.alertify.warning("Please create actions"),!1):(this.alertify.warning("Please input target YTD"),!1):(this.alertify.warning("Please input next month target"),!1)}},{key:"post",value:function(t){var e=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!=this.validate(i)){var n={actions:this.grid.dataSource.map(function(t){return{id:t.id,target:t.target,content:t.content,deadline:"string"!=typeof t.deadline?t.deadline.toLocaleDateString():t.deadline,accountId:+JSON.parse(localStorage.getItem("user")).id,kPIId:e.data.id,statusId:t.statusId,createdTime:(new Date).toISOString(),modifiedTime:null}}),target:this.target,targetYTD:this.targetYTD,currentTime:this.currentTime.toLocaleDateString()};console.log(n),this.todolist2Service.submitAction(n).subscribe(function(i){!0===i.success?t():e.alertify.warning(T.a.SYSTEM_ERROR_MSG)},function(t){return e.alertify.warning(T.a.SYSTEM_ERROR_MSG)})}}},{key:"submitKPINew",value:function(){var t=this;this.todolist2Service.submitKPINew(this.data.id).subscribe(function(e){t.todolist2Service.changeMessage(!0),t.activeModal.close(),t.spinner.hide()},function(e){t.spinner.hide()})}},{key:"loadData",value:function(){var t=this;this.gridData=[],this.todolist2Service.getActionsForL0(this.data.id||0).subscribe(function(e){var i,n;t.actions=e.actions||[],t.pic=e.pic,t.policy=e.policy,t.kpi=e.kpi,t.target=e.target,t.targetYTD=e.targetYTD,t.targetValue=null===(i=t.target)||void 0===i?void 0:i.value,t.targetYTDValue=null===(n=t.targetYTD)||void 0===n?void 0:n.value})}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}}]),t}()).\u0275fac=function(t){return new(t||Xo)(O.Pb(N.a),O.Pb(E),O.Pb(V.a),O.Pb(b.e),O.Pb(Yo.c))},Xo.\u0275cmp=O.Jb({type:Xo,selectors:[["app-plan"]],viewQuery:function(t,e){var i;1&t&&O.Mc(qo,1),2&t&&O.wc(i=O.gc())&&(e.grid=i.first)},inputs:{data:"data",currentTime:"currentTime"},features:[O.Bb([b.e])],decls:61,vars:38,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-12"],[1,"font-weight-bold"],[1,"col-12","d-flex","align-items-start"],[1,"input-group","mb-3",2,"width","300px"],[1,"input-group-prepend"],["id","target",1,"input-group-text","font-weight-bold"],["type","text","id","next-month-target","aria-describedby","target",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group","mb-3","ml-5",2,"width","300px"],["id","ytd",1,"input-group-text","font-weight-bold"],["type","text","id","target-ytd","aria-describedby","ytd",1,"form-control",3,"ngModel","ngModelChange"],["allowTextWrap","true","gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","toolbar","pageSettings","editSettings","allowExcelExport"],["grid",""],["field","#","headerText","#","textAlign","Center","width","80","type","number",3,"allowEditing"],["template",""],["field","content","type","string",3,"headerText"],["field","target","type","string",3,"headerText"],["field","deadline","type","date","format","MM/dd/yyyy","editType","datepickeredit",3,"headerText"],[1,"modal-footer","d-flex","justify-content-end"],["type","button",1,"btn","btn-secondary","mr-2",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(O.Vb(0,"ngx-spinner",0),O.Vb(1,"p",1),O.Ic(2,"Loading data..."),O.Ub(),O.Ub(),O.Vb(3,"div",2),O.Vb(4,"h4",3),O.Ic(5,"\u4e2d\u5fc3\u4e3b\u7ba1\u6536\u5230KPI\u9805\u76ee\u5f8c\u65b0\u589e\u7b2c\u4e00\u500bP (Center head update the first Plan of 2nd KPI) "),O.Ub(),O.Vb(6,"button",4),O.fc("click",function(){return e.activeModal.dismiss("Cross click")}),O.Vb(7,"span",5),O.Ic(8,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(9,"div",6),O.Vb(10,"div",7),O.Vb(11,"div",8),O.Vb(12,"p"),O.Vb(13,"label",9),O.Ic(14),O.jc(15,"translate"),O.Ub(),O.Vb(16,"span"),O.Ic(17),O.Ub(),O.Ub(),O.Vb(18,"p"),O.Vb(19,"label",9),O.Ic(20),O.jc(21,"translate"),O.Ub(),O.Vb(22,"span"),O.Ic(23),O.Ub(),O.Ub(),O.Vb(24,"p"),O.Vb(25,"label",9),O.Ic(26,"PIC: "),O.Ub(),O.Vb(27,"span"),O.Ic(28),O.Ub(),O.Ub(),O.Ub(),O.Vb(29,"div",10),O.Vb(30,"div",11),O.Vb(31,"div",12),O.Vb(32,"span",13),O.Ic(33),O.jc(34,"translate"),O.Ub(),O.Ub(),O.Vb(35,"input",14),O.fc("ngModelChange",function(t){return e.onChangeTarget(t)})("ngModelChange",function(t){return e.targetValue=t}),O.Ub(),O.Ub(),O.Vb(36,"div",15),O.Vb(37,"div",12),O.Vb(38,"span",16),O.Ic(39),O.jc(40,"translate"),O.Ub(),O.Ub(),O.Vb(41,"input",17),O.fc("ngModelChange",function(t){return e.onChangeTargetYTD(t)})("ngModelChange",function(t){return e.targetYTDValue=t}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(42,"div",7),O.Vb(43,"div",8),O.Vb(44,"ejs-grid",18,19),O.Vb(46,"e-columns"),O.Vb(47,"e-column",20),O.Gc(48,Wo,1,1,"ng-template",null,21,O.Hc),O.Ub(),O.Qb(50,"e-column",22),O.jc(51,"translate"),O.Qb(52,"e-column",23),O.jc(53,"translate"),O.Qb(54,"e-column",24),O.jc(55,"translate"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(56,"div",25),O.Vb(57,"button",26),O.fc("click",function(){return e.back()}),O.Ic(58),O.Ub(),O.Vb(59,"button",27),O.fc("click",function(){return e.submit()}),O.Ic(60),O.Ub(),O.Ub()),2&t&&(O.oc("fullScreen",!1),O.Cb(14),O.Kc("",O.kc(15,24,"Policy"),": "),O.Cb(3),O.Jc(e.policy),O.Cb(3),O.Kc("",O.kc(21,26,"KPI"),": "),O.Cb(3),O.Jc(e.kpi),O.Cb(5),O.Jc(e.pic),O.Cb(5),O.Jc(O.kc(34,28,"Next month Target")),O.Cb(2),O.oc("ngModel",e.targetValue),O.Cb(4),O.Jc(O.kc(40,30,"Target YTD")),O.Cb(2),O.oc("ngModel",e.targetYTDValue),O.Cb(3),O.oc("dataSource",e.actions)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings)("editSettings",e.editSettings)("allowExcelExport",!0),O.Cb(3),O.oc("allowEditing",!1),O.Cb(3),O.pc("headerText",O.kc(51,32,"Content")),O.Cb(2),O.pc("headerText",O.kc(53,34,"Target")),O.Cb(2),O.pc("headerText",O.kc(55,36,"Deadline")),O.Cb(4),O.Kc("","Back","\n"),O.Cb(2),O.Jc("Submit"))},directives:[Yo.a,h.a,h.f,h.i,v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c],pipes:[p.c],styles:[""]}),Xo),tc=["grid"],ec=["importModal"],ic=["remoteDataBinding"];function nc(t,e){if(1&t&&(O.Vb(0,"div"),O.Ic(1),O.Ub()),2&t){var i=O.ic().$implicit;O.Cb(1),O.Kc(" ",i.name," ")}}function oc(t,e){if(1&t&&(O.Tb(0),O.Vb(1,"e-tabitem",17),O.Gc(2,nc,2,1,"ng-template",null,18,O.Hc),O.Ub(),O.Sb()),2&t){var i=e.$implicit,n=O.ic();O.Cb(1),O.oc("content",n.getGridTemplate(i.position))}}function cc(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic(3);O.Kc(" ",n.NO(i.index)," ")}}function ac(t,e){1&t&&(O.Vb(0,"span",28),O.Ic(1,"Rejected"),O.Ub())}function rc(t,e){1&t&&(O.Vb(0,"span",29),O.Ic(1,"Done"),O.Ub())}function lc(t,e){if(1&t&&(O.Vb(0,"span"),O.Ic(1),O.Ub(),O.Gc(2,ac,2,0,"span",26),O.Gc(3,rc,2,0,"span",27)),2&t){var i=e.$implicit;O.Cb(1),O.Jc(i.topic),O.Cb(1),O.oc("ngIf",i.isReject&&i.isDisplayAction),O.Cb(1),O.oc("ngIf",i.isUpdatedResult)}}function sc(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openActionModalComponent(t)}),O.Ic(1,"Action"),O.Ub()}}function dc(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openUpdatePdcaModalComponent(t)}),O.Ic(1,"Update PDCA"),O.Ub()}}function uc(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openSelfScoreModalComponent(t)}),O.Ic(1,"Self-score"),O.Ub()}}function bc(t,e){if(1&t&&(O.Vb(0,"div",30),O.Gc(1,sc,2,0,"button",31),O.Gc(2,dc,2,0,"button",31),O.Gc(3,uc,2,0,"button",31),O.Ub()),2&t){var i=e.$implicit;O.Cb(1),O.oc("ngIf","Action"==i.type),O.Cb(1),O.oc("ngIf","UpdatePDCA"==i.type),O.Cb(1),O.oc("ngIf",i.isDisplaySelfScore)}}function hc(t,e){if(1&t&&(O.Vb(0,"div"),O.Vb(1,"ejs-grid",20,21),O.Vb(3,"e-columns"),O.Vb(4,"e-column",22),O.Gc(5,cc,1,1,"ng-template",null,23,O.Hc),O.Ub(),O.Vb(7,"e-column",24),O.Gc(8,lc,4,3,"ng-template",null,23,O.Hc),O.Ub(),O.Vb(10,"e-column",25),O.Gc(11,bc,4,3,"ng-template",null,23,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic(2);O.Cb(1),O.oc("dataSource",i.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",i.toolbarOptions)("pageSettings",i.pageSettings)("allowExcelExport",!0)}}function pc(t,e){1&t&&(O.Vb(0,"div"),O.Vb(1,"p",33),O.Ic(2," No authority to view. "),O.Ub(),O.Ub())}function fc(t,e){if(1&t&&(O.Gc(0,hc,13,7,"div",19),O.Gc(1,pc,3,0,"div",19)),2&t){var i=O.ic();O.oc("ngIf",i.isAllowAccess(1)),O.Cb(1),O.oc("ngIf",!i.isAllowAccess(1))}}function gc(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic(3);O.Kc(" ",n.NO(i.index)," ")}}function mc(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openKPIScoreModalComponent(t)}),O.Ic(1,"KPI Score"),O.Ub()}}function vc(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openAttitudeScoreModalComponent(t)}),O.Ic(1,"Attitude Score"),O.Ub()}}function yc(t,e){if(1&t&&(O.Vb(0,"div",30),O.Gc(1,mc,2,0,"button",31),O.Gc(2,vc,2,0,"button",31),O.Ub()),2&t){var i=e.$implicit,n=O.ic(3);O.Cb(1),O.oc("ngIf",i.type==n.KPI),O.Cb(1),O.oc("ngIf",i.type==n.Attitude)}}function Ic(t,e){if(1&t&&(O.Vb(0,"div"),O.Vb(1,"ejs-grid",20,21),O.Vb(3,"e-columns"),O.Vb(4,"e-column",22),O.Gc(5,gc,1,1,"ng-template",null,23,O.Hc),O.Ub(),O.Qb(7,"e-column",34),O.Vb(8,"e-column",25),O.Gc(9,yc,3,2,"ng-template",null,23,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic(2);O.Cb(1),O.oc("dataSource",i.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",i.toolbarOptions)("pageSettings",i.pageSettings)("allowExcelExport",!0)}}function Sc(t,e){1&t&&(O.Vb(0,"div"),O.Vb(1,"p",33),O.Ic(2," No authority to view. "),O.Ub(),O.Ub())}function Uc(t,e){if(1&t&&(O.Gc(0,Ic,11,7,"div",19),O.Gc(1,Sc,3,0,"div",19)),2&t){var i=O.ic();O.oc("ngIf",i.isAllowAccess(2)),O.Cb(1),O.oc("ngIf",!i.isAllowAccess(2))}}function Cc(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic(3);O.Kc(" ",n.NO(i.index)," ")}}function Vc(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openKPIScoreL2ModalComponent(t)}),O.Ic(1,"KPI Score"),O.Ub()}}function kc(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openAttitudeScoreL2ModalComponent(t)}),O.Ic(1,"Attitude Score"),O.Ub()}}function Tc(t,e){if(1&t&&(O.Vb(0,"div",30),O.Gc(1,Vc,2,0,"button",31),O.Gc(2,kc,2,0,"button",31),O.Ub()),2&t){var i=e.$implicit,n=O.ic(3);O.Cb(1),O.oc("ngIf",i.type==n.KPI),O.Cb(1),O.oc("ngIf",i.type==n.Attitude)}}function xc(t,e){if(1&t&&(O.Vb(0,"div"),O.Vb(1,"ejs-grid",20,21),O.Vb(3,"e-columns"),O.Vb(4,"e-column",22),O.Gc(5,Cc,1,1,"ng-template",null,23,O.Hc),O.Ub(),O.Qb(7,"e-column",34),O.Vb(8,"e-column",25),O.Gc(9,Tc,3,2,"ng-template",null,23,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic(2);O.Cb(1),O.oc("dataSource",i.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",i.toolbarOptions)("pageSettings",i.pageSettings)("allowExcelExport",!0)}}function wc(t,e){1&t&&(O.Vb(0,"div"),O.Vb(1,"p",33),O.Ic(2," No authority to view. "),O.Ub(),O.Ub())}function Mc(t,e){if(1&t&&(O.Gc(0,xc,11,7,"div",19),O.Gc(1,wc,3,0,"div",19)),2&t){var i=O.ic();O.oc("ngIf",i.isAllowAccess(3)),O.Cb(1),O.oc("ngIf",!i.isAllowAccess(3))}}function Dc(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic(2);O.Kc(" ",n.NO(i.index)," ")}}function Ac(t,e){if(1&t){var i=O.Wb();O.Vb(0,"div",30),O.Vb(1,"button",32),O.fc("click",function(){return O.Ac(i),O.ic(2).gotoUpdate()}),O.Ic(2,"Update"),O.Ub(),O.Ub()}}function Oc(t,e){if(1&t&&(O.Vb(0,"div"),O.Vb(1,"ejs-grid",20,21),O.Vb(3,"e-columns"),O.Vb(4,"e-column",22),O.Gc(5,Dc,1,1,"ng-template",null,23,O.Hc),O.Ub(),O.Qb(7,"e-column",35),O.Vb(8,"e-column",25),O.Gc(9,Ac,3,0,"ng-template",null,23,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic();O.Cb(1),O.oc("dataSource",i.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",i.toolbarOptions)("pageSettings",i.pageSettings)("allowExcelExport",!0)}}function Pc(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic(3);O.Kc(" ",n.NO(i.index)," ")}}function jc(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openKPIScoreGHRModalComponent(t)}),O.Ic(1,"SMART Score"),O.Ub()}}function Lc(t,e){if(1&t){var i=O.Wb();O.Vb(0,"button",32),O.fc("click",function(){O.Ac(i);var t=O.ic().$implicit;return O.ic(3).openAttitudeScoreGHRModalComponent(t)}),O.Ic(1,"Attitude Score"),O.Ub()}}function Gc(t,e){if(1&t&&(O.Vb(0,"div",30),O.Gc(1,jc,2,0,"button",31),O.Gc(2,Lc,2,0,"button",31),O.Ub()),2&t){var i=e.$implicit,n=O.ic(3);O.Cb(1),O.oc("ngIf",i.type==n.KPI),O.Cb(1),O.oc("ngIf",i.type==n.Attitude)}}function Fc(t,e){if(1&t&&(O.Vb(0,"div"),O.Vb(1,"ejs-grid",20,21),O.Vb(3,"e-columns"),O.Vb(4,"e-column",22),O.Gc(5,Pc,1,1,"ng-template",null,23,O.Hc),O.Ub(),O.Qb(7,"e-column",34),O.Vb(8,"e-column",25),O.Gc(9,Gc,3,2,"ng-template",null,23,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic(2);O.Cb(1),O.oc("dataSource",i.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",i.toolbarOptions)("pageSettings",i.pageSettings)("allowExcelExport",!0)}}function Rc(t,e){1&t&&(O.Vb(0,"div"),O.Vb(1,"p",33),O.Ic(2," No authority to view. "),O.Ub(),O.Ub())}function Ec(t,e){if(1&t&&(O.Gc(0,Fc,11,7,"div",19),O.Gc(1,Rc,3,0,"div",19)),2&t){var i=O.ic();O.oc("ngIf",i.isAllowAccess(5)),O.Cb(1),O.oc("ngIf",!i.isAllowAccess(5))}}function Bc(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic(3);O.Kc(" ",n.NO(i.index)," ")}}function Nc(t,e){if(1&t){var i=O.Wb();O.Vb(0,"div",30),O.Vb(1,"button",37),O.fc("click",function(){O.Ac(i);var t=e.$implicit;return O.ic(3).openAttitudeScoreFunctionalLeaderModalComponent(t)}),O.Ic(2,"Attitude Score"),O.Ub(),O.Ub()}}function _c(t,e){if(1&t&&(O.Vb(0,"div"),O.Vb(1,"ejs-grid",20,21),O.Vb(3,"e-columns"),O.Vb(4,"e-column",22),O.Gc(5,Bc,1,1,"ng-template",null,23,O.Hc),O.Ub(),O.Qb(7,"e-column",36),O.Vb(8,"e-column",25),O.Gc(9,Nc,3,0,"ng-template",null,23,O.Hc),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic(2);O.Cb(1),O.oc("dataSource",i.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",i.toolbarOptions)("pageSettings",i.pageSettings)("allowExcelExport",!0)}}function Kc(t,e){1&t&&(O.Vb(0,"div"),O.Vb(1,"p",33),O.Ic(2," No authority to view. "),O.Ub(),O.Ub())}function Hc(t,e){if(1&t&&(O.Gc(0,_c,11,7,"div",19),O.Gc(1,Kc,3,0,"div",19)),2&t){var i=O.ic();O.oc("ngIf",i.isAllowAccess(6)),O.Cb(1),O.oc("ngIf",!i.isAllowAccess(6))}}function Jc(t,e){if(1&t&&O.Ic(0),2&t){var i=e.$implicit,n=O.ic(2);O.Kc(" ",n.NO(i.index)," ")}}function zc(t,e){if(1&t){var i=O.Wb();O.Vb(0,"div",30),O.Vb(1,"button",32),O.fc("click",function(){O.Ac(i);var t=e.$implicit;return O.ic(2).openKPIScoreGMModalComponent(t)}),O.Ic(2,"KPI Score"),O.Ub(),O.Ub()}}function Qc(t,e){if(1&t&&(O.Vb(0,"ejs-grid",20,21),O.Vb(2,"e-columns"),O.Vb(3,"e-column",22),O.Gc(4,Jc,1,1,"ng-template",null,23,O.Hc),O.Ub(),O.Qb(6,"e-column",34),O.Vb(7,"e-column",25),O.Gc(8,zc,3,0,"ng-template",null,23,O.Hc),O.Ub(),O.Ub(),O.Ub()),2&t){var i=O.ic();O.oc("dataSource",i.gridData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("toolbar",i.toolbarOptions)("pageSettings",i.pageSettings)("allowExcelExport",!0)}}function $c(t,e){if(1&t){var i=O.Wb();O.Vb(0,"div",38),O.Vb(1,"h4",39),O.Qb(2,"i",40),O.Ic(3," Import Excel "),O.Ub(),O.Vb(4,"button",41),O.fc("click",function(){return e.$implicit.dismiss("Cross click")}),O.Vb(5,"span",42),O.Ic(6,"\xd7"),O.Ub(),O.Ub(),O.Ub(),O.Vb(7,"div",43),O.Vb(8,"div",0),O.Vb(9,"div",44),O.Vb(10,"div",2),O.Vb(11,"label",45),O.Ic(12,"Select File (*Notice: Excel file must be followed a system template. If you do not have a template, please "),O.Vb(13,"a",46),O.Ic(14,"click here"),O.Ub(),O.Ic(15," to download. Thank you!)"),O.Ub(),O.Vb(16,"input",47),O.fc("change",function(t){return O.Ac(i),O.ic().fileProgress(t)}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(17,"div",48),O.Vb(18,"button",49),O.fc("click",function(){return O.Ac(i),O.ic().uploadFile()}),O.Ic(19,"Upload File"),O.Ub(),O.Vb(20,"button",50),O.fc("click",function(){return e.$implicit.close("Close click")}),O.Ic(21,"Close"),O.Ub(),O.Ub()}if(2&t){var n=O.ic();O.Cb(13),O.oc("href",n.excelDownloadUrl,O.Cc)}}var Yc,qc,Wc,Xc=[{path:"",data:{title:"Transaction",breadcrumb:"Transaction"},children:[{path:"objective",component:Ie,data:{title:"Objective",breadcrumb:"KPI Objective",functionCode:"objective"}},{path:"todolist",component:ko,data:{title:"To Do List",breadcrumb:"To Do List",functionCode:"todolist"}},{path:"todolist2",component:(Yc=function(){function t(e,i,n,o,c,a,r,l,d){s(this,t),this.service=e,this.router=i,this.alertify=n,this.todolistService=o,this.todolist2Service=c,this.accountGroupService=a,this.modalService=r,this.datePipe=l,this.performanceService=d,this.toolbarOptions=["Search"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.KPI=ke.KPI,this.Attitude=ke.Attitude,this.index=1,this.subscription=[],this.sheetName="Upload Details",this.isAuthorize=!1}return u(t,[{key:"ngOnDestroy",value:function(){this.subscription.forEach(function(t){return t.unsubscribe()})}},{key:"onChangeReportTime",value:function(t){this.loadData()}},{key:"ngOnInit",value:function(){var t=this;this.currentTime=new Date,this.content="",this.loadAccountGroupData(),this.subscription.push(this.todolist2Service.currentMessage.subscribe(function(e){e&&t.loadData()}))}},{key:"isAllowAccess",value:function(t){return(JSON.parse(localStorage.getItem("user")).accountGroupPositions||[]).includes(t)}},{key:"loadData",value:function(){switch(this.currentTimeRequest=this.datePipe.transform(this.currentTime,"YYYY-MM-dd HH:mm"),1){case Ue.L0:this.scoreType=Ve.L0,this.loadDataL0();break;case Ue.L1:this.scoreType=Ve.L1;break;case Ue.FunctionalLeader:this.scoreType=Ve.FunctionalLeader;break;case Ue.L2:this.scoreType=Ve.L2;break;case Ue.Updater:this.scoreType=Ve.FHO;break;case Ue.GHR:this.scoreType=Ve.GHR;break;case Ue.GM:this.scoreType=Ve.GM}}},{key:"selected",value:function(t){var e,i;this.currentTimeRequest=this.datePipe.transform(this.currentTime,"YYYY-MM-dd HH:mm"),this.index=t.selectedIndex+1;var n=0;switch(this.content=t.selectedItem.outerText,""===this.content?(this.content=null===(e=this.accountGroupData[0])||void 0===e?void 0:e.name,n=Ue[null===(i=this.accountGroupData[0])||void 0===i?void 0:i.name]||0):n=Ue[t.selectedItem.outerText],n){case Ue.L0:this.scoreType=Ve.L0,this.loadDataL0();break;case Ue.L1:this.scoreType=Ve.L1;break;case Ue.GFL:this.scoreType=Ve.FunctionalLeader;break;case Ue.L2:this.scoreType=Ve.L2;break;case Ue.Updater:this.scoreType=Ve.FHO;break;case Ue.GHR:this.scoreType=Ve.GHR;break;case Ue.GM:this.scoreType=Ve.GM}}},{key:"getGridTemplate",value:function(t){var e=this.Gridtemplates.find(function(e){return e.name===t+""});return e?e.template:null}},{key:"loadDataL0",value:function(){var t=this;this.gridData=[],this.todolist2Service.l0(this.currentTimeRequest).subscribe(function(e){t.gridData=e})}},{key:"loadDataL1",value:function(){var t=this;this.gridData=[],this.todolistService.l1(this.currentTimeRequest).subscribe(function(e){t.gridData=e}),this.gridData=[]}},{key:"loadDataUpdater",value:function(){var t=this;this.gridData=[],this.todolistService.updater(this.currentTimeRequest).subscribe(function(e){t.gridData=e})}},{key:"loadDataFunctionalLeader",value:function(){var t=this;this.gridData=[],this.todolistService.functionalLeader(this.currentTimeRequest).subscribe(function(e){t.gridData=e})}},{key:"loadDataL2",value:function(){var t=this;this.gridData=[],this.todolistService.l2(this.currentTimeRequest).subscribe(function(e){t.gridData=e})}},{key:"loadDataFHO",value:function(){var t=this;this.gridData=[],this.todolistService.fho(this.currentTimeRequest).subscribe(function(e){t.gridData=e})}},{key:"loadDataGHR",value:function(){var t=this;this.gridData=[],this.todolistService.ghr(this.currentTimeRequest).subscribe(function(e){t.gridData=e})}},{key:"loadDataGM",value:function(){var t=this;this.gridData=[],this.todolistService.gm(this.currentTimeRequest).subscribe(function(e){t.gridData=e})}},{key:"loadAccountGroupData",value:function(){var t=this;this.accountGroupService.getAccountGroupForTodolistByAccountId().subscribe(function(e){t.accountGroupData=e,t.loadData()})}},{key:"gotoUpdate",value:function(){return this.router.navigateByUrl("/transaction/upload-kpi-objective")}},{key:"openActionModalComponent",value:function(t){var e=this.modalService.open(Zo,{size:"xl",backdrop:"static",keyboard:!1});e.componentInstance.data=t,e.componentInstance.currentTime=this.currentTime,e.result.then(function(t){},function(t){})}},{key:"openUpdatePdcaModalComponent",value:function(t){var e=this.modalService.open($o,{size:"xxl",backdrop:"static",keyboard:!1});e.componentInstance.data=t,e.componentInstance.currentTime=this.currentTime,e.result.then(function(t){},function(t){})}},{key:"openSelfScoreModalComponent",value:function(t){}},{key:"openKPIScoreModalComponent",value:function(t){}},{key:"openKPIScoreL2ModalComponent",value:function(t){}},{key:"openKPIScoreGHRModalComponent",value:function(t){}},{key:"openKPIScoreGMModalComponent",value:function(t){}},{key:"openAttitudeScoreModalComponent",value:function(t){}},{key:"openAttitudeScoreL2ModalComponent",value:function(t){}},{key:"openAttitudeScoreGHRModalComponent",value:function(t){}},{key:"openAttitudeScoreFunctionalLeaderModalComponent",value:function(t){}},{key:"openImportExcelModalComponent",value:function(){this.excelDownloadUrl="".concat(A.a.apiUrl,"todolist/ExcelExport"),this.modalReference=this.modalService.open(this.importModal,{size:"xl"})}},{key:"fileProgress",value:function(t){this.file=t.target.files[0]}},{key:"uploadFile",value:function(){var t=this,e=JSON.parse(localStorage.getItem("user")).id;this.todolistService.import(this.file,e).subscribe(function(e){t.loadDataFHO(),t.alertify.success("The excel has been imported into system!"),t.modalService.dismissAll()},function(e){t.alertify.error(e,!0)})}},{key:"NO",value:function(t){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(t)+1}}]),t}(),Yc.\u0275fac=function(t){return new(t||Yc)(O.Pb(ee),O.Pb(_.c),O.Pb(V.a),O.Pb(Me),O.Pb(E),O.Pb(x.a),O.Pb(N.b),O.Pb(b.e),O.Pb(Se))},Yc.\u0275cmp=O.Jb({type:Yc,selectors:[["app-todolist2"]],viewQuery:function(t,e){var i;1&t&&(O.Mc(tc,1),O.Mc(ec,1),O.Mc(ic,1),O.Mc(Vn,1)),2&t&&(O.wc(i=O.gc())&&(e.grid=i.first),O.wc(i=O.gc())&&(e.importModal=i.first),O.wc(i=O.gc())&&(e.spreadsheetObj=i.first),O.wc(i=O.gc())&&(e.Gridtemplates=i))},features:[O.Bb([b.e])],decls:27,vars:2,consts:[[1,"row"],[1,"col-md-3","d-flex","justify-content-center"],[1,"form-group"],["for","exampleInputEmail1"],[2,"width","100%",3,"ngModel","ngModelChange","valueChange"],[1,"card"],[1,"card-body"],["id","element",3,"selected"],[4,"ngFor","ngForOf"],["name","1"],["GridtemplateRef",""],["name","2"],["name","3"],["name","4"],["name","5"],["name","6"],["importModal",""],[3,"content"],["headerText",""],[4,"ngIf"],["gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","toolbar","pageSettings","allowExcelExport"],["grid",""],["field","#","headerText","#","textAlign","Center","width","80","type","number"],["template",""],["field","topic","headerText","KPI Objective","type","string"],["field","option","headerText","Option"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-success",4,"ngIf"],[1,"badge","badge-danger"],[1,"badge","badge-success"],[1,"btn-group"],["type","button","class","btn btn-sm btn-success mr-2",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-success","mr-2",3,"click"],[2,"text-align","center","color","red","font-size","xx-large"],["field","objective","headerText","KPI Objective","type","string"],["field","title","headerText","KPI Objective","type","string"],["field","objective","headerText","Objective","type","string"],["type","button",1,"btn","btn-sm","btn-secondary","mr-2",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-6"],["for","Name"],[3,"href"],["name","file","type","file",1,"form-control",3,"change"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(O.Vb(0,"div",0),O.Vb(1,"div",1),O.Vb(2,"div",2),O.Vb(3,"label",3),O.Ic(4,"Change System Date"),O.Ub(),O.Vb(5,"kendo-datepicker",4),O.fc("ngModelChange",function(t){return e.currentTime=t})("valueChange",function(t){return e.onChangeReportTime(t)}),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(6,"div",5),O.Vb(7,"div",6),O.Vb(8,"ejs-tab",7),O.fc("selected",function(t){return e.selected(t)}),O.Vb(9,"e-tabitems"),O.Gc(10,oc,4,1,"ng-container",8),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Gc(11,fc,2,2,"ng-template",9,10,O.Hc),O.Gc(13,Uc,2,2,"ng-template",11,10,O.Hc),O.Gc(15,Mc,2,2,"ng-template",12,10,O.Hc),O.Gc(17,Oc,11,7,"ng-template",13,10,O.Hc),O.Gc(19,Ec,2,2,"ng-template",14,10,O.Hc),O.Gc(21,Hc,2,2,"ng-template",15,10,O.Hc),O.Gc(23,Qc,10,7,"ng-template",null,10,O.Hc),O.Gc(25,$c,22,1,"ng-template",null,16,O.Hc)),2&t&&(O.Cb(5),O.oc("ngModel",e.currentTime),O.Cb(5),O.oc("ngForOf",e.accountGroupData))},directives:[f.b,h.f,h.i,kn.a,kn.c,b.l,Vn,kn.b,b.m,v.g,v.d,v.b,K.d,K.b,H.d,v.c,v.a,K.c,K.a,H.c],styles:[""]}),Yc),data:{title:"To Do List 2",breadcrumb:"To Do List 2",functionCode:"todolist"}},{path:"meeting",component:Wt,data:{title:"Meeting",breadcrumb:"Meeting",functionCode:"meeting"}},{path:"upload-kpi-objective",component:Do,data:{title:"Upload KPI Objective",breadcrumb:"Upload KPI Objective",functionCode:"todolist"}}]}],Zc=((Wc=function t(){s(this,t)}).\u0275fac=function(t){return new(t||Wc)},Wc.\u0275mod=O.Nb({type:Wc}),Wc.\u0275inj=O.Mb({imports:[[_.g.forChild(Xc)],_.g]}),Wc);function ta(t){return new y.a(t,"./assets/i18n/",".json")}var ea=localStorage.getItem("lang");Object(I.eb)(c("2PVe"),c("GFvd"),c("GFWS"),c("0zpJ"),c("LRxf")),Object(I.eb)(c("2PVe"),c("oP7I"),c("Joj5"),c("3JeS"),c("LRxf")),Object(I.eb)(c("2PVe"),c("1OsK"),c("pm0Y"),c("K8f6"),c("LRxf")),"vi"===ea?qc=ea:"en"===ea?qc="en":"zh"===ea&&(qc="zh");var ia,na=((ia=function t(e){s(this,t),this.translate=e,e.addLangs(["en","zh","vi"]),"vi"===ea?(qc="vi",setTimeout(function(){I.q.load(c("+7Wi")),Object(I.qb)("vi")})):"en"===ea?(qc="en",setTimeout(function(){I.q.load(c("7j5C")),Object(I.qb)("en")})):(qc="zh",setTimeout(function(){I.q.load(c("7e+1")),Object(I.qb)("zh")})),e.use(qc)}).\u0275fac=function(t){return new(t||ia)(O.cc(p.d))},ia.\u0275mod=O.Nb({type:ia}),ia.\u0275inj=O.Mb({imports:[[b.c,J.c,h.b,h.k,m.c,v.f,K.e,g.a,g.b,Zc,f.a,kn.e,m.d,d.b,kn.d,H.k,Ao.b,Yo.b,p.b.forChild({loader:{provide:p.a,useFactory:ta,deps:[S.b]},defaultLanguage:qc})]]}),ia)},qb46:function(t,e,i){t.exports=function(t){"use strict";var e=(t=t&&t.hasOwnProperty("default")?t.default:t).helpers,i=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),n={toTextLines:function(t){var i,n=[];for(t=[].concat(t);t.length;)"string"==typeof(i=t.pop())?n.unshift.apply(n,i.split("\n")):Array.isArray(i)?t.push.apply(t,i):e.isNullOrUndef(t)||n.unshift(""+i);return n},toFontString:function(t){return!t||e.isNullOrUndef(t.size)||e.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family},textSize:function(t,e,i){var n,o=[].concat(e),c=o.length,a=t.font,r=0;for(t.font=i.string,n=0;n<c;++n)r=Math.max(t.measureText(o[n]).width,r);return t.font=a,{height:c*i.lineHeight,width:r}},parseFont:function(i){var o=t.defaults.global,c=e.valueOrDefault(i.size,o.defaultFontSize),a={family:e.valueOrDefault(i.family,o.defaultFontFamily),lineHeight:e.options.toLineHeight(i.lineHeight,c),size:c,style:e.valueOrDefault(i.style,o.defaultFontStyle),weight:e.valueOrDefault(i.weight,null),string:""};return a.string=n.toFontString(a),a},bound:function(t,e,i){return Math.max(t,Math.min(e,i))},arrayDiff:function(t,e){var i,n,o,c,a=t.slice(),r=[];for(i=0,o=e.length;i<o;++i)-1===(n=a.indexOf(c=e[i]))?r.push([c,1]):a.splice(n,1);for(i=0,o=a.length;i<o;++i)r.push([a[i],-1]);return r},rasterize:function(t){return Math.round(t*i)/i}};function o(t,e){var i=e.x,n=e.y;if(null===i)return{x:0,y:-1};if(null===n)return{x:1,y:0};var o=t.x-i,c=t.y-n,a=Math.sqrt(o*o+c*c);return{x:a?o/a:0,y:a?c/a:-1}}function c(t,e,i){var n=0;return t<i.left?n|=1:t>i.right&&(n|=2),e<i.top?n|=8:e>i.bottom&&(n|=4),n}function a(t,e){var i,n,o=e.anchor,a=t;return e.clamp&&(a=function(t,e){for(var i,n,o,a=t.x0,r=t.y0,l=t.x1,s=t.y1,d=c(a,r,e),u=c(l,s,e);d|u&&!(d&u);)8&(i=d||u)?(n=a+(l-a)*(e.top-r)/(s-r),o=e.top):4&i?(n=a+(l-a)*(e.bottom-r)/(s-r),o=e.bottom):2&i?(o=r+(s-r)*(e.right-a)/(l-a),n=e.right):1&i&&(o=r+(s-r)*(e.left-a)/(l-a),n=e.left),i===d?d=c(a=n,r=o,e):u=c(l=n,s=o,e);return{x0:a,x1:l,y0:r,y1:s}}(a,e.area)),"start"===o?(i=a.x0,n=a.y0):"end"===o?(i=a.x1,n=a.y1):(i=(a.x0+a.x1)/2,n=(a.y0+a.y1)/2),function(t,e,i,n,o){switch(o){case"center":i=n=0;break;case"bottom":i=0,n=1;break;case"right":i=1,n=0;break;case"left":i=-1,n=0;break;case"top":i=0,n=-1;break;case"start":i=-i,n=-n;break;case"end":break;default:o*=Math.PI/180,i=Math.cos(o),n=Math.sin(o)}return{x:t,y:e,vx:i,vy:n}}(i,n,t.vx,t.vy,e.align)}var r={arc:function(t,e){var i=(t.startAngle+t.endAngle)/2,n=Math.cos(i),o=Math.sin(i),c=t.innerRadius,r=t.outerRadius;return a({x0:t.x+n*c,y0:t.y+o*c,x1:t.x+n*r,y1:t.y+o*r,vx:n,vy:o},e)},point:function(t,e){var i=o(t,e.origin),n=i.x*t.radius,c=i.y*t.radius;return a({x0:t.x-n,y0:t.y-c,x1:t.x+n,y1:t.y+c,vx:i.x,vy:i.y},e)},rect:function(t,e){var i=o(t,e.origin),n=t.x,c=t.y,r=0,l=0;return t.horizontal?(n=Math.min(t.x,t.base),r=Math.abs(t.base-t.x)):(c=Math.min(t.y,t.base),l=Math.abs(t.base-t.y)),a({x0:n,y0:c+l,x1:n+r,y1:c,vx:i.x,vy:i.y},e)},fallback:function(t,e){var i=o(t,e.origin);return a({x0:t.x,y0:t.y,x1:t.x,y1:t.y,vx:i.x,vy:i.y},e)}},l=t.helpers,s=n.rasterize;function d(t){var e=t._model.horizontal,i=t._scale||e&&t._xScale||t._yScale;if(!i)return null;if(void 0!==i.xCenter&&void 0!==i.yCenter)return{x:i.xCenter,y:i.yCenter};var n=i.getBasePixel();return e?{x:n,y:null}:{x:null,y:n}}function u(t,e,i){var n=t.shadowBlur,o=i.stroked,c=s(i.x),a=s(i.y),r=s(i.w);o&&t.strokeText(e,c,a,r),i.filled&&(n&&o&&(t.shadowBlur=0),t.fillText(e,c,a,r),n&&o&&(t.shadowBlur=n))}var b=function(t,e,i,n){var o=this;o._config=t,o._index=n,o._model=null,o._rects=null,o._ctx=e,o._el=i};l.extend(b.prototype,{_modelize:function(e,i,o,c){var a,s=this._index,u=l.options.resolve,b=n.parseFont(u([o.font,{}],c,s)),h=u([o.color,t.defaults.global.defaultFontColor],c,s);return{align:u([o.align,"center"],c,s),anchor:u([o.anchor,"center"],c,s),area:c.chart.chartArea,backgroundColor:u([o.backgroundColor,null],c,s),borderColor:u([o.borderColor,null],c,s),borderRadius:u([o.borderRadius,0],c,s),borderWidth:u([o.borderWidth,0],c,s),clamp:u([o.clamp,!1],c,s),clip:u([o.clip,!1],c,s),color:h,display:e,font:b,lines:i,offset:u([o.offset,0],c,s),opacity:u([o.opacity,1],c,s),origin:d(this._el),padding:l.options.toPadding(u([o.padding,0],c,s)),positioner:(a=this._el,a instanceof t.elements.Arc?r.arc:a instanceof t.elements.Point?r.point:a instanceof t.elements.Rectangle?r.rect:r.fallback),rotation:u([o.rotation,0],c,s)*(Math.PI/180),size:n.textSize(this._ctx,i,b),textAlign:u([o.textAlign,"start"],c,s),textShadowBlur:u([o.textShadowBlur,0],c,s),textShadowColor:u([o.textShadowColor,h],c,s),textStrokeColor:u([o.textStrokeColor,h],c,s),textStrokeWidth:u([o.textStrokeWidth,0],c,s)}},update:function(t){var e,i,o,c=this,a=null,r=null,s=c._index,d=c._config,u=l.options.resolve([d.display,!0],t,s);u&&(i=l.valueOrDefault(l.callback(d.formatter,[e=t.dataset.data[s],t]),e),(o=l.isNullOrUndef(i)?[]:n.toTextLines(i)).length&&(r=function(t){var e=t.borderWidth||0,i=t.padding,n=t.size.height,o=t.size.width,c=-o/2,a=-n/2;return{frame:{x:c-i.left-e,y:a-i.top-e,w:o+i.width+2*e,h:n+i.height+2*e},text:{x:c,y:a,w:o,h:n}}}(a=c._modelize(u,o,d,t)))),c._model=a,c._rects=r},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var i,o=t.ctx,c=this._model,a=this._rects;this.visible()&&(o.save(),c.clip&&(i=c.area,o.beginPath(),o.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),o.clip()),o.globalAlpha=n.bound(0,c.opacity,1),o.translate(s(e.x),s(e.y)),o.rotate(c.rotation),function(t,e,i){var n=i.backgroundColor,o=i.borderColor,c=i.borderWidth;(n||o&&c)&&(t.beginPath(),l.canvas.roundedRect(t,s(e.x)+c/2,s(e.y)+c/2,s(e.w)-c,s(e.h)-c,i.borderRadius),t.closePath(),n&&(t.fillStyle=n,t.fill()),o&&c&&(t.strokeStyle=o,t.lineWidth=c,t.lineJoin="miter",t.stroke()))}(o,a.frame,c),function(t,e,i,n){var o,c=n.textAlign,a=n.color,r=!!a,l=n.font,s=e.length,d=n.textStrokeColor,b=n.textStrokeWidth,h=d&&b;if(s&&(r||h))for(i=function(t,e,i){var n=i.lineHeight,o=t.w,c=t.x;return"center"===e?c+=o/2:"end"!==e&&"right"!==e||(c+=o),{h:n,w:o,x:c,y:t.y+n/2}}(i,c,l),t.font=l.string,t.textAlign=c,t.textBaseline="middle",t.shadowBlur=n.textShadowBlur,t.shadowColor=n.textShadowColor,r&&(t.fillStyle=a),h&&(t.lineJoin="round",t.lineWidth=b,t.strokeStyle=d),o=0,s=e.length;o<s;++o)u(t,e[o],{stroked:h,filled:r,w:i.w,x:i.x,y:i.y+i.h*o})}(o,c.lines,a.text,c),o.restore())}});var h=Number.MIN_SAFE_INTEGER||-9007199254740991,p=Number.MAX_SAFE_INTEGER||9007199254740991;function f(t,e,i){var n=Math.cos(i),o=Math.sin(i),c=e.x,a=e.y;return{x:c+n*(t.x-c)-o*(t.y-a),y:a+o*(t.x-c)+n*(t.y-a)}}function g(t,e){var i,n,o,c=p,a=h,r=e.origin;for(i=0;i<t.length;++i)o=e.vx*((n=t[i]).x-r.x)+e.vy*(n.y-r.y),c=Math.min(c,o),a=Math.max(a,o);return{min:c,max:a}}function m(t,e){var i=e.x-t.x,n=e.y-t.y,o=Math.sqrt(i*i+n*n);return{vx:(e.x-t.x)/o,vy:(e.y-t.y)/o,origin:t,ln:o}}var v=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function y(t,e,i){var n=e.positioner(t,e),o=n.vx,c=n.vy;if(!o&&!c)return{x:n.x,y:n.y};var a=i.w,r=i.h,l=e.rotation,s=Math.abs(a/2*Math.cos(l))+Math.abs(r/2*Math.sin(l)),d=Math.abs(a/2*Math.sin(l))+Math.abs(r/2*Math.cos(l)),u=1/Math.max(Math.abs(o),Math.abs(c));return s*=o*u,d*=c*u,{x:n.x+(s+=e.offset*o),y:n.y+(d+=e.offset*c)}}t.helpers.extend(v.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,i){this._rotation=i,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this._rect;return!((t=f(t,this.center(),-this._rotation)).x<e.x-1||t.y<e.y-1||t.x>e.x+e.w+2||t.y>e.y+e.h+2)},intersects:function(t){var e,i,n,o=this._points(),c=t._points(),a=[m(o[0],o[1]),m(o[0],o[3])];for(this._rotation!==t._rotation&&a.push(m(c[0],c[1]),m(c[0],c[3])),e=0;e<a.length;++e)if(i=g(o,a[e]),n=g(c,a[e]),i.max<n.min||n.max<i.min)return!1;return!0},_points:function(){var t=this._rect,e=this._rotation,i=this.center();return[f({x:t.x,y:t.y},i,e),f({x:t.x+t.w,y:t.y},i,e),f({x:t.x+t.w,y:t.y+t.h},i,e),f({x:t.x,y:t.y+t.h},i,e)]}});var I={prepare:function(t){var e,i,n,o,c,a=[];for(e=0,n=t.length;e<n;++e)for(i=0,o=t[e].length;i<o;++i)a.push(c=t[e][i]),c.$layout={_box:new v,_hidable:!1,_visible:!0,_set:e,_idx:i};return a.sort(function(t,e){var i=t.$layout,n=e.$layout;return i._idx===n._idx?n._set-i._set:n._idx-i._idx}),this.update(a),a},update:function(t){var e,i,n,o,c,a=!1;for(e=0,i=t.length;e<i;++e)o=(n=t[e]).model(),(c=n.$layout)._hidable=o&&"auto"===o.display,c._visible=n.visible(),a|=c._hidable;a&&function(t){var e,i,n,o,c,a;for(e=0,i=t.length;e<i;++e)(o=(n=t[e]).$layout)._visible&&(c=n.geometry(),a=y(n._el._model,n.model(),c),o._box.update(a,c,n.rotation()));!function(t,e){var i,n,o,c;for(i=t.length-1;i>=0;--i)for(o=t[i].$layout,n=i-1;n>=0&&o._visible;--n)(c=t[n].$layout)._visible&&o._box.intersects(c._box)&&e(o,c)}(t,function(t,e){var i=t._hidable,n=e._hidable;i&&n||n?e._visible=!1:i&&(t._visible=!1)})}(t)},lookup:function(t,e){var i,n;for(i=t.length-1;i>=0;--i)if((n=t[i].$layout)&&n._visible&&n._box.contains(e))return t[i];return null},draw:function(t,e){var i,n,o,c,a,r;for(i=0,n=e.length;i<n;++i)(c=(o=e[i]).$layout)._visible&&(a=o.geometry(),r=y(o._el._view,o.model(),a),c._box.update(r,a,o.rotation()),o.draw(t,r))}},S=t.helpers,U=t.helpers;function C(t,e,i){if(e){var n,o=i.$context,c=i.$groups;e[c._set]&&(n=e[c._set][c._key])&&!0===U.callback(n,[o])&&(t.$datalabels._dirty=!0,i.update(o))}}t.defaults.global.plugins.datalabels={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(t){if(S.isNullOrUndef(t))return null;var e,i,n,o=t;if(S.isObject(t))if(S.isNullOrUndef(t.label))if(S.isNullOrUndef(t.r))for(o="",n=0,i=(e=Object.keys(t)).length;n<i;++n)o+=(0!==n?", ":"")+e[n]+": "+t[e[n]];else o=t.r;else o=t.label;return""+o},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0};var V={id:"datalabels",beforeInit:function(t){t.$datalabels={_actives:[]}},beforeUpdate:function(t){var e=t.$datalabels;e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,i){var n,o,c,a,r,l,s,d,u=e.index,h=t.$datalabels,p=h._datasets[u]=[],f=t.isDatasetVisible(u),g=t.data.datasets[u],m=function(t,e){var i,n,o=t.datalabels,c={},a=[];return!1===o?null:(!0===o&&(o={}),e=U.merge({},[e,o]),i=e.labels||{},n=Object.keys(i),delete e.labels,n.length?n.forEach(function(t){i[t]&&a.push(U.merge({},[e,i[t],{_key:t}]))}):a.push(e),c=a.reduce(function(t,e){return U.each(e.listeners||{},function(i,n){t[n]=t[n]||{},t[n][e._key||"$default"]=i}),delete e.listeners,t},{}),{labels:a,listeners:c})}(g,i),v=e.meta.data||[],y=t.ctx;for(y.save(),n=0,c=v.length;n<c;++n)if((s=v[n]).$datalabels=[],f&&s&&!s.hidden&&!s._model.skip)for(o=0,a=m.labels.length;o<a;++o)l=(r=m.labels[o])._key,(d=new b(r,y,s,n)).$groups={_set:u,_key:l||"$default"},d.$context={active:!1,chart:t,dataIndex:n,dataset:g,datasetIndex:u},d.update(d.$context),s.$datalabels.push(d),p.push(d);y.restore(),U.merge(h._listeners,m.listeners,{merger:function(t,i,n){i[t]=i[t]||{},i[t][e.index]=n[t],h._listened=!0}})},afterUpdate:function(t,e){t.$datalabels._labels=I.prepare(t.$datalabels._datasets,e)},afterDatasetsDraw:function(t){I.draw(t,t.$datalabels._labels)},beforeEvent:function(t,e){if(t.$datalabels._listened)switch(e.type){case"mousemove":case"mouseout":!function(t,e){var i,n,o=t.$datalabels,c=o._listeners;if(c.enter||c.leave){if("mousemove"===e.type)n=I.lookup(o._labels,e);else if("mouseout"!==e.type)return;i=o._hovered,o._hovered=n,function(t,e,i,n){var o,c;(i||n)&&(i?n?i!==n&&(c=o=!0):c=!0:o=!0,c&&C(t,e.leave,i),o&&C(t,e.enter,n))}(t,c,i,n)}}(t,e);break;case"click":!function(t,e){var i=t.$datalabels,n=i._listeners.click,o=n&&I.lookup(i._labels,e);o&&C(t,n,o)}(t,e)}},afterEvent:function(e){var i,o,c,a,r,l,s,d=e.$datalabels,u=d._actives,b=d._actives=e.lastActive||[],h=n.arrayDiff(u,b);for(i=0,o=h.length;i<o;++i)if((r=h[i])[1])for(c=0,a=(s=r[0].$datalabels||[]).length;c<a;++c)(l=s[c]).$context.active=1===r[1],l.update(l.$context);(d._dirty||h.length)&&(I.update(d._labels),function(e){if(!e.animating){for(var i=t.animationService.animations,n=0,o=i.length;n<o;++n)if(i[n].chart===e)return;e.render({duration:1,lazy:!0})}}(e)),delete d._dirty}};return t.plugins.register(V),V}(i("MO+k"))}}])}();